{"version":3,"file":"js/app.bdb5736c.js","mappings":"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","sources":["webpack://intrigue/./src/App.vue","webpack://intrigue/./src/utils/prop.js","webpack://intrigue/./src/utils/event.js","webpack://intrigue/./src/store/persist.js","webpack://intrigue/./src/store/sync.js","webpack://intrigue/./src/store/undo.js","webpack://intrigue/./src/store/types.js","webpack://intrigue/./src/store/document.js","webpack://intrigue/./src/state/index.js","webpack://intrigue/./src/utils/tutorial.js","webpack://intrigue/./src/components/window/TitleBar.vue","webpack://intrigue/./src/components/window/CopyButton.vue","webpack://intrigue/./src/components/window/CopyButton.vue?5bce","webpack://intrigue/./src/components/window/TitleBar.vue?1db7","webpack://intrigue/./src/components/canvas/Canvas.vue","webpack://intrigue/./src/keyboard/index.js","webpack://intrigue/./src/components/canvas/Node.vue","webpack://intrigue/./src/components/canvas/node/Note.vue","webpack://intrigue/./src/components/canvas/node/Note.vue?0e4b","webpack://intrigue/./src/components/canvas/node/Reference.vue","webpack://intrigue/./src/components/canvas/node/Reference.vue?0a06","webpack://intrigue/./src/literature/index.js","webpack://intrigue/./src/components/canvas/Node.vue?ed95","webpack://intrigue/./src/components/canvas/Link.vue","webpack://intrigue/./src/components/canvas/Link.vue?5143","webpack://intrigue/./src/components/canvas/Cursor.vue","webpack://intrigue/./src/components/canvas/Cursor.vue?4f09","webpack://intrigue/./src/components/canvas/Canvas.vue?de33","webpack://intrigue/./src/components/canvas/PointerTracker.vue","webpack://intrigue/./src/components/canvas/PointerTracker.vue?2721","webpack://intrigue/./src/components/utils/Debug.vue","webpack://intrigue/./src/components/utils/Debug.vue?dfaf","webpack://intrigue/./src/App.vue?7ccd","webpack://intrigue/./src/main.js","webpack://intrigue/webpack/bootstrap","webpack://intrigue/webpack/runtime/chunk loaded","webpack://intrigue/webpack/runtime/compat get default export","webpack://intrigue/webpack/runtime/create fake namespace object","webpack://intrigue/webpack/runtime/define property getters","webpack://intrigue/webpack/runtime/ensure chunk","webpack://intrigue/webpack/runtime/get javascript chunk filename","webpack://intrigue/webpack/runtime/get mini-css chunk filename","webpack://intrigue/webpack/runtime/global","webpack://intrigue/webpack/runtime/hasOwnProperty shorthand","webpack://intrigue/webpack/runtime/load script","webpack://intrigue/webpack/runtime/make namespace object","webpack://intrigue/webpack/runtime/node module decorator","webpack://intrigue/webpack/runtime/publicPath","webpack://intrigue/webpack/runtime/jsonp chunk loading","webpack://intrigue/webpack/startup"],"sourcesContent":["<template>\n    <TitleBar />\n    <DocumentCanvas />\n    <PointerTracker />\n    <Debug v-if=\"debug\"/>\n</template>\n\n<script>\nimport { computed } from 'vue';\nimport isElectron from 'is-electron';\n\n// import Avatar from 'vue-boring-avatars';\n\nimport getRandomFruitsName from 'random-fruits-name';\n\nimport { IntrigueDocument } from '@/store';\nimport intrigueMachine from '@/state';\nimport { useMachine } from '@xstate/vue';\n\nimport tutorialData from '@/utils/tutorial';\n\nimport TitleBar from '@/components/window/TitleBar.vue';\nimport DocumentCanvas from '@/components/canvas/Canvas.vue';\nimport PointerTracker from '@/components/canvas/PointerTracker.vue';\nimport Debug from '@/components/utils/Debug.vue';\n\nexport default {\n    name: 'App',\n    components: {\n        TitleBar,\n        DocumentCanvas,\n        PointerTracker,\n        Debug,\n    },\n\n    data() {\n        const document = new IntrigueDocument();\n\n        return {\n            document,\n            store: document.store,\n            users: [],\n            loading: true,\n            debug: false,\n            title: '',\n            docId: undefined,\n            filePath: undefined,\n        };\n    },\n\n    provide() {\n        // use function syntax so that we can access `this`\n        const injections = {\n            document: this.document,\n            store: computed(() => this.document.store),\n            state: computed(() => this.state),\n            send: this.send,\n            filePath: computed(() => this.filePath),\n        };\n\n        Object.keys(this.state.context).forEach((key) => {\n            injections[key] = computed(() => this.state.context[key]);\n        });\n\n        return injections;\n    },\n\n    setup() {\n        if (isElectron()) {\n            import('electron-log').then((log) => {\n                Object.assign(console, log.functions);\n                log.catchErrors();\n            });\n        }\n\n        const { state, send } = useMachine(intrigueMachine);\n        return { state, send };\n    },\n\n    methods: {\n        broadcastUsername() {\n            const fruit = getRandomFruitsName('en', { maxWords: 1 });\n            this.document.updateAwareness('name', `Anonymous ${fruit}`);\n        },\n    },\n\n    mounted() {\n        this.document.on('synced', () => {\n            this.broadcastUsername();\n            this.loading = false;\n        });\n\n        this.document.on('commit', () => {\n            if (isElectron()) {\n                // eslint-disable-next-line import/no-extraneous-dependencies, global-require\n                import('electron').then(({ ipcRenderer }) => {\n                    ipcRenderer.send('set-edited', true);\n                });\n            }\n        });\n\n        this.document.on('saved', () => {\n            this.$message.success('Saved!');\n            if (isElectron()) {\n                // eslint-disable-next-line import/no-extraneous-dependencies, global-require\n                import('electron').then(({ ipcRenderer }) => {\n                    ipcRenderer.send('set-edited', false);\n                });\n            }\n        });\n\n        // Prevent space from causing scrolling down behavior.\n        window.addEventListener('keydown', (event) => {\n            if (event.code === 'Space' && event.target === document.body) {\n                event.preventDefault();\n            }\n        });\n\n        if (isElectron()) {\n            // eslint-disable-next-line import/no-extraneous-dependencies, global-require\n            import('electron').then(({ ipcRenderer }) => {\n                ipcRenderer.invoke('get-packaged').then((isPackaged) => {\n                    console.log(`[App][ipcRenderer@get-packaged] ${isPackaged}`);\n                    this.debug = !isPackaged;\n                });\n\n                ipcRenderer.on('new-file', () => {\n                    console.log('[App][ipcRenderer@set-filepath] This is a new empty file.');\n                    this.document.initSync();\n                });\n\n                ipcRenderer.on('set-filepath', (_, filePath, overwrite) => {\n                    console.log(`[App][ipcRenderer@set-filepath] filePath is ${filePath}.`);\n                    this.filePath = filePath;\n                    this.document.initPersistence(filePath, overwrite);\n                });\n\n                ipcRenderer.on('save-file', () => {\n                    console.log('[App][ipcRenderer@save-file] Manual save to disk.');\n                    this.document.saveToDisk();\n                });\n            });\n        } else {\n            const queryString = window.location.search;\n            const urlParams = new URLSearchParams(queryString);\n            console.log(`[App][mounted] urlParams.document is ${urlParams.get('document')}`);\n            this.document.initSync(urlParams.get('document'));\n\n            if (urlParams.get('document') === 'tutorial') {\n                console.log('[App][mounted@web] Loading tutorial data...');\n                Object.keys(tutorialData.nodes).forEach((nodeId) => {\n                    this.store.nodes[nodeId] = tutorialData.nodes[nodeId];\n                });\n\n                Object.keys(tutorialData.links).forEach((linkId) => {\n                    this.store.links[linkId] = tutorialData.links[linkId];\n                });\n            } else {\n                this.document.initPersistence(urlParams.get('document'));\n            }\n        }\n    },\n\n    beforeUnmount() {\n        console.log('[App][beforeUnmount] Closing document...');\n        this.document.close();\n        console.log('[App][beforeUnmount] Document closed.');\n    },\n\n    watch: {\n        'document.users': {\n            deep: true,\n            handler() {\n                const users = [];\n                Object.keys(this.document.users).forEach((userId) => {\n                    users.push(this.document.users[userId]);\n                });\n                this.users = users;\n            },\n        },\n        'document.metadata.name': {\n            deep: true,\n            handler() {\n                this.title = this.document.metadata.name;\n            },\n        },\n    },\n};\n</script>\n\n<style lang=\"scss\">\nhtml,\nbody,\n#app {\n    --background: #F8F9F9;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    background: var(--background);\n}\n\n.noselect {\n    -webkit-touch-callout: none; /* iOS Safari */\n    -webkit-user-select: none; /* Safari */\n    -khtml-user-select: none; /* Konqueror HTML */\n    -moz-user-select: none; /* Old versions of Firefox */\n    -ms-user-select: none; /* Internet Explorer/Edge */\n    user-select: none; /* Non-prefixed version, currently\n                                  supported by Chrome, Edge, Opera and Firefox */\n}\n</style>\n","/* eslint-disable no-plusplus */\n/* eslint-disable no-param-reassign */\nexport default function propByPath(object, path, value) {\n    const parts = path.split('.');\n    const limit = parts.length - 1;\n    for (let i = 0; i < limit; ++i) {\n        const key = parts[i];\n        object = object[key] ?? (object[key] = {});\n    }\n    const key = parts[limit];\n    if (value !== undefined) {\n        object[key] = value;\n    }\n    return object[key];\n}\n","export default class EventEmitter {\n    constructor() {\n        this.events = {};\n        // this.emitter = createNanoEvents();\n    }\n\n    // eslint-disable-next-line\n    on(event, callback) {\n        // return this.emitter.on(event, callback);\n        if (!this.events[event]) this.events[event] = [];\n        this.events[event].push(callback);\n        return () => {\n            this.events[event] = this.events[event]?.filter((i) => callback !== i);\n        };\n    }\n\n    emit(event, ...args) {\n        // this.emitter.emit(event, data);\n        const callbacks = this.events[event] || [];\n        callbacks.forEach((callback) => callback(...args));\n        // for (let i = 0, { length } = callbacks; i < length; i += 1) {\n        //     callbacks[i](...args);\n        // }\n    }\n}\n","import isElectron from 'is-electron';\nimport { encodeStateAsUpdate, applyUpdate } from 'yjs';\n// import * as mutex from 'lib0/mutex';\nimport EventEmitter from '@/utils/event';\n\nexport default class LocalFilePersistence extends EventEmitter {\n    constructor(filePath, doc, overwrite, fs, debounce) {\n        super();\n        this.doc = doc;\n        this.filePath = filePath;\n        this.timeout = null;\n        this.debounce = debounce;\n\n        if (isElectron()) {\n            // eslint-disable-next-line global-require\n            const { readFile, writeFile, access } = require('fs/promises');\n            this.readFile = readFile;\n            this.writeFile = writeFile;\n            this.access = access;\n        } else if (fs) {\n            const { readFile, writeFile, access } = fs;\n            this.readFile = readFile;\n            this.writeFile = writeFile;\n            this.access = access;\n        } else {\n            throw new Error('LocalFilePersistence is designed to be used in Electron. Either make sure you are calling this class in an Electron environment, or provide your own async fs implementation.');\n        }\n\n        if (!this.filePath) {\n            this.emit('synced');\n        } else {\n            this.access(this.filePath).then(() => {\n                if (overwrite) {\n                    this.saveToDisk();\n                } else {\n                    this.readFile(this.filePath).then((data) => {\n                        applyUpdate(this.doc, Uint8Array.from(data));\n                        this.emit('synced');\n                    });\n                }\n            }).catch(() => {\n                // console.error(`Cannot access file at ${this.filePath}`);\n                this.saveToDisk();\n            });\n        }\n        this.doc.on('update', this.triggerAutosave.bind(this));\n    }\n\n    triggerAutosave() {\n        if (!this.debounce) return;\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n            this.timeout = null;\n        }\n        this.timeout = setTimeout(() => {\n            if (!this.filePath) return;\n\n            console.log('[LocalFilePersistence][triggerAutosave@timeout] Saving to disk.');\n            this.saveToDisk();\n        }, this.debounce);\n    }\n\n    saveToDisk() {\n        if (!this.filePath) return;\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n            this.timeout = null;\n        }\n\n        this.emit('save');\n        this.writeFile(this.filePath, encodeStateAsUpdate(this.doc)).then(() => {\n            // if (callback) callback();\n            this.emit('saved');\n        });\n    }\n}\n","import { nanoid } from 'nanoid';\nimport * as Vue from 'vue';\nimport { reactive } from 'vue';\nimport isElectron from 'is-electron';\nimport { enableVueBindings, syncedStore, getYjsValue } from '@syncedstore/core';\n\nimport { WebrtcProvider } from 'y-webrtc';\nimport { IndexeddbPersistence } from 'y-indexeddb';\nimport EventEmitter from '@/utils/event';\nimport LocalFilePersistence from './persist';\n\n// import * as T from \"./types\"\n// import { DocTypeDescription } from '@syncedstore/core/types/doc';\n\nenableVueBindings(Vue);\n\nexport default class SyncedDocument extends EventEmitter {\n    constructor(storeStructure) {\n        super();\n        this.syncInitialized = false;\n        this.storeStructure = storeStructure;\n        this.store = syncedStore(storeStructure);\n        this.localData = reactive({ ...storeStructure });\n        this.remoteUpdated = false;\n        console.warn = () => null; // Supress the numerous warnings generated by SyncedStore.\n    }\n\n    initSync(documentId) {\n        console.log(`[Sync][initSync] Initializing sync with docID ${documentId}.`);\n        this.users = reactive({});\n        this.store.metadata.id = documentId || nanoid();\n        // this.store.metadata.id = this.store.metadata.id;\n\n        const doc = getYjsValue(this.store);\n        this.syncProvider = new WebrtcProvider(this.store.metadata.id, doc);\n        console.log('[Sync][initSync].');\n        this.syncProvider.awareness.on('change', this.handleChanges.bind(this));\n\n        // Generate a random user id, then update the awareness.\n        this.userId = nanoid();\n        this.syncProvider.awareness.setLocalStateField('id', this.userId);\n        // if (!this.store.metadata.name) this.store.metadata.name = 'Untitled';\n\n        this.localUser = reactive(this.users[this.userId]);\n\n        this.syncInitialized = true;\n    }\n\n    initPersistence(filePath, overwrite) {\n        const doc = getYjsValue(this.store);\n\n        this.saveProvider = isElectron()\n            ? new LocalFilePersistence(filePath, doc, overwrite)\n            : new IndexeddbPersistence(filePath || this.store.metadata.id, doc);\n\n        this.saveProvider.on('synced', () => {\n            console.log('[Sync][saveProvider@synced] Save provider synced.', this.store.metadata.id);\n            if (!this.syncInitialized) this.initSync(this.store.metadata.id);\n            this.emit('synced');\n        });\n\n        this.saveProvider.on('save', () => {\n            console.log('[Sync][saveProvider@synced] Saving to disk...');\n            this.emit('save');\n        });\n\n        this.saveProvider.on('saved', () => {\n            console.log('[Sync][saveProvider@synced] Save provider saved.');\n            this.emit('saved');\n        });\n    }\n\n    close() {\n        this.syncProvider.destroy();\n    }\n\n    // eslint-disable-next-line\n    updateAwareness(key, value) {\n        if (!this.syncInitialized) return;\n        this.syncProvider.awareness.setLocalStateField(key, value);\n    }\n\n    registerAwarenessCallback(key, callback) {\n        this.syncProvider.awareness.on(key, callback);\n    }\n\n    handleChanges() {\n        const awarenessInfo = [...this.syncProvider.awareness.getStates().values()];\n        const onlineUsers = new Set();\n        const offlineUsers = new Set(Object.keys(this.users));\n\n        awarenessInfo.forEach((user) => {\n            onlineUsers.add(user.id);\n            offlineUsers.delete(user.id);\n\n            if (!this.users[user.id]) this.users[user.id] = {};\n            Object.entries(user).forEach(([key, value]) => {\n                this.users[user.id][key] = value;\n            });\n        });\n\n        offlineUsers.forEach((userId) => delete this.users[userId]);\n    }\n\n    stringify() {\n        return JSON.stringify(this.store);\n    }\n}\n","import SyncedDocument from './sync';\n\nexport default class ReversibleDocument extends SyncedDocument {\n    constructor(storeStructure) {\n        super(storeStructure);\n\n        this.inverses = {};\n        this.undoStack = [];\n        this.redoStack = [];\n\n        this.previousTime = -1;\n        this.captureTimeout = 50;\n    }\n\n    registerInverses(actionA, actionB) {\n        this.inverses[actionA] = actionB;\n        this.inverses[actionB] = actionA;\n    }\n\n    commit(action, params) {\n        let inverseParams = null;\n\n        // eslint-disable-next-line\n        const actionFunction = this[action].bind(this);\n\n        if (actionFunction !== undefined) {\n            inverseParams = actionFunction(params);\n        } else {\n            console.error(`[Undo][Commit] There is no method called ${action}() on this object:`, this);\n            return;\n        }\n\n        if (!inverseParams) return;\n\n        const currentTime = Date.now();\n        if (Math.abs(currentTime - this.previousTime) < this.captureTimeout) {\n            console.log('[Undo][Commit] Capturing.');\n            // If the previous item is not in an array, then put it inside one.\n            if (!Array.isArray(this.undoStack[this.undoStack.length - 1])) {\n                this.undoStack[this.undoStack.length - 1] = [\n                    this.undoStack[this.undoStack.length - 1],\n                ];\n            }\n            this.undoStack[this.undoStack.length - 1].push({ action, inverseParams });\n        } else {\n            this.undoStack.push({ action, inverseParams });\n        }\n        this.previousTime = currentTime;\n        // console.log(`[Undo][Commit] ${JSON.stringify(this.undoStack, null, 2)}`);\n\n        this.redoStack = [];\n        this.emit('commit', action, params);\n    }\n\n    popStackItem(fromStack, toStack) {\n        if (fromStack.length <= 0) return;\n        let lastRecord = fromStack.pop();\n        if (!lastRecord) return;\n\n        if (!Array.isArray(lastRecord)) lastRecord = [lastRecord];\n\n        const toStackRecord = [];\n        lastRecord.reverse().forEach((item) => {\n            const inverseAction = this.inverses[item.action];\n            if (!inverseAction) {\n                console.error(`There is no registered inverse for ${item.action}().`);\n                return;\n            }\n\n            let inverseParams;\n\n            // eslint-disable-next-line\n            const actionFunction = this[inverseAction].bind(this);\n\n            if (actionFunction !== undefined) {\n                inverseParams = actionFunction(item.inverseParams);\n            } else {\n                console.error(`There is no method called ${inverseAction}() on this object:`, this);\n            }\n\n            toStackRecord.push({\n                action: inverseAction,\n                inverseParams,\n            });\n        });\n\n        toStack.push(toStackRecord.length === 1 ? toStackRecord[0] : toStackRecord);\n    }\n\n    undo() {\n        this.popStackItem(this.undoStack, this.redoStack);\n    }\n\n    redo() {\n        this.popStackItem(this.redoStack, this.undoStack);\n    }\n\n    canUndo() {\n        return this.undoStack.length > 0;\n    }\n\n    canRedo() {\n        return this.redoStack.length > 0;\n    }\n}\n","export default class NodeTypes {\n    static Note = 'note';\n\n    static Reference = 'reference';\n\n    static Area = 'area';\n}\n","/* eslint-disable class-methods-use-this */\n/* eslint-disable no-param-reassign */\nimport { reactive } from 'vue';\nimport { nanoid } from 'nanoid';\n\nimport propByPath from '@/utils/prop';\n\nimport ReversibleDocument from './undo';\nimport NodeTypes from './types';\n\nexport default class IntrigueDocument extends ReversibleDocument {\n    constructor() {\n        super({\n            metadata: {},\n            nodes: {},\n            links: {},\n\n            fragment: 'xml',\n        });\n\n        this.remoteSelection = reactive(new Set());\n\n        this.registerInverses('createNode', 'deleteNode');\n        this.registerInverses('createNodes', 'deleteNodes');\n        this.registerInverses('updateNode', 'updateNode');\n        this.registerInverses('updateNodes', 'updateNodes');\n        this.registerInverses('snapNode', 'unsnapNode');\n        this.registerInverses('createLink', 'removeLink');\n    }\n\n    // Note: each function below should return its inverse parameters\n    createNode(nodeItem, state) {\n        state = state || this.store;\n        const nodeId = nodeItem.id ? nodeItem.id : nanoid();\n        const node = {\n            id: nodeId,\n            type: nodeItem.type,\n            content: nodeItem.content,\n            links: [],\n            parent: null,\n            children: [],\n            identifier: null,\n            literature: null,\n            x: nodeItem.x ? nodeItem.x : 0,\n            y: nodeItem.y ? nodeItem.y : 0,\n            w: nodeItem.w ? nodeItem.w : 200,\n        };\n        if (nodeItem.links) {\n            nodeItem.links.forEach((link) => this.createLink(link, state));\n        }\n        if (nodeItem.children) {\n            nodeItem.children.forEach((child) => this.snapNode(child, state));\n        }\n        state.nodes[nodeId] = node;\n        return nodeId;\n    }\n\n    createNodes(nodeItems, state) {\n        state = state || this.store;\n        const nodeIds = [];\n        const newLinks = [];\n        const newChildren = [];\n        nodeItems.forEach((item) => {\n            // Extract all links to be created.\n            // This is to delay link creation until all nodes are first created.\n            if (item.links) {\n                item.links.forEach((link) => newLinks.push(link));\n                delete item.links;\n            }\n            // Extract all children to be snapped.\n            // Same as above.\n            if (item.children) {\n                item.children.forEach((child) => newChildren.push(child));\n                delete item.children;\n            }\n\n            const nodeId = this.createNode(item, state);\n            nodeIds.push(nodeId);\n        });\n\n        newLinks.forEach((link) => this.createLink(link, state));\n\n        newChildren.forEach((pairInfo) => this.snapNode(pairInfo, state));\n\n        return nodeIds;\n    }\n\n    deleteNode(nodeId, state) {\n        state = state || this.store;\n        const node = { ...state.nodes[nodeId] };\n        const removedLinks = [];\n        const unsnappedChildren = [];\n        node.links.forEach((linkId) => {\n            removedLinks.push(this.removeLink(linkId, state));\n        });\n        node.children.forEach((childId) => {\n            unsnappedChildren.push(\n                this.unsnapNode({\n                    source: node.id,\n                    target: childId,\n                }, state),\n            );\n        });\n        node.links = removedLinks;\n        node.children = unsnappedChildren;\n        delete state.nodes[nodeId];\n        return node;\n    }\n\n    deleteNodes(nodeIds, state) {\n        state = state || this.store;\n        const nodes = [];\n        nodeIds.forEach((nodeId) => {\n            const node = this.deleteNode(nodeId, state);\n            nodes.push(node);\n        });\n        return nodes;\n    }\n\n    updateNode(update, state) {\n        state = state || this.store;\n        const node = state.nodes[update.id];\n        const inverseParams = {\n            id: update.id,\n        };\n        // Update parameters by a number\n        if (update.by) {\n            inverseParams.by = {};\n            Object.entries(update.by).forEach(([path, value]) => {\n                const originalValue = propByPath(node, path);\n                if (typeof originalValue !== 'number') {\n                    console.error('Only number properties can be updated by a number!');\n                    return;\n                }\n                propByPath(node, path, originalValue + value);\n                inverseParams.by[path] = -originalValue;\n            });\n        }\n        // Set parameters to values\n        if (update.set) {\n            inverseParams.set = {};\n            Object.entries(update.set).forEach(([path, value]) => {\n                const originalValue = propByPath(node, path);\n                propByPath(node, path, value);\n                inverseParams.set[path] = originalValue;\n            });\n        }\n        return inverseParams;\n    }\n\n    updateNodes(update, state) {\n        state = state || this.store;\n        const inverseParams = {\n            id: [...update.id],\n        };\n\n        if (update.by) {\n            inverseParams.by = {};\n            Object.entries(update.by).forEach(([path, value]) => {\n                inverseParams.by[path] = -value;\n            });\n            update.id.forEach((nodeId) => {\n                this.updateNode({\n                    id: nodeId,\n                    by: update.by,\n                }, state);\n            });\n        }\n\n        if (update.set) {\n            inverseParams.set = {};\n            update.id.forEach((nodeId) => {\n                inverseParams.set[nodeId] = {};\n                const node = state.nodes[nodeId];\n                Object.keys(update.set[nodeId]).forEach((path) => {\n                    inverseParams.set[nodeId][path] = propByPath(node, path);\n                });\n                this.updateNode({\n                    id: nodeId,\n                    set: update.set[nodeId],\n                }, state);\n            });\n        }\n\n        return inverseParams;\n    }\n\n    snapNode(nodes, state) {\n        state = state || this.store;\n        const inverseParams = {};\n        if (!nodes.source || !nodes.target) return false;\n        const parent = state.nodes[nodes.source];\n        const child = state.nodes[nodes.target];\n\n        // Areas can have multiple children\n        if (parent.type === NodeTypes.Area) {\n            parent.children.push(nodes.target);\n            // Remove potential duplicates\n            parent.children.filter((item, i) => parent.children.indexOf(item) === i);\n            child.parent = parent.id;\n\n            inverseParams.source = nodes.source;\n            inverseParams.target = nodes.target;\n\n            // Other nodes may only have one child.\n        } else if (parent.children.length === 0) {\n            parent.children.push(nodes.target);\n            // Remove potential duplicates\n            parent.children.filter((item, i) => parent.children.indexOf(item) === i);\n            child.parent = parent.id;\n\n            inverseParams.source = nodes.source;\n            inverseParams.target = nodes.target;\n        }\n        return inverseParams.source ? inverseParams : false;\n    }\n\n    unsnapNode(nodes, state) {\n        state = state || this.store;\n        const inverseParams = {};\n        if (!nodes.source || !nodes.target) return false;\n        const parent = state.nodes[nodes.source];\n        const child = state.nodes[nodes.target];\n\n        const childIndex = parent.children.indexOf(nodes.target);\n        if (childIndex > -1) {\n            parent.children.splice(childIndex, 1);\n            child.parent = null;\n            inverseParams.source = nodes.source;\n            inverseParams.target = nodes.target;\n        }\n\n        return inverseParams.source ? inverseParams : false;\n    }\n\n    createLink(params, state) {\n        state = state || this.store;\n        const source = state.nodes[params.source];\n        const target = state.nodes[params.target];\n\n        const linkId = params.id ? params.id : nanoid();\n        const link = {\n            id: linkId,\n            source: params.source,\n            target: params.target,\n        };\n        state.links[linkId] = link;\n\n        source.links.push(linkId);\n        source.links.filter((item, i) => source.links.indexOf(item) === i);\n        target.links.push(linkId);\n        target.links.filter((item, i) => target.links.indexOf(item) === i);\n\n        return linkId;\n    }\n\n    removeLink(linkId, state) {\n        state = state || this.store;\n        const link = { ...state.links[linkId] };\n        const source = state.nodes[link.source];\n        const target = state.nodes[link.target];\n\n        source.links.splice(source.links.indexOf(linkId), 1);\n        target.links.splice(target.links.indexOf(linkId), 1);\n\n        delete state.links[linkId];\n        return link;\n    }\n\n    findLinkByNodeIds(sourceId, targetId) {\n        const finds = Object.keys(this.store.links).filter((linkId) => {\n            const link = this.store.links[linkId];\n            return link.source === sourceId && link.target === targetId;\n        });\n        return finds.length > 0 ? finds[0] : false;\n    }\n\n    saveToDisk() {\n        if (this.saveProvider.saveToDisk) this.saveProvider.saveToDisk();\n    }\n}\n","/* eslint-disable no-param-reassign */\n/* eslint-disable no-return-assign */\n\nimport { createMachine, assign } from 'xstate';\n\nconst ViewingState = {\n    initial: 'Idle',\n    states: {\n        Idle: {\n            on: {\n                'editing title': 'TitleEditing',\n                'space pressed': { target: 'Panning', actions: 'setPanning' },\n                'start dragging': { target: 'Dragging', actions: 'setDragging' },\n                'start linking': { target: 'Linking', actions: 'setLinking' },\n                'update selection': { target: 'Selecting', actions: 'setSelection' },\n                'create node': { target: '#Intrigue.Editing', actions: 'setEditing' },\n                'delete node': { target: 'Idle', actions: 'clearSelection' },\n                'dblclick node': { target: '#Intrigue.Editing', actions: 'setEditing' },\n            },\n        },\n\n        TitleEditing: {\n            on: { 'stop editing title': 'Idle' },\n        },\n\n        Panning: {\n            on: {\n                'space released': { target: 'Idle', actions: 'clearPanning' },\n            },\n        },\n\n        Selecting: {\n            on: {\n                'update selection': { target: 'Selecting', actions: 'setSelection' },\n                'done selecting': { target: 'Idle' },\n            },\n        },\n\n        Dragging: {\n            on: {\n                'drop enter': { target: 'Dropping', actions: 'setDropping' },\n                'stop dragging': { target: 'Idle', actions: ['clearDragging', 'clearDetaching'] },\n                'start detaching': { target: 'Detaching', actions: 'setDetaching' },\n            },\n        },\n\n        Dropping: {\n            on: {\n                'drop leave': { target: 'Dragging', actions: 'clearDropping' },\n                'stop dragging': { target: 'Idle', actions: ['clearDragging', 'clearDropping'] },\n            },\n        },\n\n        Detaching: {\n            on: {\n                detached: { target: 'Dragging', actions: 'clearDetaching' },\n                'stop detaching': { target: 'Idle', actions: 'clearDetaching' },\n            },\n        },\n\n        Linking: {\n            on: {\n                'update selection': { target: 'Idle', actions: ['clearLinking', 'setSelection'] },\n                'click on empty canvas': { target: 'Idle', actions: 'clearLinking' },\n                'create node': { target: '#Intrigue.Editing', actions: ['clearLinking', 'setEditing'] },\n            },\n        },\n    },\n};\n\nconst EditingState = {\n    initial: 'Editing',\n    states: {\n        Editing: {\n            on: {\n                'editor blur': {\n                    target: '#Intrigue.Viewing',\n                    actions: 'clearEditing',\n                },\n                'update selection': {\n                    target: '#Intrigue.Viewing',\n                    actions: ['clearEditing', 'setSelection'],\n                },\n            },\n        },\n    },\n};\n\nconst ArrangingState = {\n    initial: 'Selected',\n    states: {\n        Selected: {\n            on: {\n                'click on empty canvas': '#Intrigue.Viewing',\n                'drag node handle': 'Resizing',\n            },\n        },\n\n        Resizing: {\n            on: {\n                'drag end': 'Selected',\n            },\n        },\n    },\n};\n\nconst intrigueMachine = createMachine(\n    {\n        id: 'Intrigue',\n        initial: 'Viewing',\n        states: {\n            Viewing: { ...ViewingState },\n            Arranging: { ...ArrangingState },\n            Editing: { ...EditingState },\n        },\n        context: {\n            editing: null,\n            panning: false,\n            dragging: null,\n            dropping: null,\n            selection: [],\n            detaching: [],\n            linking: null,\n        },\n    },\n    {\n        actions: {\n            setEditing: assign({\n                editing: (context, event) => (context.editing = event.node),\n            }),\n\n            clearEditing: assign({\n                editing: (context) => (context.editing = null),\n            }),\n\n            setPanning: assign({\n                panning: (context) => (context.panning = true),\n            }),\n\n            clearPanning: assign({\n                panning: (context) => (context.panning = false),\n            }),\n\n            setDragging: assign({\n                dragging: (context, event) => (context.dragging = event.node),\n            }),\n\n            clearDragging: assign({\n                dragging: (context) => (context.dragging = null),\n            }),\n\n            setDropping: assign({\n                dropping: (context, event) => (context.dropping = event.node),\n            }),\n\n            clearDropping: assign({\n                dropping: (context) => (context.dropping = null),\n            }),\n\n            setDetaching: assign({\n                detaching: (context, event) => (context.detaching = event.detaching),\n            }),\n\n            clearDetaching: assign({\n                detaching: (context) => (context.detaching = []),\n            }),\n\n            setSelection: assign({\n                selection: (context, event) => (context.selection = event.selection),\n            }),\n\n            clearSelection: assign({\n                selection: (context) => (context.selection = []),\n            }),\n\n            setLinking: assign({\n                linking: (context, event) => (context.linking = event.node),\n            }),\n\n            clearLinking: assign({\n                linking: (context) => (context.linking = null),\n            }),\n        },\n    },\n);\n\nexport default intrigueMachine;\n// export const state = interpret(intrigueMachine).start();\n","const tutorialData = {\n    metadata: {\n        id: 'tutorial',\n    },\n    links: {\n        aP1EHlKvrNgjPx1kElhZ0: {\n            id: 'aP1EHlKvrNgjPx1kElhZ0',\n            source: 'AHiu8yMyfhq5ZYnjuoIn0',\n            target: '6Z-x843ah7e0b0fZMReph',\n        },\n        'WXCl7YDCOuoK-X7ZAOfEY': {\n            id: 'WXCl7YDCOuoK-X7ZAOfEY',\n            source: 'AHiu8yMyfhq5ZYnjuoIn0',\n            target: 'SALvRB6xX4hqjJVjU6Y_b',\n        },\n        F39NcKCnnIjtqGPzvoA1W: {\n            id: 'F39NcKCnnIjtqGPzvoA1W',\n            source: 'EwfSxmoKarx3n7W1mJy8s',\n            target: '8N-6eZFYDRjV2MmtRHqZD',\n        },\n        IjnvakXbzDwcf84oBqYCb: {\n            id: 'IjnvakXbzDwcf84oBqYCb',\n            source: 'SALvRB6xX4hqjJVjU6Y_b',\n            target: 'aoHmIUmem-T3Zg_VOEvRr',\n        },\n        'KGeuXb3kocr6rZTAOr-i_': {\n            id: 'KGeuXb3kocr6rZTAOr-i_',\n            source: '8N-6eZFYDRjV2MmtRHqZD',\n            target: 'wzwAxT0LV6sfNjOgv31fx',\n        },\n        'ps9k-tiBPP0cH9ymY4Myy': {\n            id: 'ps9k-tiBPP0cH9ymY4Myy',\n            source: 'JCnC9yAUfQ3IXvnj_THs8',\n            target: 'agP9N5iMMR8mJF1s5Wthr',\n        },\n        'jNo6CHcnaxjK7Bk4e-bAc': {\n            id: 'jNo6CHcnaxjK7Bk4e-bAc',\n            source: 'AHiu8yMyfhq5ZYnjuoIn0',\n            target: 'rxyYL1-vZysaZgRMzDXNU',\n        },\n        bPRss4q2Tvzn_ea1TY4Wr: {\n            id: 'bPRss4q2Tvzn_ea1TY4Wr',\n            source: 'rxyYL1-vZysaZgRMzDXNU',\n            target: 'jPkhyrgf3HOvPALhbfWYj',\n        },\n        CsKDxvFhIxKDk_m6Bj8Dh: {\n            id: 'CsKDxvFhIxKDk_m6Bj8Dh',\n            source: '3nj7Xpr-AdGt3rKLomiK5',\n            target: 'anvYLObXrGTWIk8T3R2rq',\n        },\n        DTZkgJWGKYriyalyLJfZx: {\n            id: 'DTZkgJWGKYriyalyLJfZx',\n            source: 'EIB7xARz2ceZcpBkE940d',\n            target: 'anvYLObXrGTWIk8T3R2rq',\n        },\n        NBLwCo0fXhOXI6DGjqtWU: {\n            id: 'NBLwCo0fXhOXI6DGjqtWU',\n            source: '3nj7Xpr-AdGt3rKLomiK5',\n            target: 'KsZsnbXyRuVqf3FKtK0BA',\n        },\n    },\n    nodes: {\n        AHiu8yMyfhq5ZYnjuoIn0: {\n            id: 'AHiu8yMyfhq5ZYnjuoIn0',\n            type: 'note',\n            content: '<h1>Hello! Welcome to Intrigue </h1><p></p><p>Using this app, you can quickly write down your ideas and corresponding references, and make your academic writing faster.</p>',\n            links: [\n                'aP1EHlKvrNgjPx1kElhZ0',\n                'WXCl7YDCOuoK-X7ZAOfEY',\n                'jNo6CHcnaxjK7Bk4e-bAc',\n            ],\n            parent: null,\n            children: [],\n            identifier: null,\n            literature: null,\n            x: 558,\n            y: 99,\n            w: 445.00390000000004,\n            currentX: 558,\n            currentY: 99,\n            currentWidth: 445.00390000000004,\n            currentHeight: 75,\n            h: 79,\n        },\n        SALvRB6xX4hqjJVjU6Y_b: {\n            id: 'SALvRB6xX4hqjJVjU6Y_b',\n            type: 'note',\n            content: '<h2>This is a note.</h2><p></p><p>Notes comes with <strong>WYSIWYG markdown</strong> support.</p>',\n            links: [\n                'WXCl7YDCOuoK-X7ZAOfEY',\n                'IjnvakXbzDwcf84oBqYCb',\n            ],\n            parent: null,\n            children: [\n                'rK2TqMSt-f9f784M19Vro',\n            ],\n            identifier: null,\n            literature: null,\n            x: 287,\n            y: 191,\n            w: 200,\n            currentX: 287,\n            currentY: 191,\n            currentWidth: 200,\n            currentHeight: 68,\n        },\n        'rK2TqMSt-f9f784M19Vro': {\n            id: 'rK2TqMSt-f9f784M19Vro',\n            type: 'note',\n            content: '<p>Notes can be <strong>snapped</strong> together, by dragging one onto another.</p>',\n            links: [],\n            parent: 'SALvRB6xX4hqjJVjU6Y_b',\n            children: [],\n            identifier: null,\n            literature: null,\n            x: 287,\n            y: 264,\n            w: 200,\n            currentX: 287,\n            currentY: 264,\n            currentWidth: 200,\n            currentHeight: 34,\n        },\n        '6Z-x843ah7e0b0fZMReph': {\n            id: '6Z-x843ah7e0b0fZMReph',\n            type: 'note',\n            content: '<h2>Inspiration</h2><p></p><p>Intrigue is heavily inspired by&nbsp;<strong>Victor Margolin</strong>s method of organizing research literature and writing, which makes use of note cards and literature canvases.</p>',\n            links: [\n                'aP1EHlKvrNgjPx1kElhZ0',\n            ],\n            parent: null,\n            children: [\n                '8N-6eZFYDRjV2MmtRHqZD',\n            ],\n            identifier: null,\n            literature: null,\n            x: 615,\n            y: 239,\n            w: 329.0079,\n            currentX: 615,\n            currentY: 239,\n            currentWidth: 329.0079,\n            currentHeight: 82,\n            h: 86,\n        },\n        '8N-6eZFYDRjV2MmtRHqZD': {\n            id: '8N-6eZFYDRjV2MmtRHqZD',\n            type: 'reference',\n            content: '<p><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://www.youtube.com/watch?v=Kxyy0THLfuI\">https://www.youtube.com/watch?v=Kxyy0THLfuI</a></p>',\n            links: [\n                'F39NcKCnnIjtqGPzvoA1W',\n                'KGeuXb3kocr6rZTAOr-i_',\n            ],\n            parent: '6Z-x843ah7e0b0fZMReph',\n            children: [],\n            identifier: 'https://www.youtube.com/watch?v=Kxyy0THLfuI',\n            literature: null,\n            x: 615,\n            y: 326,\n            w: 329.0079,\n            currentX: 615,\n            currentY: 326,\n            currentWidth: 329.0079,\n            currentHeight: 62,\n            referenceType: 'url',\n            title: 'The process of writing World History of Design - YouTube',\n            author: [\n                {\n                    family: 'Web link',\n                },\n            ],\n            record: {\n                title: 'The process of writing World History of Design - YouTube',\n                author: [\n                    {\n                        family: 'Web link',\n                    },\n                ],\n                identifier: 'https://www.youtube.com/watch?v=Kxyy0THLfuI',\n            },\n        },\n        EwfSxmoKarx3n7W1mJy8s: {\n            id: 'EwfSxmoKarx3n7W1mJy8s',\n            type: 'note',\n            content: '<p>This is a reference. Try double-clicking it!</p>',\n            links: [\n                'F39NcKCnnIjtqGPzvoA1W',\n            ],\n            parent: null,\n            children: [],\n            identifier: null,\n            literature: null,\n            x: 995,\n            y: 268,\n            w: 129.00889999999998,\n            currentX: 995,\n            currentY: 268,\n            currentWidth: 129.00889999999998,\n            currentHeight: 34,\n            h: 38,\n        },\n        'aoHmIUmem-T3Zg_VOEvRr': {\n            id: 'aoHmIUmem-T3Zg_VOEvRr',\n            type: 'reference',\n            content: '<p><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax\">https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax</a></p>',\n            links: [\n                'IjnvakXbzDwcf84oBqYCb',\n            ],\n            parent: null,\n            children: [],\n            identifier: 'https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax',\n            literature: null,\n            x: 113,\n            y: 362,\n            w: 200,\n            currentX: 113,\n            currentY: 362,\n            currentWidth: 200,\n            currentHeight: 117,\n            referenceType: 'url',\n            title: 'Basic writing and formatting syntax - GitHub Docs',\n            author: [\n                {\n                    family: 'Web link',\n                },\n            ],\n            record: {\n                title: 'Basic writing and formatting syntax - GitHub Docs',\n                author: [\n                    {\n                        family: 'Web link',\n                    },\n                ],\n                identifier: 'https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax',\n            },\n        },\n        wzwAxT0LV6sfNjOgv31fx: {\n            id: 'wzwAxT0LV6sfNjOgv31fx',\n            type: 'note',\n            content: '<h2>References</h2><p></p><p>Many things can be <strong>automatically</strong> turned into reference notes, just by <strong>pasting in the identifiers</strong>:</p><p></p><ul><li><p>ISBN</p></li><li><p>DOI</p></li><li><p>Web Link</p></li><li><p>Zotero item link</p></li></ul>',\n            links: [\n                'KGeuXb3kocr6rZTAOr-i_',\n            ],\n            parent: null,\n            children: [\n                'JCnC9yAUfQ3IXvnj_THs8',\n            ],\n            identifier: null,\n            literature: null,\n            x: 331,\n            y: 591,\n            w: 327.0079,\n            currentX: 331,\n            currentY: 591,\n            currentWidth: 327.0079,\n            currentHeight: 137,\n            h: 141,\n        },\n        JCnC9yAUfQ3IXvnj_THs8: {\n            id: 'JCnC9yAUfQ3IXvnj_THs8',\n            type: 'reference',\n            content: '<p>10.1561/1100000005</p>',\n            links: [\n                'ps9k-tiBPP0cH9ymY4Myy',\n            ],\n            parent: 'wzwAxT0LV6sfNjOgv31fx',\n            children: [],\n            identifier: '10.1561/1100000005',\n            literature: null,\n            x: 331,\n            y: 733,\n            w: 327.0079,\n            currentX: 331,\n            currentY: 733,\n            currentWidth: 327.0079,\n            currentHeight: 48,\n            referenceType: 'doi',\n            title: 'Human-Robot Interaction: A Survey',\n            author: [\n                {\n                    given: 'Michael A.',\n                    family: 'Goodrich',\n                    sequence: 'first',\n                    affiliation: [],\n                },\n                {\n                    given: 'Alan C.',\n                    family: 'Schultz',\n                    sequence: 'first',\n                    affiliation: [],\n                },\n            ],\n            record: {\n                indexed: {\n                    'date-parts': [\n                        [\n                            2022,\n                            8,\n                            5,\n                        ],\n                    ],\n                    'date-time': '2022-08-05T22:49:48Z',\n                    timestamp: 1659739788859,\n                },\n                'reference-count': 0,\n                publisher: 'Now Publishers',\n                issue: '3',\n                'content-domain': {\n                    domain: [],\n                    'crossmark-restriction': false,\n                },\n                'published-print': {\n                    'date-parts': [\n                        [\n                            2007,\n                        ],\n                    ],\n                },\n                DOI: '10.1561/1100000005',\n                type: 'article-journal',\n                created: {\n                    'date-parts': [\n                        [\n                            2008,\n                            2,\n                            5,\n                        ],\n                    ],\n                    'date-time': '2008-02-05T19:23:58Z',\n                    timestamp: 1202239438000,\n                },\n                page: '203-275',\n                source: 'Crossref',\n                'is-referenced-by-count': 880,\n                title: 'Human-Robot Interaction: A Survey',\n                prefix: '10.1561',\n                volume: '1',\n                author: [\n                    {\n                        given: 'Michael A.',\n                        family: 'Goodrich',\n                        sequence: 'first',\n                        affiliation: [],\n                    },\n                    {\n                        given: 'Alan C.',\n                        family: 'Schultz',\n                        sequence: 'first',\n                        affiliation: [],\n                    },\n                ],\n                member: '432',\n                'container-title': 'Foundations and Trends in Human-Computer Interaction',\n                'original-title': [],\n                language: 'en',\n                deposited: {\n                    'date-parts': [\n                        [\n                            2020,\n                            2,\n                            27,\n                        ],\n                    ],\n                    'date-time': '2020-02-27T13:58:46Z',\n                    timestamp: 1582811926000,\n                },\n                score: 1,\n                resource: {\n                    primary: {\n                        URL: 'http://www.nowpublishers.com/article/Details/HCI-005',\n                    },\n                },\n                subtitle: [],\n                'short-title': [],\n                issued: {\n                    'date-parts': [\n                        [\n                            2007,\n                        ],\n                    ],\n                },\n                'references-count': 0,\n                'journal-issue': {\n                    issue: '3',\n                    'published-online': {\n                        'date-parts': [\n                            [\n                                2007,\n                            ],\n                        ],\n                    },\n                    'published-print': {\n                        'date-parts': [\n                            [\n                                2007,\n                            ],\n                        ],\n                    },\n                },\n                URL: 'http://dx.doi.org/10.1561/1100000005',\n                relation: {},\n                ISSN: [\n                    '1551-3955',\n                    '1551-3963',\n                ],\n                subject: [\n                    'Computer Science Applications',\n                    'Human-Computer Interaction',\n                ],\n                'container-title-short': 'FNT in Human-Computer Interaction',\n                published: {\n                    'date-parts': [\n                        [\n                            2007,\n                        ],\n                    ],\n                },\n                id: 'temp_id_8637346830865666',\n            },\n        },\n        agP9N5iMMR8mJF1s5Wthr: {\n            id: 'agP9N5iMMR8mJF1s5Wthr',\n            type: 'note',\n            content: '<p>Try double-clicking me as well ;)</p>',\n            links: [\n                'ps9k-tiBPP0cH9ymY4Myy',\n            ],\n            parent: null,\n            children: [],\n            identifier: null,\n            literature: null,\n            x: 543,\n            y: 826,\n            w: 200,\n            currentX: 543,\n            currentY: 826,\n            currentWidth: 200,\n            currentHeight: 20,\n        },\n        jPkhyrgf3HOvPALhbfWYj: {\n            id: 'jPkhyrgf3HOvPALhbfWYj',\n            type: 'note',\n            content: \"<h2>Intrigue uses offline-first distributed collaborative editing.</h2><p></p><p>What does it mean? Let's break it down.</p>\",\n            links: [\n                'bPRss4q2Tvzn_ea1TY4Wr',\n            ],\n            parent: null,\n            children: [\n                'n7FUs3oUm4M1FZC-uHzsy',\n            ],\n            identifier: null,\n            literature: null,\n            x: 1158,\n            y: 222,\n            w: 366.0079,\n            currentX: 1158,\n            currentY: 222,\n            currentWidth: 366.0079,\n            currentHeight: 75,\n            h: 79,\n        },\n        'rxyYL1-vZysaZgRMzDXNU': {\n            id: 'rxyYL1-vZysaZgRMzDXNU',\n            type: 'note',\n            content: '<h2> See the button on the top-right corner?</h2><p></p><p>You can click it to get a web link, which you can share with others to collaborate.</p>',\n            links: [\n                'jNo6CHcnaxjK7Bk4e-bAc',\n                'bPRss4q2Tvzn_ea1TY4Wr',\n            ],\n            parent: null,\n            children: [],\n            identifier: null,\n            literature: null,\n            x: 1158,\n            y: 101,\n            w: 366.0079,\n            currentX: 1158,\n            currentY: 101,\n            currentWidth: 366.0079,\n            currentHeight: 68,\n            h: 72,\n        },\n        'n7FUs3oUm4M1FZC-uHzsy': {\n            id: 'n7FUs3oUm4M1FZC-uHzsy',\n            type: 'note',\n            content: '<p><strong>Collaborative editing: </strong>You can edit this document together with other people over the internet.</p>',\n            links: [],\n            parent: 'jPkhyrgf3HOvPALhbfWYj',\n            children: [\n                '3nj7Xpr-AdGt3rKLomiK5',\n            ],\n            identifier: null,\n            literature: null,\n            x: 1158,\n            y: 302,\n            w: 366.0079,\n            currentX: 1158,\n            currentY: 302,\n            currentWidth: 366.0079,\n            currentHeight: 34,\n        },\n        '3nj7Xpr-AdGt3rKLomiK5': {\n            id: '3nj7Xpr-AdGt3rKLomiK5',\n            type: 'note',\n            content: \"<p><strong>Distributed:</strong> There's no central server that stores your data. Each collaborator holds their own copy, and they directly communicate with each other to keep in sync.</p>\",\n            links: [\n                'CsKDxvFhIxKDk_m6Bj8Dh',\n                'NBLwCo0fXhOXI6DGjqtWU',\n            ],\n            parent: 'n7FUs3oUm4M1FZC-uHzsy',\n            children: [\n                'EIB7xARz2ceZcpBkE940d',\n            ],\n            identifier: null,\n            literature: null,\n            x: 1158,\n            y: 341,\n            w: 366.0079,\n            currentX: 1158,\n            currentY: 341,\n            currentWidth: 366.0079,\n            currentHeight: 48,\n        },\n        EIB7xARz2ceZcpBkE940d: {\n            id: 'EIB7xARz2ceZcpBkE940d',\n            type: 'note',\n            content: \"<p><strong>Offline-first:</strong> Because each person has their own copy, you don't need to be online to edit this file. The updates you made will be sent to your collaborators the next time you are all online.</p>\",\n            links: [\n                'DTZkgJWGKYriyalyLJfZx',\n            ],\n            parent: '3nj7Xpr-AdGt3rKLomiK5',\n            children: [],\n            identifier: null,\n            literature: null,\n            x: 1158,\n            y: 394,\n            w: 366.0079,\n            currentX: 1158,\n            currentY: 394,\n            currentWidth: 366.0079,\n            currentHeight: 48,\n        },\n        anvYLObXrGTWIk8T3R2rq: {\n            id: 'anvYLObXrGTWIk8T3R2rq',\n            type: 'note',\n            content: '<h3>Intrigue uses SyncedStore and Yjs to keep you in sync.</h3><p></p><p>Under the hood, they use algorithms called CRDTs to ensure that all edits are merged correctly, even if made offline.</p>',\n            links: [\n                'CsKDxvFhIxKDk_m6Bj8Dh',\n                'DTZkgJWGKYriyalyLJfZx',\n            ],\n            parent: null,\n            children: [\n                '8gRuWiQvD7HjW1v8PirRZ',\n            ],\n            identifier: null,\n            literature: null,\n            x: 921,\n            y: 546,\n            w: 383.00790000000006,\n            currentX: 921,\n            currentY: 546,\n            currentWidth: 383.00790000000006,\n            currentHeight: 64,\n            h: 68,\n        },\n        '8gRuWiQvD7HjW1v8PirRZ': {\n            id: '8gRuWiQvD7HjW1v8PirRZ',\n            type: 'reference',\n            content: '<p><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://yjs.dev\">https://yjs.dev</a></p>',\n            links: [],\n            parent: 'anvYLObXrGTWIk8T3R2rq',\n            children: [\n                'eGL9rPJ6hhTOecmHN1IPE',\n            ],\n            identifier: 'https://yjs.dev/',\n            literature: null,\n            x: 921,\n            y: 615,\n            w: 383.00790000000006,\n            currentX: 921,\n            currentY: 615,\n            currentWidth: 383.00790000000006,\n            currentHeight: 48,\n            referenceType: 'url',\n            title: 'Yjs Shared Editing',\n            author: [\n                {\n                    family: 'Web link',\n                },\n            ],\n            record: {\n                title: 'Yjs Shared Editing',\n                author: [\n                    {\n                        family: 'Web link',\n                    },\n                ],\n                identifier: 'https://yjs.dev/',\n            },\n        },\n        eGL9rPJ6hhTOecmHN1IPE: {\n            id: 'eGL9rPJ6hhTOecmHN1IPE',\n            type: 'reference',\n            content: '<p><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://github.com/yousefed/SyncedStore\">https://github.com/yousefed/SyncedStore</a></p>',\n            links: [],\n            parent: '8gRuWiQvD7HjW1v8PirRZ',\n            children: [\n                'cjmp78kq4aeWsiDHNm3be',\n            ],\n            identifier: 'https://github.com/yousefed/SyncedStore',\n            literature: null,\n            x: 921,\n            y: 668,\n            w: 383.00790000000006,\n            currentX: 921,\n            currentY: 668,\n            currentWidth: 383.00790000000006,\n            currentHeight: 75,\n            referenceType: 'url',\n            title: 'GitHub - YousefED/SyncedStore: SyncedStore CRDT is an easy-to-use library for building live, collaborative applications that sync automatically.',\n            author: [\n                {\n                    family: 'Web link',\n                },\n            ],\n            record: {\n                title: 'GitHub - YousefED/SyncedStore: SyncedStore CRDT is an easy-to-use library for building live, collaborative applications that sync automatically.',\n                author: [\n                    {\n                        family: 'Web link',\n                    },\n                ],\n                identifier: 'https://github.com/yousefed/SyncedStore',\n            },\n        },\n        cjmp78kq4aeWsiDHNm3be: {\n            id: 'cjmp78kq4aeWsiDHNm3be',\n            type: 'reference',\n            content: '<p><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://crdt.tech\">https://crdt.tech</a></p>',\n            links: [],\n            parent: 'eGL9rPJ6hhTOecmHN1IPE',\n            children: [\n                '0gI1kCXM_izYBG9FjX-7T',\n            ],\n            identifier: 'https://crdt.tech/',\n            literature: null,\n            x: 921,\n            y: 748,\n            w: 383.00790000000006,\n            currentX: 921,\n            currentY: 748,\n            currentWidth: 383.00790000000006,\n            currentHeight: 48,\n            referenceType: 'url',\n            title: 'About CRDTs  Conflict-free Replicated Data Types',\n            author: [\n                {\n                    family: 'Web link',\n                },\n            ],\n            record: {\n                title: 'About CRDTs  Conflict-free Replicated Data Types',\n                author: [\n                    {\n                        family: 'Web link',\n                    },\n                ],\n                identifier: 'https://crdt.tech/',\n            },\n        },\n        '0gI1kCXM_izYBG9FjX-7T': {\n            id: '0gI1kCXM_izYBG9FjX-7T',\n            type: 'reference',\n            content: '<p><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://www.inkandswitch.com/local-first/\">https://www.inkandswitch.com/local-first/</a></p>',\n            links: [],\n            parent: 'cjmp78kq4aeWsiDHNm3be',\n            children: [],\n            identifier: 'https://www.inkandswitch.com/local-first/',\n            literature: null,\n            x: 921,\n            y: 801,\n            w: 383.00790000000006,\n            currentX: 921,\n            currentY: 801,\n            currentWidth: 383.00790000000006,\n            currentHeight: 48,\n            referenceType: 'url',\n            title: 'Local-first software: You own your data, in spite of the cloud',\n            author: [\n                {\n                    family: 'Web link',\n                },\n            ],\n            record: {\n                title: 'Local-first software: You own your data, in spite of the cloud',\n                author: [\n                    {\n                        family: 'Web link',\n                    },\n                ],\n                identifier: 'https://www.inkandswitch.com/local-first/',\n            },\n        },\n        KsZsnbXyRuVqf3FKtK0BA: {\n            id: 'KsZsnbXyRuVqf3FKtK0BA',\n            type: 'note',\n            content: '<p>This does mean that <strong>someone has to have the file open</strong> when a new person logs on, in order for the new person to get the file content.</p>',\n            links: [\n                'NBLwCo0fXhOXI6DGjqtWU',\n            ],\n            parent: null,\n            children: [],\n            identifier: null,\n            literature: null,\n            x: 794,\n            y: 419,\n            w: 208.0079,\n            currentX: 794,\n            currentY: 419,\n            currentWidth: 208.0079,\n            currentHeight: 62,\n            h: 66,\n        },\n        '7OSkqze_9QwSvHGy_F85x': {\n            id: '7OSkqze_9QwSvHGy_F85x',\n            type: 'note',\n            content: '<p>Snap me to the note above!</p>',\n            links: [],\n            parent: null,\n            children: [],\n            identifier: null,\n            literature: null,\n            x: 287,\n            y: 308,\n            w: 200,\n            currentX: 287,\n            currentY: 308,\n            currentWidth: 200,\n            currentHeight: 20,\n        },\n    },\n    fragment: '',\n};\n\nexport default tutorialData;\n","<template>\n    <div class=\"titlebar-container\">\n        <a-row v-if=\"electron\" class=\"window noselect\" justify=\"center\" align=\"center\">\n            <a-col :span=\"8\">\n                <a-button-group style=\"margin-left: 5rem;\">\n                    <a-button type=\"text\" size=\"mini\"\n                        :disabled=\"!document.canUndo()\"\n                        @click=\"document.undo()\"\n                    >\n                        <template #icon><icon-undo /></template>\n                    </a-button>\n\n                    <a-button type=\"text\" size=\"mini\"\n                        :disabled=\"!document.canRedo()\"\n                        @click=\"document.redo()\"\n                    >\n                        <template #icon><icon-redo /></template>\n                    </a-button>\n                </a-button-group>\n            </a-col>\n            <a-col :span=\"8\" align=\"center\">\n                <b>{{fileName}}</b>\n            </a-col>\n            <a-col :span=\"8\" align=\"right\" style=\"padding-right: 0.5rem\">\n                <CopyButton size=\"mini\" :text=\"shareLink\">Share</CopyButton>\n            </a-col>\n        </a-row>\n\n        <a-row v-else class=\"browser noselect\" justify=\"center\" align=\"center\">\n            <a-col :span=\"8\">\n                <a-button-group style=\"margin-left: 1rem;\">\n                    <a-button type=\"text\" size=\"small\"\n                        :disabled=\"!document.canUndo()\"\n                        @click=\"document.undo()\"\n                    >\n                        <template #icon><icon-undo /></template>\n                    </a-button>\n\n                    <a-button type=\"text\" size=\"small\"\n                        :disabled=\"!document.canRedo()\"\n                        @click=\"document.redo()\"\n                    >\n                        <template #icon><icon-redo /></template>\n                    </a-button>\n                </a-button-group>\n            </a-col>\n            <a-col :span=\"8\" align=\"center\">\n                To save this document, bookmark this page or copy the share link \n            </a-col>\n            <a-col :span=\"8\" align=\"right\" style=\"padding-right: 0.5rem\">\n                <CopyButton size=\"small\" :text=\"shareLink\">Share</CopyButton>\n            </a-col>\n        </a-row>\n    </div>\n</template>\n\n<script>\nimport isElectron from 'is-electron';\nimport CopyButton from './CopyButton.vue';\n\nexport default {\n    name: 'TitleBar',\n    inject: ['store', 'document', 'selection', 'filePath'],\n\n    components: {\n        CopyButton,\n    },\n\n    data() {\n        return {\n            electron: isElectron(),\n            newFile: false,\n        };\n    },\n\n    mounted() {\n        const queryString = window.location.search;\n        const urlParams = new URLSearchParams(queryString);\n        this.newFile = !urlParams.get('document');\n\n        this.document.on('synced', () => {\n            if (this.newFile) {\n                const url = new URL(window.location.href);\n                url.searchParams.set('document', this.store.value.metadata.id);\n                window.history.replaceState(null, null, url);\n            }\n        });\n    },\n\n    computed: {\n        fileName() {\n            // eslint-disable-next-line global-require\n            const { basename } = require('path');\n            return this.filePath.value ? basename(this.filePath.value) : 'Untitled';\n        },\n\n        shareLink() {\n            return `https://intrigue-app.github.io/?document=${this.store.value.metadata.id}`;\n        },\n    },\n};\n</script>\n\n<style scoped>\n.window {\n    position: fixed;\n    width: 100%;\n    height: 2rem;\n    -webkit-app-region: drag;\n    z-index: 10000;\n    background: linear-gradient(var(--background) 10%, transparent 100%)\n}\n\n.browser {\n    position: fixed;\n    width: 100%;\n    height: 2rem;\n    z-index: 10000;\n}\n</style>\n","<template>\n    <a-button\n        :type=\"type\"\n        :shape=\"shape\"\n        :size=\"size\"\n        :status=\"status\"\n        :disabled=\"copied\"\n        @click=\"copy\"\n    >\n        <slot v-if=\"!copied\"/>\n        <span v-else>Copied!</span>\n    </a-button>\n</template>\n\n<script>\nimport ultralightCopy from 'copy-to-clipboard-ultralight';\n\nexport default {\n    name: 'CopyButton',\n    props: {\n        size: String,\n        shape: String,\n        type: String,\n        status: String,\n        text: String,\n    },\n\n    data() {\n        return {\n            copied: false,\n            timer: null,\n        };\n    },\n\n    methods: {\n        copy() {\n            if (ultralightCopy(this.text)) {\n                this.copied = true;\n                if (this.timer) clearTimeout(this.timer);\n                this.timer = setTimeout(() => {\n                    this.copied = false;\n                }, 1000);\n            } else {\n                this.$message.error('Error copying to clipboard!');\n            }\n        },\n    },\n};\n</script>\n","import { render } from \"./CopyButton.vue?vue&type=template&id=11d5bf2b\"\nimport script from \"./CopyButton.vue?vue&type=script&lang=js\"\nexport * from \"./CopyButton.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./TitleBar.vue?vue&type=template&id=4f42f7a4&scoped=true\"\nimport script from \"./TitleBar.vue?vue&type=script&lang=js\"\nexport * from \"./TitleBar.vue?vue&type=script&lang=js\"\n\nimport \"./TitleBar.vue?vue&type=style&index=0&id=4f42f7a4&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4f42f7a4\"]])\n\nexport default __exports__","<template>\n    <div style=\"width: 100%; height: 100%;\">\n        <vue-infinite-viewer\n            class=\"canvas\"\n            ref=\"canvas\"\n            :style=\"{\n                'background-position': `${-x * zoom}px ${-y * zoom}px`,\n                'background-size': `${13 * zoom}px ${13 * zoom}px`,\n                '--resize-handle-height': `${activeNodeHeight}px`,\n            }\"\n            :maxPinchWheel=\"10\"\n            @scroll=\"panCanvas\"\n            @pinch=\"zoomCanvas\"\n            @dblclick=\"newNode\"\n        >\n            <div class=\"viewport\">\n                <IntrigueLink\n                    v-for=\"link in store.value.links\"\n                    :key=\"link.id\"\n                    :ref=\"link.id\"\n                    :source=\"link.source\"\n                    :target=\"link.target\"\n                />\n\n                <IntrigueLink\n                    v-if=\"linking.value\"\n                    :source=\"linking.value\"\n                    target=\"pointer-location\"\n                />\n\n                <IntrigueNode\n                    v-for=\"node in store.value.nodes\"\n                    :key=\"node.id\"\n                    :ref=\"node.id\"\n                    :node=\"node\"\n                    :selected=\"selection.some((t) => t.id === node.id)\"\n                    @click=\"tryLinking(node.id)\"\n                    @dblclick.stop=\"doubleClickNode(node)\"\n                    @update-dimensions=\"$refs.moveable.updateRect\"\n                />\n\n                <div v-for=\"user in document.users\" :key=\"user.id\">\n                    <Cursor\n                        v-if=\"document.localUser.id !== user.id\"\n                        :id=\"user.id\"\n                        :name=\"user.name\"\n                        :x=\"user.cursorX\"\n                        :y=\"user.cursorY\"\n                    />\n                </div>\n\n                <Moveable\n                    ref=\"moveable\"\n                    className=\"moveable\"\n                    :target=\"selection\"\n                    :draggable=\"true\"\n                    :resizable=\"shouldResize\"\n                    :renderDirections=\"['e']\"\n                    @clickGroup=\"cancelSelectionWhenClickEmpty\"\n                    @drag=\"dragNodes\"\n                    @dragGroup=\"dragNodes\"\n                    @dragEnd=\"commitNodePositions\"\n                    @dragGroupEnd=\"commitNodePositions\"\n                    @resize=\"resizeNode\"\n                    @resizeEnd=\"commitNodeSize\"\n                />\n            </div>\n        </vue-infinite-viewer>\n        <VueSelecto\n            ref=\"selecto\"\n            dragContainer=\".canvas\"\n            :selectableTargets=\"['.node.selectable']\"\n            :selectByClick=\"true\"\n            :selectFromInside=\"false\"\n            :toggleContinueSelect=\"['shift']\"\n            :keyContainer=\"window\"\n            :hitRate=\"0\"\n            :ratio=\"0\"\n            @dragStart=\"preventSelectionWhenDragging\"\n            @select=\"selectNode\"\n            @selectEnd=\"commitSelections\"\n        />\n        <svg class=\"links\" id=\"links\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n        />\n    </div>\n</template>\n\n<script>\nimport { defineComponent, computed } from 'vue';\n\nimport { VueInfiniteViewer } from 'vue3-infinite-viewer';\nimport Moveable from 'vue3-moveable';\nimport { VueSelecto } from 'vue3-selecto';\n\nimport { nanoid } from 'nanoid';\n\nimport { NodeTypes } from '@/store';\nimport Keyboard from '@/keyboard';\n\nimport IntrigueNode from '@/components/canvas/Node.vue';\nimport IntrigueLink from '@/components/canvas/Link.vue';\nimport Cursor from '@/components/canvas/Cursor.vue';\n\nexport default defineComponent({\n    name: 'IntrigueCanvas',\n    inject: ['document', 'store', 'state', 'send', 'editing', 'dragging', 'dropping', 'detaching', 'linking'],\n    components: {\n        VueInfiniteViewer,\n        Moveable,\n        VueSelecto,\n        IntrigueNode,\n        IntrigueLink,\n        Cursor,\n    },\n\n    provide() {\n        return {\n            x: computed(() => this.x),\n            y: computed(() => this.y),\n            zoom: computed(() => this.zoom),\n        };\n    },\n\n    data() {\n        return {\n            x: 0,\n            y: 0,\n            zoom: 1,\n            selection: [],\n            keyboard: new Keyboard(),\n        };\n    },\n\n    methods: {\n        // Data editing methods\n\n        newNode(event) {\n            const mapped = this.mapMousePosition(event.clientX, event.clientY);\n            const nodeId = nanoid();\n            this.document.commit('createNode', {\n                id: nodeId,\n                type: NodeTypes.Note,\n                content: '',\n                x: mapped.x - 14,\n                y: mapped.y - 10,\n                w: 200,\n                h: 15,\n            });\n            this.send({\n                type: 'create node',\n                node: nodeId,\n            });\n            // if (Object.keys(this.store.value.nodes).length === 2) {\n            //     const [source, target] = Object.keys(this.store.value.nodes);\n            //     this.document.commit('createLink', { source, target });\n            //     // arrowLine(`[id=\"${nodeIds[0]}\"]`, `[id=\"${nodeIds[1]}\"]`);\n            // }\n        },\n\n        doubleClickNode(node) {\n            this.send({\n                type: 'dblclick node',\n                node: node.id,\n            });\n            // console.log(this.state.value, this.editing.value);\n        },\n\n        deleteNodes(event) {\n            if (this.editing.value) return;\n            const selectedIds = this.selection.map((el) => el.id);\n            console.log(`[Canvas][deleteNodes] ${selectedIds}`);\n            this.selection = [];\n            this.send('delete node');\n            this.document.commit('deleteNodes', selectedIds);\n            // console.log(selectedIds);\n            event.preventDefault();\n        },\n\n        undo(event) {\n            if (this.editing.value === null) {\n                this.document.undo();\n                event.preventDefault();\n            }\n        },\n\n        redo(event) {\n            if (this.editing.value === null) {\n                this.document.redo();\n                event.preventDefault();\n            }\n        },\n\n        // Node wrangling methods (dragging, resizing, selecting, etc)\n        panCanvas(event) {\n            this.x = event.scrollLeft;\n            this.y = event.scrollTop;\n            this.document.updateAwareness('x', this.x);\n            this.document.updateAwareness('y', this.y);\n        },\n\n        zoomCanvas(event) {\n            this.zoom = event.zoom;\n            this.$refs.canvas.setZoom(event.zoom);\n        },\n\n        cancelSelectionWhenClickEmpty(e) {\n            this.$refs.selecto.clickTarget(e.inputEvent, e.inputTarget);\n        },\n\n        sendDragStartMessage(event) {\n            if (!event.events && event.target) {\n                this.send({\n                    type: 'start dragging',\n                    node: event.target.id,\n                });\n            } else if (event.targets) {\n                event.target.classList.add('clickthrough');\n                // console.log(event.target);\n                event.targets.some((target) => {\n                    const rect = target.getBoundingClientRect();\n                    if (\n                        rect.left <= event.clientX\n                        && rect.right >= event.clientX\n                        && rect.top <= event.clientY\n                        && rect.bottom >= event.clientY\n                    ) {\n                        this.send({\n                            type: 'start dragging',\n                            node: target.id,\n                        });\n                        return false;\n                    }\n                    return true;\n                });\n            }\n        },\n\n        dragNodes(event) {\n            this.sendDragStartMessage(event);\n\n            let events;\n            if (!event.events && event.target) {\n                // Dragging only one node\n                events = [event];\n            } else if (event.events) {\n                // Dragging multiple nodes\n                events = event.events;\n            }\n\n            // See if any nodes in the current selection will be detached from parent if moved.\n            const nodes = events.map((e) => this.store.value.nodes[e.target.id]);\n            const nodeIds = events.map((e) => e.target.id);\n            const toDetach = [];\n            nodes.forEach((node) => {\n                if (node.parent && !nodeIds.includes(node.parent)) {\n                    toDetach.push({\n                        source: node.parent,\n                        target: node.id,\n                    });\n                }\n            });\n            if (toDetach.length > 0) {\n                this.send({ type: 'start detaching', detaching: toDetach });\n                const distance = Math.sqrt(\n                    event.dist[0] * event.dist[0] + event.dist[1] * event.dist[1],\n                );\n                // console.log(distance);\n\n                if (distance > 30) {\n                    // Detach these nodes\n                    this.send('detached');\n                    toDetach.forEach((pair) => {\n                        this.document.commit('unsnapNode', pair);\n                    });\n                } else {\n                    return;\n                }\n            }\n\n            // We don't commit here because we don't want to\n            // leave undo history for rapid-firing events.\n            events.forEach((e) => {\n                const node = this.store.value.nodes[e.target.id];\n                if (node.parent) return;\n                if (!this.document.localData.nodes[e.target.id]) {\n                    this.document.localData.nodes[e.target.id] = {};\n                }\n                // eslint-disable-next-line prefer-destructuring\n                this.document.localData.nodes[e.target.id].currentX = e.translate[0];\n                // eslint-disable-next-line prefer-destructuring\n                this.document.localData.nodes[e.target.id].currentY = e.translate[1];\n            });\n        },\n\n        commitNodePositions(event) {\n            // If dropping has value, then handle that first.\n            // Note that in this case, the action to be commited is snapNode,\n            // not updateNodes\n            if (this.dropping.value) {\n                console.log('[Canvas][commitNodePositions] Dropping', this.dragging.value, 'on', this.dropping.value);\n                this.document.commit('snapNode', {\n                    source: this.dropping.value,\n                    target: this.dragging.value,\n                });\n                this.send('stop dragging');\n            }\n\n            // If we're detaching half-way, then don't commit any position update and just return.\n            if (this.detaching.value.length > 0) {\n                console.log('[Canvas][commitNodePositions] Detaching ended halfway.');\n                this.send('stop detaching');\n                return;\n            }\n\n            // If event.lastEvent exists, then it means that the node moved a little.\n            // Basically, not an \"in-place click\".\n            if (event.lastEvent) {\n                if (event.lastEvent.target) {\n                    event.lastEvent.target.classList.remove('clickthrough');\n                }\n                // Only update the parents, and the descendants will follow.\n                const parents = [];\n                this.selection.forEach((e) => {\n                    const node = this.store.value.nodes[e.id];\n                    if (!node.parent) parents.push(e.id);\n                });\n                this.document.commit('updateNodes', {\n                    id: parents,\n                    by: {\n                        x: event.lastEvent.dist[0],\n                        y: event.lastEvent.dist[1],\n                    },\n                });\n            }\n            this.send('stop dragging');\n        },\n\n        preventSelectionWhenDragging(e) {\n            const { target } = e.inputEvent;\n            if (\n                this.$refs.moveable.isMoveableElement(target)\n                || this.selection.some((t) => t === target || t.contains(target))\n                // || target.matches('.moveable-area')\n                // || target.matches('.moveable-control')\n            ) {\n                e.stop();\n            }\n        },\n\n        tryLinking(nodeId) {\n            if (this.linking.value) {\n                if (nodeId !== this.linking.value) {\n                    console.log(`[Canvas][selectNode] Linking ${this.linking.value} to ${nodeId}`);\n\n                    const linkId = this.document.findLinkByNodeIds(\n                        this.linking.value,\n                        nodeId,\n                    );\n                    if (linkId) {\n                        this.document.commit('removeLink', linkId);\n                    } else {\n                        this.document.commit('createLink', {\n                            source: this.linking.value,\n                            target: nodeId,\n                        });\n                    }\n                }\n            }\n        },\n\n        selectNode(e) {\n            if (this.linking.value && e.selected.length > 0) return;\n            this.send({\n                type: 'update selection',\n                selection: e.selected.map((el) => el.id),\n            });\n        },\n\n        commitSelections(e) {\n            if (e.isDragStart) {\n                e.inputEvent.preventDefault();\n                setTimeout(() => {\n                    this.$refs.moveable.dragStart(e.inputEvent);\n                });\n            }\n            this.selection = e.selected;\n            const selectedIds = e.selected.map((el) => el.id);\n            this.document.updateAwareness('selection', selectedIds);\n            this.send({\n                type: 'done selecting',\n                selection: selectedIds,\n            });\n        },\n\n        resizeNode(event) {\n            // We still need to change the width here, otherwise the resizing is very unresponsive.\n            // TODO: See if we can get around this.\n            const { target } = event;\n            target.style.width = `${event.width}px`;\n            this.document.updateNode({\n                id: event.target.id,\n                set: {\n                    currentWidth: event.width,\n                },\n            });\n        },\n\n        commitNodeSize(event) {\n            if (!event.lastEvent) return;\n            this.document.commit('updateNode', {\n                id: event.target.id,\n                set: {\n                    w: event.lastEvent.width,\n                    h: event.target.offsetHeight,\n                },\n            });\n        },\n\n        // Utility functions\n        mapMousePosition(x, y) {\n            const mappedX = x / this.zoom + this.x;\n            const mappedY = y / this.zoom + this.y;\n            return { x: mappedX, y: mappedY };\n        },\n\n        gatherDescendants(root, includeRoot) {\n            const descendants = includeRoot ? new Set([root.id]) : new Set();\n            root.children.forEach((childId) => {\n                const child = this.store.value.nodes[childId];\n                const childDescendants = this.gatherDescendants(child, true);\n                childDescendants.forEach((descendantId) => {\n                    descendants.add(descendantId);\n                });\n            });\n            return [...descendants];\n        },\n\n        // Event handlers\n        updateCursorPosition(event) {\n            const mapped = this.mapMousePosition(event.clientX, event.clientY);\n            this.document.updateAwareness('cursorX', mapped.x);\n            this.document.updateAwareness('cursorY', mapped.y);\n        },\n\n        startPanning(event) {\n            if (!this.editing) {\n                console.log('[Canvas][startPanning] Space pressed.', event);\n                this.send('space pressed');\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        },\n\n        stopPanning(event) {\n            if (!this.editing) {\n                console.log('[Canvas][startPanning] Space released.', event);\n                this.send('space released');\n                event.preventDefault();\n            }\n        },\n    },\n\n    computed: {\n        activeNodeHeight() {\n            if (this.selection.length > 0) {\n                const node = this.store.value.nodes[this.selection[0].id];\n                if (!node) return 0;\n                if (!node.currentHeight) return this.selection[0].clientHeight;\n                if (node.currentHeight <= 20) {\n                    return node.currentHeight - 8;\n                }\n                return node.currentHeight - 12;\n            }\n            return 0;\n        },\n\n        shouldResize() {\n            if (this.selection.length !== 1) return false;\n            if (!this.store.value.nodes[this.selection[0].id]) return false;\n            if (this.store.value.nodes[this.selection[0].id].parent) return false;\n            return true;\n        },\n    },\n\n    mounted() {\n        // Create handler to update cursor position to remote users.\n        // Don't forget to unregister upon leaving this page!\n        window.addEventListener('mousemove', this.updateCursorPosition);\n        // Register keyboard shortcuts. Need to unregister as well.\n        this.keyboard.on('keydown', 'Space', this.startPanning);\n        this.keyboard.on('keyup', 'Space', this.stopPanning);\n        this.keyboard.on('keydown', 'Backspace', this.deleteNodes);\n        this.keyboard.on('keydown', '$mod+Z', this.undo);\n        this.keyboard.on('keydown', '$mod+Shift+Z', this.redo);\n\n        this.document.on('synced', () => {\n            // Clear selections.\n            this.document.updateAwareness('selection', []);\n        });\n    },\n\n    beforeUnmount() {\n        window.removeEventListener('mousemove', this.updateCursorPosition);\n        this.keyboard.removeListeners();\n    },\n});\n</script>\n\n<style>\n.canvas {\n    position: fixed;\n    width: 100vw;\n    height: 100vh;\n    background: transparent;\n    background-image: radial-gradient(var(--color-neutral-3) 10%, transparent 10%);\n    /* background-size: 15px 15px; */\n    /* background-position: center; */\n}\n\nsvg.links {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    pointer-events: none;\n    /* background: red; */\n}\n</style>\n","import { createKeybindingsHandler } from 'tinykeys';\n\nexport default class Keyboard {\n    constructor() {\n        this.handlers = [];\n    }\n\n    on(event, key, handler) {\n        const options = {};\n        options[key] = handler;\n        const keyBindingHandler = createKeybindingsHandler(options);\n        window.addEventListener(event, keyBindingHandler);\n        this.handlers.push({\n            event,\n            handler: keyBindingHandler,\n        });\n    }\n\n    removeListeners() {\n        this.handlers.forEach((handler) => {\n            window.removeEventListener(handler.event, handler.handler);\n        });\n    }\n}\n","<template>\n    <div\n        class=\"node\"\n        ref=\"node\"\n        :id=\"node.id\"\n        :class=\"{\n            selected: selection.value.includes(node.id),\n            dropping: dropping.value === node.id,\n            noselect: editing.value !== node.id,\n            clickthrough: dragging.value && selection.value.includes(node.id),\n            selectable: !selectedByRemoteUsers,\n            'remote-selected': selectedByRemoteUsers,\n            'snap-top': !node.parent && node.children.length > 0,\n            'snap-middle': node.parent && node.children.length > 0,\n            'snap-bottom': node.parent && node.children.length === 0,\n            reference: isReference,\n        }\"\n        :style=\"styles\"\n        :color=\"isReference ? 'primary' : 'white'\"\n        :gradient=\"isReference\"\n        @mouseenter=\"onMouseEnter\"\n        @focusin=\"onMouseEnter\"\n        @mouseleave=\"onMouseLeave\"\n        @focusout=\"onMouseLeave\"\n    >\n        <note\n            v-if=\"isNote\"\n            :id=\"node.id\"\n            :content=\"node.content\"\n            :editing=\"editing.value === node.id\"\n            @change=\"parseNoteContent\"\n        />\n\n        <reference\n            v-if=\"isReference\"\n            :id=\"node.id\"\n            :type=\"node.referenceType\"\n            :identifier=\"node.identifier\"\n            :title=\"node.title\"\n            :author=\"node.author\"\n        />\n\n        <button class=\"link-button\" v-if=\"showLinkButton\"\n            @mousedown.stop\n            @mouseup.stop\n            @dblclick.stop\n            @click.stop=\"onLinkButtonClick\"\n        >\n            <icon-link/>\n        </button>\n    </div>\n</template>\n\n<script>\nimport { defineComponent } from 'vue';\nimport { NodeTypes } from '@/store';\n\nimport Note from '@/components/canvas/node/Note.vue';\nimport Reference from '@/components/canvas/node/Reference.vue';\n\nimport { extractIdentifier, fetchLiteratureInfo } from '@/literature';\n\nexport default defineComponent({\n    name: 'IntrigueNode',\n    inject: ['document', 'store', 'state', 'send', 'editing', 'dragging', 'dropping', 'selection'],\n    components: {\n        Note,\n        Reference,\n    },\n    props: {\n        node: {\n            type: Object,\n            required: true,\n        },\n        selected: {\n            type: Boolean,\n            default: false,\n        },\n    },\n\n    data() {\n        if (!this.document.localData.nodes[this.node.id]) {\n            this.document.localData.nodes[this.node.id] = {\n                currentX: this.node.x,\n                currentY: this.node.y,\n                currentWidth: this.node.w,\n                currentHeight: this.node.h,\n            };\n        }\n        return {\n            x: this.node.x,\n            y: this.node.y,\n            w: this.node.w,\n            h: this.node.h,\n            localData: this.document.localData.nodes[this.node.id],\n            parent: null,\n            parentLocalData: null,\n            commitTimer: null,\n            // content: this.node.content,\n        };\n    },\n\n    methods: {\n        onMouseEnter() {\n            this.send({\n                type: 'drop enter',\n                node: this.node.id,\n            });\n        },\n\n        onMouseLeave() {\n            this.send({\n                type: 'drop leave',\n                node: this.node.id,\n            });\n        },\n\n        onLinkButtonClick() {\n            this.send('start linking', { node: this.node.id });\n        },\n\n        observeParent() {\n            this.parentLocalData = this.document.localData.nodes[this.parent.id];\n            this.parentWatchers = [\n                this.$watch('parentLocalData.currentX', this.updateDimensionsFromParent),\n                this.$watch('parentLocalData.currentY', this.updateDimensionsFromParent),\n                this.$watch('parentLocalData.currentWidth', this.updateDimensionsFromParent),\n                this.$watch('parentLocalData.currentHeight', this.updateDimensionsFromParent),\n            ];\n        },\n\n        updateDimensions() {\n            if (!this.$refs.node) return;\n            this.localData.currentHeight = this.$refs.node.clientHeight;\n            this.$emit('update-dimensions');\n        },\n\n        updateDimensionsFromParent() {\n            this.localData.currentX = this.parentLocalData.currentX;\n            this.localData.currentY = this.parentLocalData.currentY\n                + this.parentLocalData.currentHeight + 5;\n            this.localData.currentWidth = this.parentLocalData.currentWidth;\n            this.localData.currentHeight = this.$refs.node.clientHeight;\n\n            if (this.commitTimer) {\n                clearTimeout(this.commitTimer);\n            }\n            this.commitTimer = setTimeout(this.commitUpdatedDimensions, 300);\n        },\n\n        commitUpdatedDimensions() {\n            this.document.updateNode({\n                id: this.node.id,\n                set: {\n                    x: this.localData.currentX,\n                    y: this.localData.currentY,\n                },\n            });\n        },\n\n        parseNoteContent(content) {\n            const identifier = extractIdentifier(content);\n            if (identifier) {\n                console.log(`[Node][parseNoteContent@extractIdentifier] ${JSON.stringify(identifier)}`);\n                this.document.commit('updateNode', {\n                    id: this.node.id,\n                    set: {\n                        type: NodeTypes.Reference,\n                        identifier: identifier.identifier,\n                        referenceType: identifier.type,\n                    },\n                });\n\n                if (identifier.type === 'zotero') {\n                    this.document.commit('updateNode', {\n                        id: this.node.id,\n                        set: {\n                            title: identifier.title,\n                            author: identifier.author,\n                            identifier: identifier.identifier,\n                            record: identifier,\n                        },\n                    });\n                } else if (identifier.type === 'zotero-link') {\n                    this.document.commit('updateNode', {\n                        id: this.node.id,\n                        set: {\n                            title: undefined,\n                            author: undefined,\n                            identifier: identifier.identifier,\n                            record: identifier,\n                        },\n                    });\n                } else {\n                    fetchLiteratureInfo(identifier.type, identifier.identifier).then((info) => {\n                        console.log(`[Node][parseNoteContent@fetchLiteratureInfo] ${info}`);\n                        this.document.commit('updateNode', {\n                            id: this.node.id,\n                            set: {\n                                title: info.title,\n                                author: info.author,\n                                identifier: info.identifier\n                                    ? info.identifier : identifier.identifier,\n                                record: info,\n                            },\n                        });\n                    });\n                }\n            }\n        },\n    },\n\n    mounted() {\n        // console.log('Mounted', this.node.id);\n        this.observer = new ResizeObserver(this.updateDimensions);\n        this.observer.observe(this.$refs.node);\n\n        this.localData.currentX = this.node.x;\n        this.localData.currentY = this.node.y;\n        this.localData.currentHeight = this.node.h ? this.node.h : this.$refs.node.clientHeight;\n\n        if (this.node.parent) {\n            this.parent = this.store.value.nodes[this.node.parent];\n            this.observeParent();\n            this.updateDimensionsFromParent();\n        }\n    },\n\n    breforeUnmount() {\n        console.log('[Node][breforeUnmount] Unmounting', this.node.id);\n        this.observer.disconnect();\n        this.parentWatchers.forEach((removeParentWatcher) => removeParentWatcher());\n    },\n\n    deactivated() {\n        console.log('[Node][deactivated] Deactivated', this.node.id);\n        this.observer.disconnect();\n        this.parentWatchers.forEach((removeParentWatcher) => removeParentWatcher());\n    },\n\n    computed: {\n        styles() {\n            return {\n                width: `${this.w}px`,\n                transform: `translate(${this.x}px, ${this.y}px)`,\n                '--bg-color': 'rgb(250, 248, 229)',\n                '--border-color': 'rgb(233, 183, 109)',\n            };\n        },\n\n        selectedByRemoteUsers() {\n            // console.log(this.document.users);\n            let selected = false;\n            Object.entries(this.document.users).some(([userId, userData]) => {\n                if (userId === this.document.userId) return false;\n                if (userData.selection.includes(this.node.id)) {\n                    selected = true;\n                    return true;\n                }\n                return false;\n            });\n            return selected;\n        },\n\n        isNote() {\n            return this.node.type === NodeTypes.Note;\n        },\n\n        isReference() {\n            return this.node.type === NodeTypes.Reference;\n        },\n\n        showLinkButton() {\n            if (this.selection.value.length !== 1) return false;\n            if (!this.selection.value.includes(this.node.id)) return false;\n            return true;\n        },\n    },\n\n    watch: {\n        // eslint-disable-next-line func-names\n        'localData.currentX': function () {\n            this.x = this.localData.currentX;\n        },\n        // eslint-disable-next-line func-names\n        'localData.currentY': function () {\n            this.y = this.localData.currentY;\n        },\n        // eslint-disable-next-line func-names\n        'localData.currentWidth': function () {\n            this.w = this.localData.currentWidth;\n        },\n        // eslint-disable-next-line func-names\n        'node.x': function () {\n            this.localData.currentX = this.node.x;\n        },\n        // eslint-disable-next-line func-names\n        'node.y': function () {\n            this.localData.currentY = this.node.y;\n        },\n        // eslint-disable-next-line func-names\n        'node.w': function () {\n            this.localData.currentWidth = this.node.w;\n        },\n        // eslint-disable-next-line func-names\n        'node.parent': function () {\n            if (this.node.parent) {\n                this.parent = this.store.value.nodes[this.node.parent];\n                this.observeParent();\n                this.updateDimensionsFromParent();\n            } else {\n                this.parent = null;\n                this.parentWatchers.forEach((removeParentWatcher) => removeParentWatcher());\n                this.parentWatchers = [];\n                this.parentLocalData = null;\n            }\n        },\n    },\n});\n</script>\n\n<style>\n.node {\n    --node-corner: 0.7rem;\n    position: absolute;\n    top: 0;\n    left: 0;\n\n    font-size: 12px;\n\n    border-radius: var(--node-corner);\n    padding: 0.2rem 0.5rem;\n    margin: -1px;\n    background: rgb(250, 248, 229);\n    border: 1px solid rgb(233, 183, 109);\n\n    word-wrap: break-word;\n    /* background: var(--bg-color); */\n    cursor: text;\n    z-index: 1;\n}\n\n.link-button {\n    position: absolute;\n    /* top: calc(50% - 0.5rem); */\n    top: -0.9rem;\n    left: calc(100% - 0.1rem);\n    padding: 0.1rem;\n    padding-left: 0.2rem;\n    padding-right: 0.2rem;\n    border-radius: var(--node-corner);\n    border: 0px transparent;\n    background: rgb(255, 112, 143);\n    color: white;\n    cursor: pointer;\n    z-index: 100 !important;\n}\n\n.link-button:hover {\n    background: rgb(255, 137, 163);\n}\n\n.link-button:active {\n    background: rgb(255, 112, 143);\n}\n\n.reference {\n    background: rgb(203, 227, 250);\n    border: 1px solid rgb(91, 169, 247);\n}\n\n.selected {\n    margin: -2px;\n    border: 2px solid;\n    border-color: rgb(255, 112, 143) !important;\n}\n\n.snap-top {\n    border-radius: var(--node-corner) var(--node-corner) 0 0;\n}\n\n.snap-middle {\n    border-radius: 0;\n}\n\n.snap-bottom {\n    border-radius: 0 0 var(--node-corner) var(--node-corner);\n}\n\n.noselect {\n    -webkit-touch-callout: none; /* iOS Safari */\n    -webkit-user-select: none; /* Safari */\n    -khtml-user-select: none; /* Konqueror HTML */\n    -moz-user-select: none; /* Old versions of Firefox */\n    -ms-user-select: none; /* Internet Explorer/Edge */\n    user-select: none; /* Non-prefixed version, currently\n                                  supported by Chrome, Edge, Opera and Firefox */\n}\n\n.node.noselect {\n    cursor: pointer;\n}\n\n.content {\n    padding: 0.4rem;\n    padding-right: 1rem;\n}\n\n.dropping {\n    margin: -2px;\n    border-width: 2px;\n    z-index: 0;\n}\n\n.remote-selected {\n    margin: -2px;\n    border: 2px solid;\n    border-color: gray !important;\n    pointer-events: none;\n}\n\n.moveable-line {\n    background: transparent !important;\n}\n\n.moveable-control.moveable-origin {\n    border-color: transparent !important;\n    background: transparent !important;\n}\n\n.moveable-control {\n    width: 3.5px !important;\n    height: var(--resize-handle-height) !important;\n    background: transparent !important;\n    margin-top: calc(var(--resize-handle-height) / -2) !important;\n    margin-left: -9px !important;\n    border-radius: 0px !important;\n    border-left: 1px solid rgba(0, 0, 0, 0.15) !important;\n    border-right: 1px solid rgba(0, 0, 0, 0.15) !important;\n    border-top: 0px solid transparent !important;\n    border-bottom: 0px solid transparent !important;\n}\n\n.clickthrough {\n    pointer-events: none;\n}\n</style>\n","<template>\n    <div class=\"note\" ref=\"note\">\n        <editor-content :editor=\"editor\" />\n    </div>\n</template>\n\n<script>\nimport { defineComponent } from 'vue';\nimport { Editor, EditorContent } from '@tiptap/vue-3';\nimport StarterKit from '@tiptap/starter-kit';\nimport Highlight from '@tiptap/extension-highlight';\nimport Link from '@tiptap/extension-link';\n\nexport default defineComponent({\n    name: 'IntrigueNote',\n    inject: ['document', 'store', 'state', 'send'],\n    components: {\n        EditorContent,\n    },\n    props: {\n        id: String,\n        content: String,\n        editing: Boolean,\n    },\n\n    data() {\n        return {\n            editor: null,\n        };\n    },\n\n    mounted() {\n        this.editor = new Editor({\n            content: this.content,\n            extensions: [\n                StarterKit,\n                Highlight,\n                Link.configure({\n                    protocols: ['zotero'],\n                }),\n            ],\n            autofocus: this.editing,\n            editable: this.editing,\n        });\n\n        this.editor.on('blur', this.onEditorBlur);\n    },\n\n    beforeUnmount() {\n        this.editor.destroy();\n    },\n\n    methods: {\n        onEditorBlur() {\n            this.send('editor blur');\n            if (this.editor.getHTML() === '<p></p>') {\n                this.document.deleteNode(this.id);\n            } else {\n                this.document.commit('updateNode', {\n                    id: this.id,\n                    set: {\n                        content: this.editor.getHTML(),\n                    },\n                });\n                this.$emit('change', this.editor.getText());\n            }\n        },\n    },\n\n    watch: {\n        content() {\n            this.editor.commands.setContent(this.content);\n        },\n\n        editing() {\n            this.editor.setEditable(this.editing);\n            if (this.editing) {\n                console.log(`[Note][watch@editing] Editing: ${this.editing}, ${this.id}`);\n                this.editor.commands.focus('end');\n            } else {\n                this.editor.commands.blur();\n            }\n        },\n    },\n});\n</script>\n\n<style>\n.ProseMirror {\n    outline: none;\n    outline-style: none;\n    box-shadow: none;\n    border-color: transparent;\n}\n\n.ProseMirror * {\n    margin-block-start: 0.2rem;\n    margin-block-end: 0.2rem;\n    margin: 0px;\n}\n\n.ProseMirror h1,\nh2,\nh3 {\n    margin-block-start: 0.5rem;\n    margin: 0px;\n}\n\n.ProseMirror ul {\n    padding-inline-start: 1.2rem;\n}\n\n.ProseMirror p.is-editor-empty:first-child::before {\n    content: attr(data-placeholder);\n    float: left;\n    /* color: #adb5bd; */\n    color: var(--va-gray);\n    pointer-events: none;\n    height: 0;\n}\n</style>\n","import { render } from \"./Note.vue?vue&type=template&id=59589eac\"\nimport script from \"./Note.vue?vue&type=script&lang=js\"\nexport * from \"./Note.vue?vue&type=script&lang=js\"\n\nimport \"./Note.vue?vue&type=style&index=0&id=59589eac&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div class=\"reference-content\" ref=\"reference\" @dblclick.stop.prevent=\"showFullText\">\n        <span class=\"title\"> {{ title ? title : 'Fetching title...' }} </span> <br />\n        <span class=\"authors\">\n            {{ author ? formatAuthors(author) : 'Fetching authors...' }}\n        </span>  <br />\n        <span class=\"identifier\"> {{ identifier ? identifier : '' }} </span>\n    </div>\n</template>\n\n<script>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n    name: 'IntrigueReference',\n    inject: ['document', 'store', 'state', 'send'],\n    components: {},\n    props: {\n        id: String,\n        type: String,\n        title: String,\n        author: String,\n        identifier: String,\n    },\n\n    methods: {\n        formatAuthors(authors) {\n            let authorsString = '';\n            authors.forEach((author, i) => {\n                authorsString += author.family;\n                if (i === authors.length - 2) {\n                    authorsString += authors.length === 2 ? ' and ' : ', and ';\n                } else if (i < authors.length - 2) {\n                    authorsString += ', ';\n                }\n            });\n            return authorsString;\n        },\n\n        showFullText() {\n            if (this.type === 'zotero' || this.type === 'zotero-link') {\n                window.open(this.identifier);\n            } else if (this.type === 'doi') {\n                window.open(`https://sci-hub.se/${this.data.identifier}`);\n            } else if (this.type === 'isbn') {\n                window.open(`http://libgen.rs/search.php?req=${this.data.identifier}`);\n            } else if (this.type === 'url') {\n                window.open(this.identifier);\n            }\n        },\n    },\n});\n</script>\n\n<style scoped>\n.title {\n    font-weight: bold;\n}\n\n.authors {\n    font-weight: normal;\n}\n\n.identifier {\n    font-weight: normal;\n    font-style: italic;\n}\n</style>\n","import { render } from \"./Reference.vue?vue&type=template&id=8d4a73d4&scoped=true\"\nimport script from \"./Reference.vue?vue&type=script&lang=js\"\nexport * from \"./Reference.vue?vue&type=script&lang=js\"\n\nimport \"./Reference.vue?vue&type=style&index=0&id=8d4a73d4&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8d4a73d4\"]])\n\nexport default __exports__","import * as linkify from 'linkifyjs';\n\nimport doi from 'identifiers-doi';\nimport Cite from 'citation-js';\nimport axios from 'axios';\n\nexport function extractIsbn(subject) {\n    // Checks for ISBN-10 or ISBN-13 format\n    // eslint-disable-next-line operator-linebreak\n    const regex =\n        /^(?:ISBN(?:-1[03])?:? )?(?=[0-9X]{10}$|(?=(?:[0-9]+[- ]){3})[- 0-9X]{13}$|97[89][0-9]{10}$|(?=(?:[0-9]+[- ]){4})[- 0-9]{17}$)(?:97[89][- ]?)?[0-9]{1,5}[- ]?[0-9]+[- ]?[0-9]+[- ]?[0-9X]$/;\n\n    if (regex.test(subject)) {\n        // Remove non ISBN digits, then split into an array\n        const chars = subject.replace(/[- ]|^ISBN(?:-1[03])?:?/g, '').split('');\n        // Remove the final ISBN digit from `chars`, and assign it to `last`\n        const last = chars.pop();\n        let sum = 0;\n        let check;\n        let i;\n\n        if (chars.length === 9) {\n            // Compute the ISBN-10 check digit\n            chars.reverse();\n            for (i = 0; i < chars.length; i += 1) {\n                sum += (i + 2) * parseInt(chars[i], 10);\n            }\n            check = 11 - (sum % 11);\n            if (check === 10) {\n                check = 'X';\n            } else if (check === 11) {\n                check = '0';\n            }\n        } else {\n            // Compute the ISBN-13 check digit\n            for (i = 0; i < chars.length; i += 1) {\n                sum += ((i % 2) * 2 + 1) * parseInt(chars[i], 10);\n            }\n            check = 10 - (sum % 10);\n            if (check === 10) {\n                check = '0';\n            }\n        }\n\n        if (check === last) {\n            const final = subject.match(regex)[0];\n            return final;\n        }\n    }\n    return false;\n}\n\nexport function extractIdentifier(content) {\n    // Check ISBN\n    const isbnString = extractIsbn(content);\n    if (isbnString && isbnString === content.trim()) {\n        return {\n            type: 'isbn',\n            identifier: isbnString,\n        };\n    }\n    // Check DOI\n    const doiStrings = doi.extract(content);\n    if (doiStrings.length > 0 && doiStrings[0] === content.trim()) {\n        return {\n            type: 'doi',\n            identifier: doiStrings[0],\n        };\n    }\n\n    // Check Zotero Paste\n    try {\n        const data = JSON.parse(content);\n        if (data.source === 'zotero') {\n            return {\n                type: 'zotero',\n                identifier: data.url,\n                ...data,\n            };\n        }\n    } catch (e) {\n        // Do nothing here.\n    }\n\n    // Check Zotero URL\n    const zotero = linkify.find(content, 'url').filter(\n        (item) => item.value.startsWith('zotero://'),\n    );\n    if (zotero.length === 1 && zotero[0].value === content.trim()) {\n        return {\n            type: 'zotero-link',\n            identifier: zotero[0].href,\n        };\n    }\n\n    // Check URL\n    const urls = linkify.find(content, 'url');\n    if (urls.length === 1 && urls[0].value === content.trim()) {\n        return {\n            type: 'url',\n            identifier: urls[0].href,\n        };\n    }\n    return false;\n}\n\nexport function fetchLiteratureInfo(type, identifier) {\n    console.log(`[Literature][fetchLiteratureInfo] type: ${type}, identifier: ${identifier}`);\n    return new Promise((resolve, reject) => {\n        if (type === 'url') {\n            axios.get(identifier).then((data) => {\n                // console.log(data.request);\n                const matches = data.data.match(/<title>(.*?)<\\/title>/);\n                resolve({\n                    title: matches[1],\n                    author: [{ family: 'Web link' }],\n                    identifier: data.request.responseURL,\n                });\n            }).catch((err) => {\n                reject(err);\n            });\n        } else {\n            // Handles both BibTex and DOIs.\n            // eslint-disable-next-line no-new, new-cap\n            new Cite.async(identifier, (data) => {\n                const info = data.data[0];\n                // eslint-disable-next-line no-underscore-dangle\n                delete info._graph;\n                resolve(\n                    JSON.parse(JSON.stringify(info)),\n                );\n            });\n        }\n    });\n}\n","import { render } from \"./Node.vue?vue&type=template&id=6d1e12dc\"\nimport script from \"./Node.vue?vue&type=script&lang=js\"\nexport * from \"./Node.vue?vue&type=script&lang=js\"\n\nimport \"./Node.vue?vue&type=style&index=0&id=6d1e12dc&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <!-- <teleport to=\"#links\"> -->\n    <svg class=\"link\" xmlns=\"http://www.w3.org/2000/svg\"\n        :width=\"width\" :height=\"height\"\n        :style=\"{left: `${left}px`, top: `${top}px`}\"\n    >\n        <g ref=\"arrow\" style=\"pointer-events: auto\">\n            <path\n                style=\"cursor: pointer\"\n                :d=\"`M ${sx} ${sy}`\n                     + `C ${c1x} ${c1y},`\n                     + `${c2x} ${c2y},`\n                     + `${ex} ${ey}`\"\n                :stroke=\"color\"\n                :stroke-width=\"arrowHeadSize / 3\"\n                fill=\"none\"\n            />\n            <polygon\n                :points=\"`0,${-arrowHeadSize} ${arrowHeadSize * 2},0,\n                          0,${arrowHeadSize}`\"\n                :transform=\"`translate(${ex}, ${ey}) rotate(${ae})`\"\n                :fill=\"color\"\n            />\n        </g>\n    </svg>\n    <!-- </teleport> -->\n</template>\n\n<script>\n// import { nextTick } from 'vue';\nimport { getBoxToBoxArrow } from 'curved-arrows';\n\nexport default {\n    name: 'IntrigueLink',\n    inject: ['document', 'store', 'x', 'y', 'zoom'],\n\n    props: {\n        source: {\n            type: String,\n            required: true,\n        },\n        target: {\n            type: String,\n            required: true,\n        },\n        text: {\n            type: String,\n            default: '',\n        },\n        color: {\n            type: String,\n            default: '#9A9A9B',\n        },\n        arrowHeadSize: {\n            type: Number,\n            default: 4,\n        },\n    },\n\n    data() {\n        const sourceNode = this.document.localData.nodes[this.source];\n        const targetNode = this.document.localData.nodes[this.target];\n        if (!targetNode) {\n            window.addEventListener('mousemove', this.updateLine);\n        }\n\n        return {\n            sourceNode,\n            targetNode,\n            sx: 0,\n            sy: 0,\n            c1x: 0,\n            c1y: 0,\n            c2x: 0,\n            c2y: 0,\n            ex: 0,\n            ey: 0,\n            ae: 0,\n            as: 0,\n            top: 0,\n            left: 0,\n            width: 100,\n            height: 100,\n        };\n    },\n\n    mounted() {\n        this.$refs.arrow.addEventListener('click', this.onClick);\n        this.updateLine();\n    },\n\n    beforeUnmount() {\n        window.removeEventListener('mousemove', this.updateLine);\n    },\n\n    methods: {\n        onClick() {\n            console.log('click');\n        },\n\n        updateLine() {\n            const sourceElement = document.querySelector(`[id=\"${this.source}\"]`);\n            const targetElement = document.querySelector(`[id=\"${this.target}\"]`);\n            const sourceBox = this.getBoundingBox(sourceElement, this.sourceNode);\n            const targetBox = this.getBoundingBox(targetElement, this.targetNode);\n\n            const [sx, sy, c1x, c1y, c2x, c2y, ex, ey, ae] = getBoxToBoxArrow(\n                sourceBox.x,\n                sourceBox.y,\n                sourceBox.w,\n                sourceBox.h,\n                targetBox.x,\n                targetBox.y,\n                targetBox.w,\n                targetBox.h,\n                { padEnd: this.arrowHeadSize },\n            );\n\n            const left = Math.min(sourceBox.x, targetBox.x);\n            const right = Math.max(sourceBox.x + sourceBox.w, targetBox.x + targetBox.w);\n            const top = Math.min(sourceBox.y, targetBox.y);\n            const bottom = Math.max(sourceBox.y + sourceBox.h, targetBox.y + targetBox.h);\n\n            this.left = left;\n            this.width = right - left;\n            this.top = top;\n            this.height = bottom - top;\n            this.sx = sx - left;\n            this.sy = sy - top;\n            this.c1x = c1x - left;\n            this.c1y = c1y - top;\n            this.c2x = c2x - left;\n            this.c2y = c2y - top;\n            this.ex = ex - left;\n            this.ey = ey - top;\n            this.ae = ae;\n        },\n\n        mapX(value) {\n            return (value - this.x.value) * this.zoom.value;\n        },\n\n        mapY(value) {\n            return (value - this.y.value) * this.zoom.value;\n        },\n\n        getBoundingBox(element, data) {\n            const rect = element.getBoundingClientRect();\n            const cs = getComputedStyle(element);\n            const paddingX = parseFloat(cs.paddingLeft) + parseFloat(cs.paddingRight);\n            // const paddingY = parseFloat(cs.paddingTop) + parseFloat(cs.paddingBottom);\n\n            // const borderX = parseFloat(cs.borderLeftWidth) + parseFloat(cs.borderRightWidth);\n            // const borderY = parseFloat(cs.borderTopWidth) + parseFloat(cs.borderBottomWidth);\n\n            // const elementWidth = element.offsetWidth - paddingX - borderX;\n            // const elementHeight = element.offsetHeight - paddingY - borderY;\n\n            // const centerX = element.offsetLeft + element.offsetWidth / 2;\n            // const centerY = element.offsetTop + element.offsetHeight / 2;\n\n            return {\n                x: data ? data.currentX : rect.x / this.zoom.value + this.x.value,\n                y: data ? data.currentY : rect.y / this.zoom.value + this.y.value,\n                w: data ? data.currentWidth + paddingX : rect.width / this.zoom.value,\n                h: element.offsetHeight - 2,\n            };\n        },\n    },\n\n    watch: {\n        sourceNode: {\n            deep: true,\n            handler() {\n                this.updateLine();\n            },\n        },\n\n        targetNode: {\n            deep: true,\n            handler() {\n                this.updateLine();\n            },\n        },\n\n        // x: {\n        //     deep: true,\n        //     handler() {\n        //         this.updateLine();\n        //     },\n        // },\n\n        // y: {\n        //     deep: true,\n        //     handler() {\n        //         this.updateLine();\n        //     },\n        // },\n\n        // zoom: {\n        //     deep: true,\n        //     handler() {\n        //         this.updateLine(true);\n        //     },\n        // },\n    },\n};\n</script>\n\n<style scoped>\n.link {\n    position: absolute;\n}\n</style>\n","import { render } from \"./Link.vue?vue&type=template&id=1bc3dcbd&scoped=true\"\nimport script from \"./Link.vue?vue&type=script&lang=js\"\nexport * from \"./Link.vue?vue&type=script&lang=js\"\n\nimport \"./Link.vue?vue&type=style&index=0&id=1bc3dcbd&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1bc3dcbd\"]])\n\nexport default __exports__","<template>\n    <div\n        class=\"cursor\"\n        :style=\"{\n            transform: `translate(${x}px, ${y}px)`,\n        }\"\n    >\n        <img class=\"arrow\" src=\"/cursor.svg\" alt=\"Arrow\" />\n        <Avatar class=\"avatar\" variant=\"beam\" :name=\"name\" :size=\"20\" />\n    </div>\n</template>\n\n<script>\nimport { defineComponent } from 'vue';\nimport Avatar from 'vue-boring-avatars';\n\nexport default defineComponent({\n    name: 'IntrigueCursor',\n    components: { Avatar },\n    props: {\n        id: String,\n        name: String,\n        x: Number,\n        y: Number,\n    },\n});\n</script>\n\n<style scoped>\n.cursor {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 20px;\n    height: 20px;\n    transition: transform 0.1s linear;\n    z-index: 9999;\n}\n\n.arrow {\n    width: 20px;\n    height: 24px;\n    transform: translate(-6px, -2px) rotate(-30deg);\n}\n\n.avatar {\n    transform: translate(4px, -10px);\n    border: 2px solid white;\n    border-radius: 100%;\n    box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.3);\n}\n</style>\n","import { render } from \"./Cursor.vue?vue&type=template&id=63ef1738&scoped=true\"\nimport script from \"./Cursor.vue?vue&type=script&lang=js\"\nexport * from \"./Cursor.vue?vue&type=script&lang=js\"\n\nimport \"./Cursor.vue?vue&type=style&index=0&id=63ef1738&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-63ef1738\"]])\n\nexport default __exports__","import { render } from \"./Canvas.vue?vue&type=template&id=75743ecc\"\nimport script from \"./Canvas.vue?vue&type=script&lang=js\"\nexport * from \"./Canvas.vue?vue&type=script&lang=js\"\n\nimport \"./Canvas.vue?vue&type=style&index=0&id=75743ecc&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div id=\"pointer-location\" :style=\"{left: `${x}px`, top: `${y}px`}\"/>\n</template>\n\n<script>\nexport default {\n    name: 'PointerTracker',\n\n    data() {\n        return {\n            x: 0,\n            y: 0,\n        };\n    },\n\n    mounted() {\n        window.addEventListener('mousemove', (event) => {\n            this.x = event.clientX + 2;\n            this.y = event.clientY + 2;\n        });\n    },\n};\n</script>\n\n<style scoped>\n#pointer-location {\n    position: fixed;\n    width: 2px;\n    height: 2px;\n    /* background-color: red; */\n    pointer-events: none;\n}\n</style>\n","import { render } from \"./PointerTracker.vue?vue&type=template&id=0fb01106&scoped=true\"\nimport script from \"./PointerTracker.vue?vue&type=script&lang=js\"\nexport * from \"./PointerTracker.vue?vue&type=script&lang=js\"\n\nimport \"./PointerTracker.vue?vue&type=style&index=0&id=0fb01106&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0fb01106\"]])\n\nexport default __exports__","<template>\n    <a-card class=\"debug-view\">\n        <div>{{currentState}}</div>\n\n        <pre>{{currentContext}}</pre>\n\n        <a-space>\n            <a-button @click=\"showImportModal = true\">Import Data</a-button>\n            <a-button @click=\"exportJSON\">Export Data</a-button>\n        </a-space>\n\n        <a-modal v-model:visible=\"showImportModal\"\n            @ok=\"importJSON\" @cancel=\"jsonData = ''\"\n        >\n            <template #title>\n                Import JSON data\n            </template>\n            <div>\n                <a-textarea v-model=\"jsonData\" placeholder=\"Paste JSON data here\" allow-clear/>\n            </div>\n    </a-modal>\n    </a-card>\n</template>\n\n<script>\nimport { reactive } from 'vue';\nimport { stringify } from 'yaml';\n\nexport default {\n    name: 'IntrigueDebug',\n    inject: ['document', 'state', 'store'],\n\n    data() {\n        return {\n            showImportModal: false,\n            jsonData: '',\n        };\n    },\n\n    methods: {\n        exportJSON() {\n            console.log(JSON.stringify(this.store.value));\n        },\n\n        importJSON() {\n            const data = JSON.parse(this.jsonData);\n            this.document.store = reactive(data);\n\n            if (this.document.unbindSyncHandler) this.document.unbindSyncHandler();\n            if (this.document.unbindCommitHandler) {\n                this.document.unbindCommitHandler();\n                this.document.unbindCommitHandler = this.document.on('commit', this.document.commitToSyncedData.bind(this.document));\n            }\n\n            Object.keys(data.metadata).forEach((key) => {\n                this.document.syncedData.metadata[key] = data.metadata[key];\n            });\n\n            Object.keys(data.nodes).forEach((nodeId) => {\n                this.document.syncedData.nodes[nodeId] = data.nodes[nodeId];\n            });\n\n            Object.keys(data.links).forEach((linkId) => {\n                this.document.syncedData.links[linkId] = data.links[linkId];\n            });\n\n            this.showImportModal = false;\n        },\n    },\n\n    computed: {\n        currentState() {\n            return stringify(this.state.value.value);\n        },\n\n        currentContext() {\n            return stringify(this.state.value.context);\n        },\n    },\n};\n</script>\n\n<style scoped>\n.debug-view{\n    position: fixed;\n    top: 2rem;\n    left: 2rem;\n    max-width: 20rem;\n}\n</style>\n","import { render } from \"./Debug.vue?vue&type=template&id=57a6ff16&scoped=true\"\nimport script from \"./Debug.vue?vue&type=script&lang=js\"\nexport * from \"./Debug.vue?vue&type=script&lang=js\"\n\nimport \"./Debug.vue?vue&type=style&index=0&id=57a6ff16&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-57a6ff16\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=4442395b\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=4442395b&lang=scss\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue';\nimport ArcoVue from '@arco-design/web-vue';\nimport ArcoVueIcon from '@arco-design/web-vue/es/icon';\nimport '@arco-design/web-vue/dist/arco.css';\n\nimport App from './App.vue';\n\nconst app = createApp(App);\napp.use(ArcoVue);\napp.use(ArcoVueIcon);\napp.mount('#app');\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// expose the module cache\n__webpack_require__.c = __webpack_module_cache__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"js/\" + chunkId + \".\" + {\"798\":\"31edf351\",\"916\":\"0ebf039b\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var inProgress = {};\nvar dataWebpackPrefix = \"intrigue:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkintrigue\"] = self[\"webpackChunkintrigue\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// module cache are used so entry inlining is disabled\n// startup\n// Load entry module and return exports\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(__webpack_require__.s = 10260); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_createVNode","_component_TitleBar","_component_DocumentCanvas","_component_PointerTracker","$data","_createBlock","_component_Debug","key","propByPath","object","path","value","parts","split","limit","length","i","undefined","EventEmitter","constructor","this","events","on","event","callback","push","filter","emit","args","callbacks","forEach","LocalFilePersistence","filePath","doc","overwrite","fs","debounce","super","timeout","isElectron","readFile","writeFile","access","require","Error","then","saveToDisk","data","applyUpdate","Uint8Array","from","catch","triggerAutosave","bind","clearTimeout","setTimeout","console","log","encodeStateAsUpdate","enableVueBindings","Vue","SyncedDocument","storeStructure","syncInitialized","store","syncedStore","localData","reactive","remoteUpdated","warn","initSync","documentId","users","metadata","id","nanoid","getYjsValue","syncProvider","WebrtcProvider","awareness","handleChanges","userId","setLocalStateField","localUser","initPersistence","saveProvider","IndexeddbPersistence","close","destroy","updateAwareness","registerAwarenessCallback","awarenessInfo","getStates","values","onlineUsers","Set","offlineUsers","Object","keys","user","add","delete","entries","stringify","JSON","ReversibleDocument","inverses","undoStack","redoStack","previousTime","captureTimeout","registerInverses","actionA","actionB","commit","action","params","inverseParams","actionFunction","error","currentTime","Date","now","Math","abs","Array","isArray","popStackItem","fromStack","toStack","lastRecord","pop","toStackRecord","reverse","item","inverseAction","undo","redo","canUndo","canRedo","NodeTypes","IntrigueDocument","nodes","links","fragment","remoteSelection","createNode","nodeItem","state","nodeId","node","type","content","parent","children","identifier","literature","x","y","w","link","createLink","child","snapNode","createNodes","nodeItems","nodeIds","newLinks","newChildren","pairInfo","deleteNode","removedLinks","unsnappedChildren","linkId","removeLink","childId","unsnapNode","source","target","deleteNodes","updateNode","update","by","originalValue","set","updateNodes","Area","indexOf","childIndex","splice","findLinkByNodeIds","sourceId","targetId","finds","ViewingState","initial","states","Idle","actions","TitleEditing","Panning","Selecting","Dragging","Dropping","Detaching","detached","Linking","EditingState","Editing","ArrangingState","Selected","Resizing","intrigueMachine","createMachine","Viewing","Arranging","context","editing","panning","dragging","dropping","selection","detaching","linking","setEditing","assign","clearEditing","setPanning","clearPanning","setDragging","clearDragging","setDropping","clearDropping","setDetaching","clearDetaching","setSelection","clearSelection","setLinking","clearLinking","tutorialData","aP1EHlKvrNgjPx1kElhZ0","F39NcKCnnIjtqGPzvoA1W","IjnvakXbzDwcf84oBqYCb","bPRss4q2Tvzn_ea1TY4Wr","CsKDxvFhIxKDk_m6Bj8Dh","DTZkgJWGKYriyalyLJfZx","NBLwCo0fXhOXI6DGjqtWU","AHiu8yMyfhq5ZYnjuoIn0","currentX","currentY","currentWidth","currentHeight","h","SALvRB6xX4hqjJVjU6Y_b","referenceType","title","author","family","record","EwfSxmoKarx3n7W1mJy8s","wzwAxT0LV6sfNjOgv31fx","JCnC9yAUfQ3IXvnj_THs8","given","sequence","affiliation","indexed","timestamp","publisher","issue","domain","DOI","created","page","prefix","volume","member","language","deposited","score","resource","primary","URL","subtitle","issued","relation","ISSN","subject","published","agP9N5iMMR8mJF1s5Wthr","jPkhyrgf3HOvPALhbfWYj","EIB7xARz2ceZcpBkE940d","anvYLObXrGTWIk8T3R2rq","eGL9rPJ6hhTOecmHN1IPE","cjmp78kq4aeWsiDHNm3be","KsZsnbXyRuVqf3FKtK0BA","class","_createElementBlock","_component_a_row","justify","align","_component_a_col","span","_component_a_button_group","style","_component_a_button","size","disabled","$options","onClick","icon","_component_icon_undo","_component_icon_redo","_createElementVNode","_toDisplayString","_component_CopyButton","text","$props","shape","status","_hoisted_1","_renderSlot","_ctx","name","props","String","copied","timer","methods","copy","ultralightCopy","$message","__exports__","inject","components","CopyButton","electron","newFile","mounted","queryString","window","location","search","urlParams","URLSearchParams","get","document","url","href","searchParams","history","replaceState","computed","fileName","basename","shareLink","xmlns","_component_vue_infinite_viewer","ref","maxPinchWheel","onScroll","onPinch","onDblclick","_Fragment","_renderList","_component_IntrigueLink","_component_IntrigueNode","selected","some","t","onUpdateDimensions","moveable","updateRect","_component_Cursor","cursorX","cursorY","_component_Moveable","className","draggable","resizable","renderDirections","onClickGroup","onDrag","onDragGroup","onDragEnd","onDragGroupEnd","onResize","onResizeEnd","_component_VueSelecto","dragContainer","selectableTargets","selectByClick","selectFromInside","toggleContinueSelect","keyContainer","hitRate","ratio","onDragStart","onSelect","onSelectEnd","_hoisted_3","Keyboard","handlers","handler","options","keyBindingHandler","createKeybindingsHandler","addEventListener","removeListeners","removeEventListener","includes","color","gradient","onMouseenter","onFocusin","onMouseleave","onFocusout","_component_note","onChange","_component_reference","onMousedown","onMouseup","_component_icon_link","_component_editor_content","editor","defineComponent","EditorContent","Boolean","Editor","extensions","StarterKit","Highlight","Link","protocols","autofocus","editable","onEditorBlur","beforeUnmount","send","getHTML","$emit","getText","watch","commands","setContent","setEditable","focus","blur","_hoisted_6","formatAuthors","authors","authorsString","showFullText","open","extractIsbn","regex","test","chars","replace","last","check","sum","parseInt","final","match","extractIdentifier","isbnString","trim","doiStrings","doi","extract","parse","e","zotero","linkify","startsWith","urls","fetchLiteratureInfo","Promise","resolve","reject","axios","matches","request","responseURL","err","Cite","info","_graph","Note","Reference","required","default","parentLocalData","commitTimer","onMouseEnter","onMouseLeave","onLinkButtonClick","observeParent","parentWatchers","$watch","updateDimensionsFromParent","updateDimensions","$refs","clientHeight","commitUpdatedDimensions","parseNoteContent","observer","ResizeObserver","observe","breforeUnmount","disconnect","removeParentWatcher","deactivated","styles","width","transform","selectedByRemoteUsers","userData","isNote","isReference","showLinkButton","height","left","top","d","stroke","fill","points","arrowHeadSize","Number","sourceNode","targetNode","updateLine","sx","sy","c1x","c1y","c2x","c2y","ex","ey","ae","as","arrow","sourceElement","querySelector","targetElement","sourceBox","getBoundingBox","targetBox","getBoxToBoxArrow","padEnd","min","right","max","bottom","mapX","zoom","mapY","element","rect","getBoundingClientRect","cs","getComputedStyle","paddingX","parseFloat","paddingLeft","paddingRight","offsetHeight","deep","src","alt","_component_Avatar","variant","Avatar","VueInfiniteViewer","Moveable","VueSelecto","IntrigueNode","IntrigueLink","Cursor","provide","keyboard","newNode","mapped","mapMousePosition","clientX","clientY","doubleClickNode","selectedIds","map","el","preventDefault","panCanvas","scrollLeft","scrollTop","zoomCanvas","canvas","setZoom","cancelSelectionWhenClickEmpty","selecto","clickTarget","inputEvent","inputTarget","sendDragStartMessage","targets","classList","dragNodes","toDetach","distance","sqrt","dist","pair","translate","commitNodePositions","lastEvent","remove","parents","preventSelectionWhenDragging","isMoveableElement","contains","stop","tryLinking","selectNode","commitSelections","isDragStart","dragStart","resizeNode","commitNodeSize","mappedX","mappedY","gatherDescendants","root","includeRoot","descendants","childDescendants","descendantId","updateCursorPosition","startPanning","stopPropagation","stopPanning","activeNodeHeight","shouldResize","_component_a_card","_component_a_space","_component_a_modal","visible","$event","onOk","onCancel","_component_a_textarea","placeholder","showImportModal","jsonData","exportJSON","importJSON","unbindSyncHandler","unbindCommitHandler","commitToSyncedData","syncedData","currentState","currentContext","TitleBar","DocumentCanvas","PointerTracker","Debug","loading","debug","docId","injections","setup","functions","catchErrors","useMachine","broadcastUsername","fruit","getRandomFruitsName","maxWords","ipcRenderer","success","code","body","invoke","isPackaged","_","render","app","createApp","App","use","ArcoVue","ArcoVueIcon","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","loaded","__webpack_modules__","call","m","c","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","r","n","getter","__esModule","a","leafPrototypes","getProto","getPrototypeOf","obj","__proto__","mode","ns","create","def","current","getOwnPropertyNames","definition","o","defineProperty","enumerable","f","chunkId","all","reduce","promises","u","miniCssF","g","globalThis","Function","prop","prototype","hasOwnProperty","inProgress","dataWebpackPrefix","l","done","script","needAttach","scripts","getElementsByTagName","s","getAttribute","createElement","charset","nc","setAttribute","onScriptComplete","prev","onerror","onload","doneFns","parentNode","removeChild","head","appendChild","Symbol","toStringTag","nmd","paths","p","installedChunks","installedChunkData","promise","loadingEnded","errorType","realSrc","message","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}
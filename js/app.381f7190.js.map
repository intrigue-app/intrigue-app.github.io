{"version":3,"file":"js/app.381f7190.js","mappings":"+PACIA,EAAAA,EAAAA,IAAYC,IACZD,EAAAA,EAAAA,IAAkBE,IAClBF,EAAAA,EAAAA,IAAkBG,IAAlB,G,8DCDW,SAASC,EAAWC,EAAQC,EAAMC,GAC7C,MAAMC,EAAQF,EAAKG,MAAM,KACnBC,EAAQF,EAAMG,OAAS,EAC7B,IAAK,IAAIC,EAAI,EAAGA,EAAIF,IAASE,EAAG,CAC5B,MAAMC,EAAML,EAAMI,GAClBP,EAASA,EAAOQ,KAASR,EAAOQ,GAAO,CAAC,EAC3C,CACD,MAAMA,EAAML,EAAME,GAIlB,YAHcI,IAAVP,IACAF,EAAOQ,GAAON,GAEXF,EAAOQ,EACjB,C,4CCdc,MAAME,EACjBC,cACIC,KAAKC,OAAS,CAAC,CAElB,CAGDC,GAAGC,EAAOC,GAIN,OAFKJ,KAAKC,OAAOE,KAAQH,KAAKC,OAAOE,GAAS,IAC9CH,KAAKC,OAAOE,GAAOE,KAAKD,GACjB,KACHJ,KAAKC,OAAOE,GAASH,KAAKC,OAAOE,IAAQG,QAAQX,GAAMS,IAAaT,GAApE,CAEP,CAEDY,KAAKJ,KAAUK,GAEX,MAAMC,EAAYT,KAAKC,OAAOE,IAAU,GACxCM,EAAUC,SAASN,GAAaA,KAAYI,IAI/C,E,+DClBU,MAAMG,UAA6Bb,EAC9CC,YAAYa,EAAUC,EAAKC,EAAIC,GAO3B,GANAC,QACAhB,KAAKa,IAAMA,EACXb,KAAKY,SAAWA,EAChBZ,KAAKiB,QAAU,KACfjB,KAAKe,SAAWA,GAAY,IAExBG,MAAc,CAEd,MAAM,SAAEC,EAAF,UAAYC,EAAZ,OAAuBC,GAAWC,EAAQ,MAChDtB,KAAKmB,SAAWA,EAChBnB,KAAKoB,UAAYA,EACjBpB,KAAKqB,OAASA,CACjB,KAAM,KAAIP,EAMP,MAAM,IAAIS,MAAM,iLANL,CACX,MAAM,SAAEJ,EAAF,UAAYC,EAAZ,OAAuBC,GAAWP,EACxCd,KAAKmB,SAAWA,EAChBnB,KAAKoB,UAAYA,EACjBpB,KAAKqB,OAASA,CACjB,CAEA,CAEIrB,KAAKY,SAGNZ,KAAKqB,OAAOrB,KAAKY,UAAUY,MAAK,KAC5BxB,KAAKmB,SAASP,GAAUY,MAAMC,KAC1BC,EAAAA,EAAAA,IAAY1B,KAAKa,IAAKc,WAAWC,KAAKH,IACtCzB,KAAKO,KAAK,SAAV,GAFJ,IAIDsB,OAAM,KACL7B,KAAK8B,YAAY,MAAM,KACnB9B,KAAKO,KAAK,SAAV,GADJ,IARJP,KAAKO,KAAK,UAadP,KAAKa,IAAIX,GAAG,SAAUF,KAAK8B,YAAYC,KAAK/B,MAC/C,CAED8B,cACQ9B,KAAKiB,UACLe,aAAahC,KAAKiB,SAClBjB,KAAKiB,QAAU,MAEnBjB,KAAKiB,QAAUgB,YAAW,KACjBjC,KAAKY,WAEVsB,EAAQC,IAAI,uDACZD,EAAQC,KAAIC,EAAAA,EAAAA,IAAoBpC,KAAKa,MACrCb,KAAKoB,UAAUpB,KAAKY,UAAUwB,EAAAA,EAAAA,IAAoBpC,KAAKa,MAAMW,MAAK,KAE9DxB,KAAKO,KAAK,QAAV,IAFJ,GAIDP,KAAKe,SACX,E,eC9CLsB,EAAAA,EAAAA,IAAkBC,GAEH,MAAMC,UAAuBzC,EACxCC,YAAYyC,GACRxB,QACAhB,KAAKyC,iBAAkB,EACvBzC,KAAK0C,OAAQC,EAAAA,EAAAA,IAAYH,GACzBN,EAAQU,KAAO,IAAM,IACxB,CAEDC,SAASC,GACL9C,KAAK+C,OAAQC,EAAAA,EAAAA,IAAS,CAAC,GACvBhD,KAAK0C,MAAMO,SAASC,GAAKJ,IAAcK,EAAAA,EAAAA,MAEvC,MAAMtC,GAAMuC,EAAAA,EAAAA,IAAYpD,KAAK0C,OAC7B1C,KAAKqD,aAAe,IAAIC,EAAAA,GAAetD,KAAK0C,MAAMO,SAASC,GAAIrC,GAC/Db,KAAKqD,aAAaE,UAAUrD,GAAG,SAAUF,KAAKwD,cAAczB,KAAK/B,OAGjEA,KAAKyD,QAASN,EAAAA,EAAAA,MACdnD,KAAKqD,aAAaE,UAAUG,mBAAmB,KAAM1D,KAAKyD,QAG1DzD,KAAK2D,WAAYX,EAAAA,EAAAA,IAAShD,KAAK+C,MAAM/C,KAAKyD,SAE1CzD,KAAKyC,iBAAkB,CAC1B,CAEDmB,gBAAgBhD,GACZ,MAAMC,GAAMuC,EAAAA,EAAAA,IAAYpD,KAAK0C,OAC7B1C,KAAK6D,aAAe3C,MACd,IAAIP,EAAqBC,EAAUC,GACnC,IAAIiD,EAAAA,GAAqBlD,EAAUC,GAEzCb,KAAK6D,aAAa3D,GAAG,UAAU,KAC3BgC,EAAQC,IAAI,oDAAqDnC,KAAK0C,MAAMO,SAASC,IAChFlD,KAAKyC,iBAAiBzC,KAAK6C,SAAS7C,KAAK0C,MAAMO,SAASC,IAC7DlD,KAAKO,KAAK,SAAV,IAGJP,KAAK6D,aAAa3D,GAAG,SAAS,KAC1BgC,EAAQC,IAAI,oDACZnC,KAAKO,KAAK,QAAV,GAEP,CAEDwD,QACI/D,KAAKqD,aAAaW,SACrB,CAGDC,gBAAgBrE,EAAKN,GACZU,KAAKyC,iBACVzC,KAAKqD,aAAaE,UAAUG,mBAAmB9D,EAAKN,EACvD,CAED4E,0BAA0BtE,EAAKQ,GAC3BJ,KAAKqD,aAAaE,UAAUrD,GAAGN,EAAKQ,EACvC,CAEDoD,gBACI,MAAMW,EAAgB,IAAInE,KAAKqD,aAAaE,UAAUa,YAAYC,UAC5DC,EAAc,IAAIC,IAClBC,EAAe,IAAID,IAAIE,OAAOC,KAAK1E,KAAK+C,QAE9CoB,EAAczD,SAASiE,IACnBL,EAAYM,IAAID,EAAKzB,IACrBsB,EAAaK,OAAOF,EAAKzB,IAEpBlD,KAAK+C,MAAM4B,EAAKzB,MAAKlD,KAAK+C,MAAM4B,EAAKzB,IAAM,CAAC,GACjDuB,OAAOK,QAAQH,GAAMjE,SAAQ,EAAEd,EAAKN,MAChCU,KAAK+C,MAAM4B,EAAKzB,IAAItD,GAAON,CAA3B,GADJ,IAKJkF,EAAa9D,SAAS+C,UAAkBzD,KAAK+C,MAAMU,IACtD,CAEDsB,YACI,OAAOC,KAAKD,UAAU/E,KAAK0C,MAC9B,E,cC5FU,MAAMuC,UAA2B1C,EAC5CxC,YAAYyC,GACRxB,MAAMwB,GAENxC,KAAKkF,SAAW,CAAC,EACjBlF,KAAKmF,UAAY,GACjBnF,KAAKoF,UAAY,GAEjBpF,KAAKqF,cAAgB,EACrBrF,KAAKsF,eAAiB,EACzB,CAEDC,iBAAiBC,EAASC,GACtBzF,KAAKkF,SAASM,GAAWC,EACzBzF,KAAKkF,SAASO,GAAWD,CAC5B,CAEDE,OAAOC,EAAQC,GACX,IAAIC,EAAgB,KAGpB,MAAMC,EAAiB9F,KAAK2F,GAAQ5D,KAAK/B,MAEzC,QAAuBH,IAAnBiG,EAIA,YADA5D,EAAQ6D,MAAO,4CAA2CJ,sBAA4B3F,MAI1F,GANI6F,EAAgBC,EAAeF,IAM9BC,EAAe,OAEpB,MAAMG,EAAcC,KAAKC,MACrBC,KAAKC,IAAIJ,EAAchG,KAAKqF,cAAgBrF,KAAKsF,gBACjDpD,EAAQC,IAAI,6BAEPkE,MAAMC,QAAQtG,KAAKmF,UAAUnF,KAAKmF,UAAUzF,OAAS,MACtDM,KAAKmF,UAAUnF,KAAKmF,UAAUzF,OAAS,GAAK,CACxCM,KAAKmF,UAAUnF,KAAKmF,UAAUzF,OAAS,KAG/CM,KAAKmF,UAAUnF,KAAKmF,UAAUzF,OAAS,GAAGW,KAAK,CAAEsF,SAAQE,mBAEzD7F,KAAKmF,UAAU9E,KAAK,CAAEsF,SAAQE,kBAElC7F,KAAKqF,aAAeW,EAGpBhG,KAAKoF,UAAY,GACjBpF,KAAKO,KAAK,SACb,CAEDgG,aAAaC,EAAWC,GACpB,GAAID,EAAU9G,QAAU,EAAG,OAC3B,IAAIgH,EAAaF,EAAUG,MAC3B,IAAKD,EAAY,OAEZL,MAAMC,QAAQI,KAAaA,EAAa,CAACA,IAE9C,MAAME,EAAgB,GACtBF,EAAWG,UAAUnG,SAASoG,IAC1B,MAAMC,EAAgB/G,KAAKkF,SAAS4B,EAAKnB,QACzC,IAAKoB,EAED,YADA7E,EAAQ6D,MAAO,sCAAqCe,EAAKnB,aAI7D,IAAIE,EAGJ,MAAMC,EAAiB9F,KAAK+G,GAAehF,KAAK/B,WAEzBH,IAAnBiG,EACAD,EAAgBC,EAAegB,EAAKjB,eAEpC3D,EAAQ6D,MAAO,6BAA4BgB,sBAAmC/G,MAGlF4G,EAAcvG,KAAK,CACfsF,OAAQoB,EACRlB,iBAFJ,IAMJY,EAAQpG,KAA8B,IAAzBuG,EAAclH,OAAekH,EAAc,GAAKA,EAChE,CAEDI,OACIhH,KAAKuG,aAAavG,KAAKmF,UAAWnF,KAAKoF,UAC1C,CAED6B,OACIjH,KAAKuG,aAAavG,KAAKoF,UAAWpF,KAAKmF,UAC1C,CAED+B,UACI,OAAOlH,KAAKmF,UAAUzF,OAAS,CAClC,CAEDyH,UACI,OAAOnH,KAAKoF,UAAU1F,OAAS,CAClC,E,cCvGU,MAAM0H,I,OAAAA,EAAAA,OACH,S,OADGA,EAAAA,YAGE,c,OAHFA,EAAAA,OAKH,Q,cCIH,MAAMC,UAAyBpC,EAC1ClF,cACIiB,MAAM,CACFiC,SAAU,CAAC,EACXqE,MAAO,CAAC,EACRC,MAAO,CAAC,EAERC,SAAU,QAGdxH,KAAKyH,iBAAkBzE,EAAAA,EAAAA,IAAS,IAAIuB,KAEpCvE,KAAKuF,iBAAiB,aAAc,cACpCvF,KAAKuF,iBAAiB,cAAe,eACrCvF,KAAKuF,iBAAiB,aAAc,cACpCvF,KAAKuF,iBAAiB,cAAe,eACrCvF,KAAKuF,iBAAiB,WAAY,cAClCvF,KAAKuF,iBAAiB,aAAc,aACvC,CAGDmC,WAAWC,GACP,MAAMC,EAASD,EAASzE,GAAKyE,EAASzE,IAAKC,EAAAA,EAAAA,MACrC0E,EAAO,CACT3E,GAAI0E,EACJE,KAAMH,EAASG,KACfC,QAASJ,EAASI,QAClBR,MAAO,GACPS,OAAQ,KACRC,SAAU,GACVC,WAAY,KACZC,WAAY,KACZC,EAAGT,EAASS,EAAIT,EAASS,EAAI,EAC7BC,EAAGV,EAASU,EAAIV,EAASU,EAAI,EAC7BC,EAAGX,EAASW,EAAIX,EAASW,EAAI,IAC7BC,SAAUZ,EAASS,EAAIT,EAASS,EAAI,EACpCI,SAAUb,EAASU,EAAIV,EAASU,EAAI,EACpCI,aAAcd,EAASW,EAAIX,EAASW,EAAI,KAS5C,OAPIX,EAASJ,OACTI,EAASJ,MAAM7G,SAASgI,GAAS1I,KAAK2I,WAAWD,KAEjDf,EAASM,UACTN,EAASM,SAASvH,SAASkI,GAAU5I,KAAK6I,SAASD,KAEvD5I,KAAK0C,MAAM4E,MAAMM,GAAUC,EACpBD,CACV,CAEDkB,YAAYC,GACR,MAAMC,EAAU,GACVC,EAAW,GACXC,EAAc,GAuBpB,OAtBAH,EAAUrI,SAASoG,IAGXA,EAAKS,QACLT,EAAKS,MAAM7G,SAASgI,GAASO,EAAS5I,KAAKqI,YACpC5B,EAAKS,OAIZT,EAAKmB,WACLnB,EAAKmB,SAASvH,SAASkI,GAAUM,EAAY7I,KAAKuI,YAC3C9B,EAAKmB,UAGhB,MAAML,EAAS5H,KAAK0H,WAAWZ,GAC/BkC,EAAQ3I,KAAKuH,EAAb,IAGJqB,EAASvI,SAASgI,GAAS1I,KAAK2I,WAAWD,KAE3CQ,EAAYxI,SAASyI,GAAanJ,KAAK6I,SAASM,KAEzCH,CACV,CAEDI,WAAWxB,GACP,MAAMC,EAAO,IAAK7H,KAAK0C,MAAM4E,MAAMM,IAC7ByB,EAAe,GACfC,EAAoB,GAe1B,OAdAzB,EAAKN,MAAM7G,SAAS6I,IAChBF,EAAahJ,KAAKL,KAAKwJ,WAAWD,GAAlC,IAEJ1B,EAAKI,SAASvH,SAAS+I,IACnBH,EAAkBjJ,KACdL,KAAK0J,WAAW,CACZC,OAAQ9B,EAAK3E,GACb0G,OAAQH,IAHhB,IAOJ5B,EAAKN,MAAQ8B,EACbxB,EAAKI,SAAWqB,SACTtJ,KAAK0C,MAAM4E,MAAMM,GACjBC,CACV,CAEDgC,YAAYb,GACR,MAAM1B,EAAQ,GAKd,OAJA0B,EAAQtI,SAASkH,IACb,MAAMC,EAAO7H,KAAKoJ,WAAWxB,GAC7BN,EAAMjH,KAAKwH,EAAX,IAEGP,CACV,CAEDwC,WAAWC,GACP,MAAMlC,EAAO7H,KAAK0C,MAAM4E,MAAMyC,EAAO7G,IAC/B2C,EAAgB,CAClB3C,GAAI6G,EAAO7G,IAwBf,OArBI6G,EAAOC,KACPnE,EAAcmE,GAAK,CAAC,EACpBvF,OAAOK,QAAQiF,EAAOC,IAAItJ,SAAQ,EAAErB,EAAMC,MACtC,MAAM2K,EAAgB9K,EAAW0I,EAAMxI,GACV,kBAAlB4K,GAIX9K,EAAW0I,EAAMxI,EAAM4K,EAAgB3K,GACvCuG,EAAcmE,GAAG3K,IAAS4K,GAJtB/H,EAAQ6D,MAAM,qDAIlB,KAIJgE,EAAOG,MACPrE,EAAcqE,IAAM,CAAC,EACrBzF,OAAOK,QAAQiF,EAAOG,KAAKxJ,SAAQ,EAAErB,EAAMC,MACvC,MAAM2K,EAAgB9K,EAAW0I,EAAMxI,GACvCF,EAAW0I,EAAMxI,EAAMC,GACvBuG,EAAcqE,IAAI7K,GAAQ4K,CAA1B,KAGDpE,CACV,CAEDsE,YAAYJ,GACR,MAAMlE,EAAgB,CAClB3C,GAAI,IAAI6G,EAAO7G,KA+BnB,OA5BI6G,EAAOC,KACPnE,EAAcmE,GAAK,CAAC,EACpBvF,OAAOK,QAAQiF,EAAOC,IAAItJ,SAAQ,EAAErB,EAAMC,MACtCuG,EAAcmE,GAAG3K,IAASC,CAA1B,IAEJyK,EAAO7G,GAAGxC,SAASkH,IACf5H,KAAK8J,WAAW,CACZ5G,GAAI0E,EACJoC,GAAID,EAAOC,IAFf,KAOJD,EAAOG,MACPrE,EAAcqE,IAAM,CAAC,EACrBH,EAAO7G,GAAGxC,SAASkH,IACf/B,EAAcqE,IAAItC,GAAU,CAAC,EAC7B,MAAMC,EAAO7H,KAAK0C,MAAM4E,MAAMM,GAC9BnD,OAAOC,KAAKqF,EAAOG,IAAItC,IAASlH,SAASrB,IACrCwG,EAAcqE,IAAItC,GAAQvI,GAAQF,EAAW0I,EAAMxI,EAAnD,IAEJW,KAAK8J,WAAW,CACZ5G,GAAI0E,EACJsC,IAAKH,EAAOG,IAAItC,IAFpB,KAOD/B,CACV,CAEDgD,SAASvB,GACL,MAAMzB,EAAgB,CAAC,EACvB,IAAKyB,EAAMqC,SAAWrC,EAAMsC,OAAQ,OAAO,EAC3C,MAAM5B,EAAShI,KAAK0C,MAAM4E,MAAMA,EAAMqC,QAChCf,EAAQ5I,KAAK0C,MAAM4E,MAAMA,EAAMsC,QAsBrC,OAnBI5B,EAAOF,OAASV,EAAUgD,MAUQ,IAA3BpC,EAAOC,SAASvI,UATvBsI,EAAOC,SAAS5H,KAAKiH,EAAMsC,QAE3B5B,EAAOC,SAAS3H,QAAO,CAACwG,EAAMnH,IAAMqI,EAAOC,SAASoC,QAAQvD,KAAUnH,IACtEiJ,EAAMZ,OAASA,EAAO9E,GAEtB2C,EAAc8D,OAASrC,EAAMqC,OAC7B9D,EAAc+D,OAAStC,EAAMsC,UAY1B/D,EAAc8D,QAAS9D,CACjC,CAED6D,WAAWpC,GACP,MAAMzB,EAAgB,CAAC,EACvB,IAAKyB,EAAMqC,SAAWrC,EAAMsC,OAAQ,OAAO,EAC3C,MAAM5B,EAAShI,KAAK0C,MAAM4E,MAAMA,EAAMqC,QAChCf,EAAQ5I,KAAK0C,MAAM4E,MAAMA,EAAMsC,QAE/BU,EAAatC,EAAOC,SAASoC,QAAQ/C,EAAMsC,QAQjD,OAPIU,GAAc,IACdtC,EAAOC,SAASsC,OAAOD,EAAY,GACnC1B,EAAMZ,OAAS,KACfnC,EAAc8D,OAASrC,EAAMqC,OAC7B9D,EAAc+D,OAAStC,EAAMsC,UAG1B/D,EAAc8D,QAAS9D,CACjC,CAED8C,WAAW/C,GACP,MAAM+D,EAAS3J,KAAK0C,MAAM4E,MAAM1B,EAAO+D,QACjCC,EAAS5J,KAAK0C,MAAM4E,MAAM1B,EAAOgE,QAEjCL,EAAS3D,EAAO1C,GAAK0C,EAAO1C,IAAKC,EAAAA,EAAAA,MACjCuF,EAAO,CACTxF,GAAIqG,EACJI,OAAQ/D,EAAO+D,OACfC,OAAQhE,EAAOgE,QASnB,OAPA5J,KAAK0C,MAAM6E,MAAMgC,GAAUb,EAE3BiB,EAAOpC,MAAMlH,KAAKkJ,GAClBI,EAAOpC,MAAMjH,QAAO,CAACwG,EAAMnH,IAAMgK,EAAOpC,MAAM8C,QAAQvD,KAAUnH,IAChEiK,EAAOrC,MAAMlH,KAAKkJ,GAClBK,EAAOrC,MAAMjH,QAAO,CAACwG,EAAMnH,IAAMiK,EAAOrC,MAAM8C,QAAQvD,KAAUnH,IAEzD4J,CACV,CAEDC,WAAWD,GACP,MAAMb,EAAO,IAAK1I,KAAK0C,MAAM6E,MAAMgC,IAC7BI,EAAS3J,KAAK0C,MAAM4E,MAAMoB,EAAKiB,QAC/BC,EAAS5J,KAAK0C,MAAM4E,MAAMoB,EAAKkB,QAMrC,OAJAD,EAAOpC,MAAMgD,OAAOZ,EAAOpC,MAAM8C,QAAQd,GAAS,GAClDK,EAAOrC,MAAMgD,OAAOX,EAAOrC,MAAM8C,QAAQd,GAAS,UAE3CvJ,KAAK0C,MAAM6E,MAAMgC,GACjBb,CACV,E,wBC9PL,MAAM8B,EAAe,CACjBC,QAAS,OACTC,OAAQ,CACJC,KAAM,CACFzK,GAAI,CACA,gBAAiB,eACjB,gBAAiB,CAAE0J,OAAQ,UAAWgB,QAAS,cAC/C,iBAAkB,CAAEhB,OAAQ,WAAYgB,QAAS,eACjD,gBAAiB,CAAEhB,OAAQ,UAAWgB,QAAS,cAC/C,mBAAoB,CAAEhB,OAAQ,YAAagB,QAAS,gBACpD,cAAe,CAAEhB,OAAQ,oBAAqBgB,QAAS,cACvD,cAAe,CAAEhB,OAAQ,OAAQgB,QAAS,kBAC1C,gBAAiB,CAAEhB,OAAQ,oBAAqBgB,QAAS,gBAIjEC,aAAc,CACV3K,GAAI,CAAE,qBAAsB,SAGhC4K,QAAS,CACL5K,GAAI,CACA,iBAAkB,CAAE0J,OAAQ,OAAQgB,QAAS,kBAIrDG,UAAW,CACP7K,GAAI,CACA,mBAAoB,CAAE0J,OAAQ,YAAagB,QAAS,gBACpD,iBAAkB,CAAEhB,OAAQ,UAIpCoB,SAAU,CACN9K,GAAI,CACA,aAAc,CAAE0J,OAAQ,WAAYgB,QAAS,eAC7C,gBAAiB,CAAEhB,OAAQ,OAAQgB,QAAS,CAAC,gBAAiB,mBAC9D,kBAAmB,CAAEhB,OAAQ,YAAagB,QAAS,kBAI3DK,SAAU,CACN/K,GAAI,CACA,aAAc,CAAE0J,OAAQ,WAAYgB,QAAS,iBAC7C,gBAAiB,CAAEhB,OAAQ,OAAQgB,QAAS,CAAC,gBAAiB,oBAItEM,UAAW,CACPhL,GAAI,CACAiL,SAAU,CAAEvB,OAAQ,WAAYgB,QAAS,kBACzC,iBAAkB,CAAEhB,OAAQ,OAAQgB,QAAS,oBAIrDQ,QAAS,CACLlL,GAAI,CACA,mBAAoB,CAAE0J,OAAQ,OAAQgB,QAAS,CAAC,eAAgB,iBAChE,wBAAyB,CAAEhB,OAAQ,OAAQgB,QAAS,gBACpD,cAAe,CAAEhB,OAAQ,oBAAqBgB,QAAS,CAAC,eAAgB,mBAMlFS,EAAe,CACjBZ,QAAS,UACTC,OAAQ,CACJY,QAAS,CACLpL,GAAI,CACA,cAAe,CACX0J,OAAQ,oBACRgB,QAAS,gBAEb,mBAAoB,CAChBhB,OAAQ,oBACRgB,QAAS,CAAC,eAAgB,qBAOxCW,EAAiB,CACnBd,QAAS,WACTC,OAAQ,CACJc,SAAU,CACNtL,GAAI,CACA,wBAAyB,oBACzB,mBAAoB,aAI5BuL,SAAU,CACNvL,GAAI,CACA,WAAY,eAMtBwL,GAAkBC,EAAAA,EAAAA,GACpB,CACIzI,GAAI,WACJuH,QAAS,UACTC,OAAQ,CACJkB,QAAS,IAAKpB,GACdqB,UAAW,IAAKN,GAChBD,QAAS,IAAKD,IAElBS,QAAS,CACLC,QAAS,KACTC,SAAS,EACTC,SAAU,KACVC,SAAU,KACVC,UAAW,GACXC,UAAW,GACXC,QAAS,OAGjB,CACIzB,QAAS,CACL0B,YAAYC,EAAAA,EAAAA,IAAO,CACfR,QAAS,CAACD,EAAS3L,IAAW2L,EAAQC,QAAU5L,EAAM0H,OAG1D2E,cAAcD,EAAAA,EAAAA,IAAO,CACjBR,QAAUD,GAAaA,EAAQC,QAAU,OAG7CU,YAAYF,EAAAA,EAAAA,IAAO,CACfP,QAAUF,GAAaA,EAAQE,SAAU,IAG7CU,cAAcH,EAAAA,EAAAA,IAAO,CACjBP,QAAUF,GAAaA,EAAQE,SAAU,IAG7CW,aAAaJ,EAAAA,EAAAA,IAAO,CAChBN,SAAU,CAACH,EAAS3L,IAAW2L,EAAQG,SAAW9L,EAAM0H,OAG5D+E,eAAeL,EAAAA,EAAAA,IAAO,CAClBN,SAAWH,GAAaA,EAAQG,SAAW,OAG/CY,aAAaN,EAAAA,EAAAA,IAAO,CAChBL,SAAU,CAACJ,EAAS3L,IAAW2L,EAAQI,SAAW/L,EAAM0H,OAG5DiF,eAAeP,EAAAA,EAAAA,IAAO,CAClBL,SAAWJ,GAAaA,EAAQI,SAAW,OAG/Ca,cAAcR,EAAAA,EAAAA,IAAO,CACjBH,UAAW,CAACN,EAAS3L,IAAW2L,EAAQM,UAAYjM,EAAMiM,YAG9DY,gBAAgBT,EAAAA,EAAAA,IAAO,CACnBH,UAAYN,GAAaA,EAAQM,UAAY,KAGjDa,cAAcV,EAAAA,EAAAA,IAAO,CACjBJ,UAAW,CAACL,EAAS3L,IAAW2L,EAAQK,UAAYhM,EAAMgM,YAG9De,gBAAgBX,EAAAA,EAAAA,IAAO,CACnBJ,UAAYL,GAAaA,EAAQK,UAAY,KAGjDgB,YAAYZ,EAAAA,EAAAA,IAAO,CACfF,QAAS,CAACP,EAAS3L,IAAW2L,EAAQO,QAAUlM,EAAM0H,OAG1DuF,cAAcb,EAAAA,EAAAA,IAAO,CACjBF,QAAUP,GAAaA,EAAQO,QAAU,UAMzD,Q,4BCzLSgB,MAAM,sB,WAuB2C,S,WAyBC,S,qNAhDvDC,EAAAA,EAAAA,IAmDM,MAnDN,EAmDM,CAlDWC,EAAAA,WAAAA,EAAAA,EAAAA,OAAbC,EAAAA,EAAAA,IAwBQC,EAAA,C,MAxBeJ,MAAM,kBAAkBK,QAAQ,SAASC,MAAM,UAAtE,C,kBACI,IAgBQ,EAhBR5O,EAAAA,EAAAA,IAgBQ6O,EAAA,CAhBAC,KAAM,GAAC,C,kBACX,IAciB,EAdjB9O,EAAAA,EAAAA,IAciB+O,EAAA,CAdDC,MAAA,wBAA0B,C,kBACtC,IAKW,EALXhP,EAAAA,EAAAA,IAKWiP,EAAA,CALDlG,KAAK,OAAOmG,KAAK,OACtBC,UAAWC,EAAAA,SAASjH,UACpBkH,QAAK,eAAED,EAAAA,SAASnH,SAFrB,CAIeqH,MAAI,SAAC,IAAa,EAAbtP,EAAAA,EAAAA,IAAauP,M,KAJjC,iBAOAvP,EAAAA,EAAAA,IAKWiP,EAAA,CALDlG,KAAK,OAAOmG,KAAK,OACtBC,UAAWC,EAAAA,SAAShH,UACpBiH,QAAK,eAAED,EAAAA,SAASlH,SAFrB,CAIeoH,MAAI,SAAC,IAAa,EAAbtP,EAAAA,EAAAA,IAAawP,M,KAJjC,mB,gBAQRxP,EAAAA,EAAAA,IAEQ6O,EAAA,CAFAC,KAAM,EAAGF,MAAM,UAAvB,C,kBACI,IAAmB,EAAnBa,EAAAA,EAAAA,GAAmB,UAAAC,EAAAA,EAAAA,IAAdN,EAAAA,UAAQ,M,OAEjBpP,EAAAA,EAAAA,IAEQ6O,EAAA,CAFAC,KAAM,EAAGF,MAAM,QAAQI,MAAA,4BAA/B,C,kBACI,IAA4D,EAA5DhP,EAAAA,EAAAA,IAA4D2P,EAAA,CAAhDT,KAAK,OAAQU,KAAMR,EAAAA,WAA/B,C,kBAA0C,IAAK,M,KAA/C,e,kBAtBR,WA0BAX,EAAAA,EAAAA,IAuBQC,EAAA,C,MAvBMJ,MAAM,mBAAmBK,QAAQ,SAASC,MAAM,UAA9D,C,kBACI,IAgBQ,EAhBR5O,EAAAA,EAAAA,IAgBQ6O,EAAA,CAhBAC,KAAM,GAAC,C,kBACX,IAciB,EAdjB9O,EAAAA,EAAAA,IAciB+O,EAAA,CAdDC,MAAA,wBAA0B,C,kBACtC,IAKW,EALXhP,EAAAA,EAAAA,IAKWiP,EAAA,CALDlG,KAAK,OAAOmG,KAAK,QACtBC,UAAWC,EAAAA,SAASjH,UACpBkH,QAAK,eAAED,EAAAA,SAASnH,SAFrB,CAIeqH,MAAI,SAAC,IAAa,EAAbtP,EAAAA,EAAAA,IAAauP,M,KAJjC,iBAOAvP,EAAAA,EAAAA,IAKWiP,EAAA,CALDlG,KAAK,OAAOmG,KAAK,QACtBC,UAAWC,EAAAA,SAAShH,UACpBiH,QAAK,eAAED,EAAAA,SAASlH,SAFrB,CAIeoH,MAAI,SAAC,IAAa,EAAbtP,EAAAA,EAAAA,IAAawP,M,KAJjC,mB,gBAQRxP,EAAAA,EAAAA,IACQ6O,EAAA,CADAC,KAAM,EAAGF,MAAM,YAEvB5O,EAAAA,EAAAA,IAEQ6O,EAAA,CAFAC,KAAM,EAAGF,MAAM,QAAQI,MAAA,4BAA/B,C,kBACI,IAA6D,EAA7DhP,EAAAA,EAAAA,IAA6D2P,EAAA,CAAjDT,KAAK,QAASU,KAAMR,EAAAA,WAAhC,C,kBAA2C,IAAK,M,KAAhD,e,yGChDZX,EAAAA,EAAAA,IAUWQ,EAAA,CATNlG,KAAM8G,EAAAA,KACNC,MAAOD,EAAAA,MACPX,KAAMW,EAAAA,KACNE,OAAQF,EAAAA,OACRV,SAAUX,EAAAA,OACVa,QAAOD,EAAAA,MANZ,C,kBAQI,IAAsB,CAATZ,EAAAA,SAAb,WACAD,EAAAA,EAAAA,IAA2B,OAAAyB,EAAd,aADbC,EAAAA,EAAAA,IAAsBC,EAAAA,OAAA,WAAArP,IAAAA,O,KAR1B,wD,eAgBJ,GACIsP,KAAM,aACNC,MAAO,CACHlB,KAAMmB,OACNP,MAAOO,OACPtH,KAAMsH,OACNN,OAAQM,OACRT,KAAMS,QAGV3N,OACI,MAAO,CACH4N,QAAQ,EACRC,MAAO,KAEd,EAEDC,QAAS,CACLC,QACQC,EAAAA,EAAAA,GAAezP,KAAK2O,OACpB3O,KAAKqP,QAAS,EACVrP,KAAKsP,OAAOtN,aAAahC,KAAKsP,OAClCtP,KAAKsP,MAAQrN,YAAW,KACpBjC,KAAKqP,QAAS,CAAd,GACD,MAEHrP,KAAK0P,SAAS3J,MAAM,8BAE3B,I,QCxCT,MAAM4J,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,KAEpE,QFoDA,GACIT,KAAM,WACNU,OAAQ,CAAC,QAAS,WAAY,YAAa,YAE3CC,WAAY,CACRC,WAAUA,GAGdrO,OACI,MAAO,CACHsO,SAAU7O,MAEjB,EAED8O,SAAU,CACNC,WAEI,MAAM,SAAEC,GAAa5O,EAAQ,MAC7B,OAAOtB,KAAKY,SAAStB,MAAQ4Q,EAASlQ,KAAKY,SAAStB,OAAS,UAChE,EAED6Q,YACI,MAAQ,4CAA2CnQ,KAAK0C,MAAMpD,MAAM2D,SAASC,IAChF,IG3ET,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAEzF,Q,UCRS6K,MAAA,8B,IAcQV,MAAM,Y,yLAdnBC,EAAAA,EAAAA,IAiFM,MAjFN,GAiFM,EAhFFvO,EAAAA,EAAAA,IA+EsBqR,EAAA,CA9ElB/C,MAAM,SACNgD,IAAI,SACHtC,OAAK,S,0BAA+CkB,EAAAA,EAAIA,EAAAA,WAAWA,EAAAA,EAAIA,EAAAA,S,wBAAqDA,EAAAA,UAAI,GAAWA,EAAAA,S,4BAAuDA,EAAAA,uBAKlMqB,cAAe,GACfC,SAAQtB,EAAAA,UACRuB,QAAOvB,EAAAA,WACPwB,WAAUxB,EAAAA,SAXf,C,kBAaI,IAiEM,EAjENT,EAAAA,EAAAA,GAiEM,MAjEN,GAiEM,gBAhEFlB,EAAAA,EAAAA,IAMEoD,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IALiB1B,EAAAA,MAAM3P,MAAMiI,OAApBmB,K,WADX8E,EAAAA,EAAAA,IAMEoD,EAAA,CAJGhR,IAAK8I,EAAKxF,G,WACVmN,IAAK3H,EAAKxF,GACVyG,OAAQjB,EAAKiB,OACbC,OAAQlB,EAAKkB,QALlB,qCASUqF,EAAAA,QAAQ3P,QAAAA,EAAAA,EAAAA,OADlBkO,EAAAA,EAAAA,IAIEoD,EAAA,C,MAFGjH,OAAQsF,EAAAA,QAAQ3P,MACjBsK,OAAO,oBAHX,sCAwDE,aAlDF0D,EAAAA,EAAAA,IAQEoD,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAPiB1B,EAAAA,MAAM3P,MAAMgI,OAApBO,K,WADX2F,EAAAA,EAAAA,IAQEqD,EAAA,CANGjR,IAAKiI,EAAK3E,G,WACVmN,IAAKxI,EAAK3E,GACV2E,KAAMA,EACNiJ,SAAU7B,EAAAA,UAAU8B,MAAMC,GAAMA,EAAE9N,KAAO2E,EAAK3E,KAC9CuN,YAAQ,YAAOxB,EAAAA,gBAAgBpH,IAAI,UACnCoJ,mBAAmBhC,EAAAA,MAAMiC,SAASC,YAPvC,wEAoBApS,EAAAA,EAAAA,IAcEqS,EAAA,CAbEf,IAAI,WACJgB,UAAU,WACTzH,OAAQqF,EAAAA,UACRqC,WAAW,EACXC,UAAWtC,EAAAA,aACXuC,iBAAkB,CAAC,KACnBC,aAAYxC,EAAAA,8BACZyC,OAAMzC,EAAAA,UACN0C,YAAW1C,EAAAA,UACX2C,UAAS3C,EAAAA,oBACT4C,eAAc5C,EAAAA,oBACd6C,SAAQ7C,EAAAA,WACR8C,YAAW9C,EAAAA,gBAbhB,4HAgBAlQ,EAAAA,EAAAA,IAaEiT,EAAA,CAZE3B,IAAI,UACJ4B,cAAc,UACbC,kBAAmB,CAAC,oBACpBC,eAAe,EACfC,kBAAkB,EAClBC,qBAAsB,CAAC,SACvBC,aAAcrD,EAAAA,OACdsD,QAAS,EACTC,MAAO,EACPC,YAAWxD,EAAAA,6BACXyD,SAAQzD,EAAAA,WACR0D,YAAW1D,EAAAA,kBAZhB,yF,KAhER,gD,gDCAO,MAAM2D,GACjB7S,cACIC,KAAK6S,SAAW,EACnB,CAED3S,GAAGC,EAAOP,EAAKkT,GACX,MAAMC,EAAU,CAAC,EACjBA,EAAQnT,GAAOkT,EACf,MAAME,GAAoBC,EAAAA,GAAAA,IAAyBF,GACnDG,OAAOC,iBAAiBhT,EAAO6S,GAC/BhT,KAAK6S,SAASxS,KAAK,CACfF,QACA2S,QAASE,GAEhB,CAEDI,kBACIpT,KAAK6S,SAASnS,SAASoS,IACnBI,OAAOG,oBAAoBP,EAAQ3S,MAAO2S,EAAQA,QAAlD,GAEP,E,uJCrBDxF,EAAAA,EAAAA,IAiDM,OAhDFD,OAAK,SAAC,OAAM,C,SAGoB4B,EAAAA,UAAU3P,MAAMgU,SAASrE,EAAAA,KAAK/L,I,SAA2B+L,EAAAA,SAAS3P,QAAU2P,EAAAA,KAAK/L,G,SAA0B+L,EAAAA,QAAQ3P,QAAU2P,EAAAA,KAAK/L,G,aAA8B+L,EAAAA,SAAS3P,OAAS2P,EAAAA,UAAU3P,MAAMgU,SAASrE,EAAAA,KAAK/L,I,YAA8B+L,EAAAA,sB,kBAAsDA,EAAAA,sB,YAAgDA,EAAAA,KAAKjH,QAAUiH,EAAAA,KAAKhH,SAASvI,OAAM,E,cAAiCuP,EAAAA,KAAKjH,QAAUiH,EAAAA,KAAKhH,SAASvI,OAAM,E,cAAiCuP,EAAAA,KAAKjH,QAA8B,IAApBiH,EAAAA,KAAKhH,SAASvI,O,UAAqCuP,EAAAA,eAF9jBoB,IAAI,OACHnN,GAAI+L,EAAAA,KAAK/L,GAaT6K,OAAK,QAAEkB,EAAAA,QACPsE,MAAOtE,EAAAA,YAAW,kBAClBuE,SAAUvE,EAAAA,YACVwE,aAAU,oBAAExE,EAAAA,cAAAA,EAAAA,gBAAAA,IACZyE,UAAO,oBAAEzE,EAAAA,cAAAA,EAAAA,gBAAAA,IACT0E,aAAU,oBAAE1E,EAAAA,cAAAA,EAAAA,gBAAAA,IACZ2E,WAAQ,oBAAE3E,EAAAA,cAAAA,EAAAA,gBAAAA,KAtBf,CAyBcA,EAAAA,SAAAA,EAAAA,EAAAA,OADVzB,EAAAA,EAAAA,IAMEqG,EAAA,C,MAJG3Q,GAAI+L,EAAAA,KAAK/L,GACT6E,QAASkH,EAAAA,KAAKlH,QACdgE,QAASkD,EAAAA,QAAQ3P,QAAU2P,EAAAA,KAAK/L,GAChC4Q,SAAQ7E,EAAAA,kBALb,+DASUA,EAAAA,cAAAA,EAAAA,EAAAA,OADVzB,EAAAA,EAAAA,IAOEuG,EAAA,C,MALG7Q,GAAI+L,EAAAA,KAAK/L,GACT4E,KAAMmH,EAAAA,KAAK+E,cACX9L,WAAY+G,EAAAA,KAAK/G,WACjB+L,MAAOhF,EAAAA,KAAKgF,MACZC,OAAQjF,EAAAA,KAAKiF,QANlB,qEASkCjF,EAAAA,iBAAAA,EAAAA,EAAAA,OAAlC3B,EAAAA,EAAAA,IAOS,U,MAPDD,MAAM,cACT8G,YAAS,sBAAV,QAAe,WACdC,UAAO,sBAAR,QAAa,WACZ3D,WAAQ,sBAAT,QAAc,WACbrC,QAAK,8BAAOa,EAAAA,mBAAAA,EAAAA,qBAAAA,IAAiB,YAJlC,EAMIlQ,EAAAA,EAAAA,IAAYsV,IANhB,sBAzCJ,M,WCAKhH,MAAM,OAAOgD,IAAI,Q,8EAAtB/C,EAAAA,EAAAA,IAEM,MAFN,GAEM,EADFvO,EAAAA,EAAAA,IAAmCuV,EAAA,CAAlBC,OAAQtF,EAAAA,QAAM,oBADnC,I,4DAYJ,IAAeuF,EAAAA,EAAAA,IAAgB,CAC3BtF,KAAM,eACNU,OAAQ,CAAC,WAAY,QAAS,QAAS,QACvCC,WAAY,CACR4E,cAAaA,GAAAA,IAEjBtF,MAAO,CACHjM,GAAIkM,OACJrH,QAASqH,OACTrD,QAAS2I,SAGbjT,OACI,MAAO,CACH8S,OAAQ,KAEf,EAEDI,UACI3U,KAAKuU,OAAS,IAAIK,GAAAA,GAAO,CACrB7M,QAAS/H,KAAK+H,QACd8M,WAAY,CACRC,GAAAA,EACAC,GAAAA,GACAC,GAAAA,EAAAA,UAAe,CACXC,UAAW,CAAC,aAGpBC,UAAWlV,KAAK+L,QAChBoJ,SAAUnV,KAAK+L,UAGnB/L,KAAKuU,OAAOrU,GAAG,OAAQF,KAAKoV,aAC/B,EAEDC,gBACIrV,KAAKuU,OAAOvQ,SACf,EAEDuL,QAAS,CACL6F,eACIpV,KAAKsV,KAAK,eACoB,YAA1BtV,KAAKuU,OAAOgB,UACZvV,KAAKwV,SAASpM,WAAWpJ,KAAKkD,KAE9BlD,KAAKwV,SAAS9P,OAAO,aAAc,CAC/BxC,GAAIlD,KAAKkD,GACTgH,IAAK,CACDnC,QAAS/H,KAAKuU,OAAOgB,aAG7BvV,KAAKyV,MAAM,SAAUzV,KAAKuU,OAAOmB,WAExC,GAGLC,MAAO,CACH5N,UACI/H,KAAKuU,OAAOqB,SAASC,WAAW7V,KAAK+H,QACxC,EAEDgE,UACI/L,KAAKuU,OAAOuB,YAAY9V,KAAK+L,SACzB/L,KAAK+L,SACL7J,GAAQC,IAAK,kCAAiCnC,KAAK+L,YAAY/L,KAAKkD,MACpElD,KAAKuU,OAAOqB,SAASG,MAAM,QAE3B/V,KAAKuU,OAAOqB,SAASI,MAE5B,KC3ET,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,MAEpE,U,iECPc3I,MAAM,S,0BAA2DmB,EAAAA,EAAAA,GAAM,qB,IACvEnB,MAAM,W,0BAEHmB,EAAAA,EAAAA,GAAM,qB,IACTnB,MAAM,c,2CALhBC,EAAAA,EAAAA,IAMM,OANDD,MAAM,oBAAoBgD,IAAI,YAAaI,WAAQ,8BAAexB,EAAAA,cAAAA,EAAAA,gBAAAA,IAAY,sBAAnF,EACIT,EAAAA,EAAAA,GAAsE,OAAtE,IAAsEC,EAAAA,EAAAA,IAA9CQ,EAAAA,MAAQA,EAAAA,MAAK,wBAArC,GAAuEgH,IACvEzH,EAAAA,EAAAA,GAEO,OAFP,IAEOC,EAAAA,EAAAA,IADAQ,EAAAA,OAASA,EAAAA,cAAcA,EAAAA,QAAM,0BADpC,GAESiH,IACT1H,EAAAA,EAAAA,GAAoE,OAApE,IAAoEC,EAAAA,EAAAA,IAAvCQ,EAAAA,WAAaA,EAAAA,WAAU,QALxD,I,CAYJ,QAAeuF,EAAAA,EAAAA,IAAgB,CAC3BtF,KAAM,oBACNU,OAAQ,CAAC,WAAY,QAAS,QAAS,QACvCC,WAAY,CAAC,EACbV,MAAO,CACHjM,GAAIkM,OACJtH,KAAMsH,OACN6E,MAAO7E,OACP8E,OAAQ9E,OACRlH,WAAYkH,QAGhBG,QAAS,CACL4G,cAAcC,GACV,IAAIC,EAAgB,GASpB,OARAD,EAAQ1V,SAAQ,CAACwT,EAAQvU,KACrB0W,GAAiBnC,EAAOoC,OACpB3W,IAAMyW,EAAQ1W,OAAS,EACvB2W,GAAoC,IAAnBD,EAAQ1W,OAAe,QAAU,SAC3CC,EAAIyW,EAAQ1W,OAAS,IAC5B2W,GAAiB,KACrB,IAEGA,CACV,EAEDE,eACsB,WAAdvW,KAAK8H,MAAmC,gBAAd9H,KAAK8H,KAC/BoL,OAAOsD,KAAKxW,KAAKkI,YACI,QAAdlI,KAAK8H,KACZoL,OAAOsD,KAAM,sBAAqBxW,KAAKyB,KAAKyG,cACvB,SAAdlI,KAAK8H,KACZoL,OAAOsD,KAAM,mCAAkCxW,KAAKyB,KAAKyG,cACpC,QAAdlI,KAAK8H,MACZoL,OAAOsD,KAAKxW,KAAKkI,WAExB,KC1CT,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,4ECHO,SAASuO,GAAYC,GAGxB,MAAMC,EACF,4LAEJ,GAAIA,EAAMC,KAAKF,GAAU,CAErB,MAAMG,EAAQH,EAAQI,QAAQ,2BAA4B,IAAItX,MAAM,IAE9DuX,EAAOF,EAAMlQ,MACnB,IACIqQ,EACArX,EAFAsX,EAAM,EAIV,GAAqB,IAAjBJ,EAAMnX,OAAc,CAGpB,IADAmX,EAAMhQ,UACDlH,EAAI,EAAGA,EAAIkX,EAAMnX,OAAQC,GAAK,EAC/BsX,IAAQtX,EAAI,GAAKuX,SAASL,EAAMlX,GAAI,IAExCqX,EAAQ,GAAMC,EAAM,GACN,KAAVD,EACAA,EAAQ,IACS,KAAVA,IACPA,EAAQ,IAEf,KAAM,CAEH,IAAKrX,EAAI,EAAGA,EAAIkX,EAAMnX,OAAQC,GAAK,EAC/BsX,IAAStX,EAAI,EAAK,EAAI,GAAKuX,SAASL,EAAMlX,GAAI,IAElDqX,EAAQ,GAAMC,EAAM,GACN,KAAVD,IACAA,EAAQ,IAEf,CAED,GAAIA,IAAUD,EAAM,CAChB,MAAMI,EAAQT,EAAQU,MAAMT,GAAO,GACnC,OAAOQ,CACV,CACJ,CACD,OAAO,CACV,CAEM,SAASE,GAAkBtP,GAE9B,MAAMuP,EAAab,GAAY1O,GAC/B,GAAIuP,EACA,MAAO,CACHxP,KAAM,OACNI,WAAYoP,GAIpB,MAAMC,EAAaC,GAAIC,QAAQ1P,GAC/B,GAAIwP,EAAW7X,OAAS,EACpB,MAAO,CACHoI,KAAM,MACNI,WAAYqP,EAAW,IAK/B,IACI,MAAM9V,EAAOuD,KAAK0S,MAAM3P,GACxB,GAAoB,WAAhBtG,EAAKkI,OACL,MAAO,CACH7B,KAAM,SACNI,WAAYzG,EAAKkW,OACdlW,EAKd,CAFC,MAAOmW,GAER,CAGD,MAAMC,EAASC,GAAAA,GAAa/P,EAAS,OAAOzH,QACvCwG,GAASA,EAAKxH,MAAMyY,WAAW,eAEpC,GAAIF,EAAOnY,OAAS,EAChB,MAAO,CACHoI,KAAM,cACNI,WAAY2P,EAAO,GAAGG,MAK9B,MAAMC,EAAOH,GAAAA,GAAa/P,EAAS,OACnC,OAAIkQ,EAAKvY,OAAS,GACP,CACHoI,KAAM,MACNI,WAAY+P,EAAK,GAAGD,KAI/B,CAEM,SAASE,GAAoBpQ,EAAMI,GAEtC,OADAhG,GAAQC,IAAI2F,EAAMI,GACX,IAAIiQ,SAAQ,CAACC,EAASC,KACZ,QAATvQ,EACAwQ,KAAAA,IAAUpQ,GAAY1G,MAAMC,IACxBS,GAAQC,IAAIV,EAAK8W,SACjB,MAAMC,EAAU/W,EAAKA,KAAK2V,MAAM,yBAChCgB,EAAQ,CACJnE,MAAOuE,EAAQ,GACftE,OAAQ,CAAC,CAAEoC,OAAQ,aACnBpO,WAAYzG,EAAK8W,QAAQE,aAH7B,IAKD5W,OAAO6W,IACNL,EAAOK,EAAP,IAKJ,IAAIC,KAAAA,OAAWzQ,GAAazG,IACxB,MAAMmX,EAAOnX,EAAKA,KAAK,UAEhBmX,EAAKC,OACZT,EACIpT,KAAK0S,MAAM1S,KAAKD,UAAU6T,IAD9B,GAIP,GAER,C,eLzED,IAAepE,EAAAA,EAAAA,IAAgB,CAC3BtF,KAAM,eACNU,OAAQ,CAAC,WAAY,QAAS,QAAS,OAAQ,UAAW,WAAY,WAAY,aAClFC,WAAY,CACRiJ,KADQ,GAERC,UAASA,IAEb5J,MAAO,CACHtH,KAAM,CACFC,KAAMrD,OACNuU,UAAU,GAEdlI,SAAU,CACNhJ,KAAM4M,QACNuE,SAAS,IAIjBxX,OACI,MAAO,CACH2G,EAAGpI,KAAK6H,KAAKO,EACbC,EAAGrI,KAAK6H,KAAKQ,EACbC,EAAGtI,KAAK6H,KAAKS,EACb4Q,EAAGlZ,KAAK6H,KAAKqR,EACblR,OAAQ,KAGf,EAEDuH,QAAS,CACL4J,eACInZ,KAAKsV,KAAK,CACNxN,KAAM,aACND,KAAM7H,KAAK6H,KAAK3E,IAEvB,EAEDkW,eACIpZ,KAAKsV,KAAK,CACNxN,KAAM,aACND,KAAM7H,KAAK6H,KAAK3E,IAEvB,EAEDmW,oBACIrZ,KAAKsV,KAAK,gBAAiB,CAAEzN,KAAM7H,KAAK6H,KAAK3E,IAChD,EAEDoW,gBACItZ,KAAKuZ,eAAiB,CAClBvZ,KAAKwZ,OAAO,kBAAmBxZ,KAAKyZ,4BACpCzZ,KAAKwZ,OAAO,kBAAmBxZ,KAAKyZ,4BACpCzZ,KAAKwZ,OAAO,sBAAuBxZ,KAAKyZ,4BACxCzZ,KAAKwZ,OAAO,uBAAwBxZ,KAAKyZ,4BAEhD,EAEDC,mBACI,IAAK1Z,KAAK2Z,MAAM9R,KAAM,OACtB,MAAM+R,EAAS5Z,KAAK2Z,MAAM9R,KAAKgS,aAC/B7Z,KAAKwV,SAAS1L,WAAW,CACrB5G,GAAIlD,KAAK6H,KAAK3E,GACdgH,IAAK,CACD4P,cAAeF,KAGvB5Z,KAAKyV,MAAM,oBACd,EAEDgE,6BAEIzZ,KAAKwV,SAAS1L,WAAW,CACrB5G,GAAIlD,KAAK6H,KAAK3E,GACdgH,IAAK,CACD9B,EAAGpI,KAAKgI,OAAOO,SACfF,EAAGrI,KAAKgI,OAAOQ,SAAWxI,KAAKgI,OAAO8R,cAAgB,EACtDxR,EAAGtI,KAAKgI,OAAOS,aACfF,SAAUvI,KAAKgI,OAAOO,SACtBC,SAAUxI,KAAKgI,OAAOQ,SAAWxI,KAAKgI,OAAO8R,cAAgB,EAC7DrR,aAAczI,KAAKgI,OAAOS,aAC1BqR,cAAe9Z,KAAK2Z,MAAM9R,KAAKgS,eAG1C,EAEDE,iBAAiBhS,GACb,MAAMG,EAAamP,GAAkBtP,GACjCG,IACAhG,GAAQC,IAAK,8CAA6C6C,KAAKD,UAAUmD,MACzElI,KAAKwV,SAAS9P,OAAO,aAAc,CAC/BxC,GAAIlD,KAAK6H,KAAK3E,GACdgH,IAAK,CACDpC,KAAMV,EAAU2R,UAChB7Q,WAAYA,EAAWA,WACvB8L,cAAe9L,EAAWJ,QAIV,WAApBI,EAAWJ,KACX9H,KAAKwV,SAAS9P,OAAO,aAAc,CAC/BxC,GAAIlD,KAAK6H,KAAK3E,GACdgH,IAAK,CACD+J,MAAO/L,EAAW+L,MAClBC,OAAQhM,EAAWgM,OACnBhM,WAAYA,EAAWA,WACvB8R,OAAQ9R,KAGW,gBAApBA,EAAWJ,KAClB9H,KAAKwV,SAAS9P,OAAO,aAAc,CAC/BxC,GAAIlD,KAAK6H,KAAK3E,GACdgH,IAAK,CACD+J,WAAOpU,EACPqU,YAAQrU,EACRqI,WAAYA,EAAWA,WACvB8R,OAAQ9R,KAIhBgQ,GAAoBhQ,EAAWJ,KAAMI,EAAWA,YAAY1G,MAAMoX,IAC9D1W,GAAQC,IAAK,gDAA+CyW,KAC5D5Y,KAAKwV,SAAS9P,OAAO,aAAc,CAC/BxC,GAAIlD,KAAK6H,KAAK3E,GACdgH,IAAK,CACD+J,MAAO2E,EAAK3E,MACZC,OAAQ0E,EAAK1E,OACbhM,WAAY0Q,EAAK1Q,WACX0Q,EAAK1Q,WAAaA,EAAWA,WACnC8R,OAAQpB,IAPhB,IAaf,GAGLjE,UAEI3U,KAAKia,SAAW,IAAIC,eAAela,KAAK0Z,kBACxC1Z,KAAKia,SAASE,QAAQna,KAAK2Z,MAAM9R,MAEjC7H,KAAKwV,SAAS1L,WAAW,CACrB5G,GAAIlD,KAAK6H,KAAK3E,GACdgH,IAAK,CACD3B,SAAUvI,KAAK6H,KAAKO,EACpBI,SAAUxI,KAAK6H,KAAKQ,EACpByR,cAAe9Z,KAAK6H,KAAKqR,EAAIlZ,KAAK6H,KAAKqR,EAAIlZ,KAAK2Z,MAAM9R,KAAKgS,gBAI/D7Z,KAAK6H,KAAKG,SACVhI,KAAKgI,OAAShI,KAAK0C,MAAMpD,MAAMgI,MAAMtH,KAAK6H,KAAKG,QAC/ChI,KAAKsZ,gBACLtZ,KAAKyZ,6BAEZ,EAEDW,iBACIlY,GAAQC,IAAI,oCAAqCnC,KAAK6H,KAAK3E,IAC3DlD,KAAKia,SAASI,aACdra,KAAKuZ,eAAe7Y,SAAS4Z,GAAwBA,KACxD,EAEDC,cACIrY,GAAQC,IAAI,kCAAmCnC,KAAK6H,KAAK3E,IACzDlD,KAAKia,SAASI,aACdra,KAAKuZ,eAAe7Y,SAAS4Z,GAAwBA,KACxD,EAEDtK,SAAU,CACNwK,SACI,MAAO,CACHC,MAAQ,GAAEza,KAAKsI,MACfoS,UAAY,aAAY1a,KAAKoI,QAAQpI,KAAKqI,OAC1C,aAAc,qBACd,iBAAkB,qBAClB,UAAWrI,KAAK2a,MAEvB,EAEDC,wBACI1Y,GAAQC,IAAInC,KAAKwV,SAASzS,OAC1B,IAAI+N,GAAW,EASf,OARArM,OAAOK,QAAQ9E,KAAKwV,SAASzS,OAAOgO,MAAK,EAAEtN,EAAQoX,KAC3CpX,IAAWzD,KAAKwV,SAAS/R,WACzBoX,EAAS1O,UAAUmH,SAAStT,KAAK6H,KAAK3E,MACtC4N,GAAW,GACJ,MAIRA,CACV,EAEDgK,SACI,OAAO9a,KAAK6H,KAAKC,OAASV,EAAU0R,IACvC,EAEDiC,cACI,OAAO/a,KAAK6H,KAAKC,OAASV,EAAU2R,SACvC,EAED4B,QACI,IAAIA,EAAQ,EACRK,EAAUhb,KAAK6H,KACnB,MAAOmT,EAAQhT,OACX2S,GAAS,EACTK,EAAUhb,KAAK0C,MAAMpD,MAAMgI,MAAM0T,EAAQhT,QAE7C,OAAIhI,KAAKmM,UAAU7M,MAAMgU,SAAStT,KAAK6H,KAAK3E,IACjCyX,EAAQ,EAEZA,CACV,EAEDM,iBACI,OAAoC,IAAhCjb,KAAKmM,UAAU7M,MAAMI,UACpBM,KAAKmM,UAAU7M,MAAMgU,SAAStT,KAAK6H,KAAK3E,GAEhD,GAGLyS,MAAO,CAEH,gBAAiB,WAEb3V,KAAKoI,EAAIpI,KAAK6H,KAAKU,QACtB,EAED,gBAAiB,WACbvI,KAAKqI,EAAIrI,KAAK6H,KAAKW,QACtB,EAED,oBAAqB,WACjBxI,KAAKsI,EAAItI,KAAK6H,KAAKY,YACtB,EAED,SAAU,WAENzI,KAAKwV,SAAS1L,WAAW,CACrB5G,GAAIlD,KAAK6H,KAAK3E,GACdgH,IAAK,CAAE3B,SAAUvI,KAAK6H,KAAKO,IAElC,EAED,SAAU,WACNpI,KAAKwV,SAAS1L,WAAW,CACrB5G,GAAIlD,KAAK6H,KAAK3E,GACdgH,IAAK,CAAE1B,SAAUxI,KAAK6H,KAAKQ,IAElC,EAED,SAAU,WACNrI,KAAKwV,SAAS1L,WAAW,CACrB5G,GAAIlD,KAAK6H,KAAK3E,GACdgH,IAAK,CAAEzB,aAAczI,KAAK6H,KAAKS,IAEtC,EAED,cAAe,WACPtI,KAAK6H,KAAKG,QACVhI,KAAKgI,OAAShI,KAAK0C,MAAMpD,MAAMgI,MAAMtH,KAAK6H,KAAKG,QAC/ChI,KAAKsZ,gBACLtZ,KAAKyZ,+BAELzZ,KAAKgI,OAAS,KACdhI,KAAKuZ,eAAe7Y,SAAS4Z,GAAwBA,MACrDta,KAAKuZ,eAAiB,GAE7B,KMpUT,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,MAEpE,U,UCPQxL,MAAA,iEACA0M,MAAM,QACNb,OAAO,QACPsB,MAAM,8B,qGAJV5N,EAAAA,EAAAA,IAmBM,MAnBN,GAmBM,EAbFkB,EAAAA,EAAAA,GAME,QANI6B,IAAI,QACNtC,MAAA,mBACCoN,EAAC,KAAO5N,EAAAA,MAAMA,EAAAA,QAAQA,EAAAA,OAAOA,EAAAA,QAAQA,EAAAA,OAAOA,EAAAA,QAAQA,EAAAA,MAAMA,EAAAA,KAC1D6N,OAAQxM,EAAAA,MACRyM,YAAazM,EAAAA,cAAa,EAC3B0M,KAAK,QALT,YAOA9M,EAAAA,EAAAA,GAKE,WAJG+M,OAAM,MAAQ3M,EAAAA,iBAAiBA,EAAAA,EAAAA,sBAAsCA,EAAAA,gBAErE8L,UAAS,aAAenN,EAAAA,OAAOA,EAAAA,cAAcA,EAAAA,MAC9C+N,KAAK,WAJT,Y,2BAaR,IACIpM,KAAM,eACNU,OAAQ,CAAC,QAAS,IAAK,IAAK,QAE5BT,MAAO,CACHxF,OAAQ,CACJ7B,KAAMsH,OACN4J,UAAU,GAEdpP,OAAQ,CACJ9B,KAAMsH,OACN4J,UAAU,GAEdrK,KAAM,CACF7G,KAAMsH,OACN6J,QAAS,IAEb1F,MAAO,CACHzL,KAAMsH,OACN6J,QAAS,WAEbuC,cAAe,CACX1T,KAAM2T,OACNxC,QAAS,IAIjBxX,OACI,MAAMia,EAAa1b,KAAK0C,MAAMpD,MAAMgI,MAAMtH,KAAK2J,QACzCgS,EAAa3b,KAAK0C,MAAMpD,MAAMgI,MAAMtH,KAAK4J,QAK/C,OAJK+R,GACDzI,OAAOC,iBAAiB,YAAanT,KAAK4b,YAGvC,CACHF,aACAC,aACAE,GAAI,EACJC,GAAI,EACJC,IAAK,EACLC,IAAK,EACLC,IAAK,EACLC,IAAK,EACLC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EAEX,EAED3H,UACI3U,KAAK2Z,MAAM4C,MAAMpJ,iBAAiB,QAASnT,KAAKoO,SAChDpO,KAAK4b,YACR,EAEDvG,gBACInC,OAAOG,oBAAoB,YAAarT,KAAK4b,WAChD,EAEDrM,QAAS,CACLnB,UACIlM,GAAQC,IAAI,QACf,EAEDyZ,aACI,MAAMY,EAAgBhH,SAASiH,cAAe,QAAOzc,KAAK2J,YACpD+S,EAAgBlH,SAASiH,cAAe,QAAOzc,KAAK4J,YACpD+S,EAAY3c,KAAK4c,eAAeJ,EAAexc,KAAK0b,YACpDmB,EAAY7c,KAAK4c,eAAeF,EAAe1c,KAAK2b,aAEnDE,EAAIC,EAAIC,EAAKC,EAAKC,EAAKC,EAAKC,EAAIC,EAAIC,IAAMS,EAAAA,GAAAA,GAC7CH,EAAUvU,EACVuU,EAAUtU,EACVsU,EAAUrU,EACVqU,EAAUzD,EACV2D,EAAUzU,EACVyU,EAAUxU,EACVwU,EAAUvU,EACVuU,EAAU3D,EACV,CAAE6D,OAAQ/c,KAAKwb,gBAGnBxb,KAAK6b,GAAKA,EACV7b,KAAK8b,GAAKA,EACV9b,KAAK+b,IAAMA,EACX/b,KAAKgc,IAAMA,EACXhc,KAAKic,IAAMA,EACXjc,KAAKkc,IAAMA,EACXlc,KAAKmc,GAAKA,EACVnc,KAAKoc,GAAKA,EACVpc,KAAKqc,GAAKA,CACb,EAEDW,IAAI1d,GACA,OAAOA,EAAQU,KAAKid,KAAK3d,MAAQU,KAAKoI,EAAE9I,KAC3C,EAEDsd,eAAeM,EAASzb,GACpB,MAAM0b,EAAOD,EAAQE,wBACfC,EAAKC,iBAAiBJ,GACtBK,EAAWC,WAAWH,EAAGI,aAAeD,WAAWH,EAAGK,cAY5D,MAAO,CACHtV,EAAG3G,EAAOA,EAAK8G,SAAWvI,KAAKgd,IAAIG,EAAK/U,GACxCC,EAAG5G,EAAOA,EAAK+G,SAAWxI,KAAKgd,IAAIG,EAAK9U,GACxCC,EAAG7G,EAAOA,EAAKgH,aAAe8U,EAAWvd,KAAKgd,IAAIG,EAAK1C,OACvDvB,EAAGgE,EAAQS,aAAe,EAEjC,GAGLhI,MAAO,CACH+F,WAAY,CACRkC,MAAM,EACN9K,UACI9S,KAAK4b,YACR,GAGLD,WAAY,CACRiC,MAAM,EACN9K,UACI9S,KAAK4b,YACR,GAGLxT,EAAG,CACCwV,MAAM,EACN9K,UACI9S,KAAK4b,YACR,GAGLvT,EAAG,CACCuV,MAAM,EACN9K,UACI9S,KAAK4b,YACR,GAGLqB,KAAM,CACFW,MAAM,EACN9K,UACI9S,KAAK4b,YAAW,EACnB,KChLb,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,MAEpE,U,WV8FA,IAAepH,EAAAA,EAAAA,IAAgB,CAC3BtF,KAAM,iBACNU,OAAQ,CAAC,WAAY,QAAS,QAAS,OAAQ,UAAW,WAAY,WAAY,YAAa,WAC/FC,WAAY,CACRgO,kBADQ,KAERC,SAFQ,MAGRC,WAHQ,KAIRC,aAJQ,GAKRC,aALQ,IASZC,UACI,MAAO,CACH9V,GAAG4H,EAAAA,EAAAA,KAAS,IAAMhQ,KAAKoI,IACvBC,GAAG2H,EAAAA,EAAAA,KAAS,IAAMhQ,KAAKqI,IACvB4U,MAAMjN,EAAAA,EAAAA,KAAS,IAAMhQ,KAAKid,OAEjC,EAEDxb,OACI,MAAO,CACH2G,EAAG,EACHC,EAAG,EACH4U,KAAM,EACN9Q,UAAW,GACXgS,SAAU,IAAIvL,GAErB,EAEDrD,QAAS,CAGL6O,QAAQje,GACJ,MAAMke,EAASre,KAAKse,iBAAiBne,EAAMoe,QAASpe,EAAMqe,SACpD5W,GAASzE,EAAAA,EAAAA,MACfnD,KAAKwV,SAAS9P,OAAO,aAAc,CAC/BxC,GAAI0E,EACJE,KAAMV,EAAU0R,KAChB/Q,QAAS,GACTK,EAAGiW,EAAOjW,EAAI,GACdC,EAAGgW,EAAOhW,EAAI,GACdC,EAAG,IACH4Q,EAAG,KAEPlZ,KAAKsV,KAAK,CACNxN,KAAM,cACND,KAAMD,GAOb,EAED6W,gBAAgB5W,GACZ7H,KAAKsV,KAAK,CACNxN,KAAM,gBACND,KAAMA,EAAK3E,KAEfhB,GAAQC,IAAInC,KAAK0e,MAAMpf,MAAOU,KAAK+L,QAAQzM,MAC9C,EAEDuK,YAAY1J,GACR,GAAIH,KAAK+L,QAAQzM,MAAO,OACxB,MAAMqf,EAAc3e,KAAKmM,UAAU6Q,KAAK4B,GAAOA,EAAG1b,KAClDhB,GAAQC,IAAK,yBAAwBwc,KACrC3e,KAAKmM,UAAY,GACjBnM,KAAKsV,KAAK,eACVtV,KAAKwV,SAAS9P,OAAO,cAAeiZ,GAEpCxe,EAAM0e,gBACT,EAED7X,KAAK7G,GAC0B,OAAvBH,KAAK+L,QAAQzM,QACbU,KAAKwV,SAASxO,OACd7G,EAAM0e,iBAEb,EAED5X,KAAK9G,GAC0B,OAAvBH,KAAK+L,QAAQzM,QACbU,KAAKwV,SAASvO,OACd9G,EAAM0e,iBAEb,EAGDC,UAAU3e,GACNH,KAAKoI,EAAIjI,EAAM4e,WACf/e,KAAKqI,EAAIlI,EAAM6e,UACfhf,KAAKwV,SAASvR,gBAAgB,IAAKjE,KAAKoI,GACxCpI,KAAKwV,SAASvR,gBAAgB,IAAKjE,KAAKqI,EAC3C,EAED4W,WAAW9e,GACPH,KAAKid,KAAO9c,EAAM8c,KAClBjd,KAAK2Z,MAAMuF,OAAOC,QAAQhf,EAAM8c,KACnC,EAEDmC,8BAA8BxH,GAC1B5X,KAAK2Z,MAAM0F,QAAQC,YAAY1H,EAAE2H,WAAY3H,EAAE4H,YAClD,EAEDC,qBAAqBtf,IACZA,EAAMF,QAAUE,EAAMyJ,OACvB5J,KAAKsV,KAAK,CACNxN,KAAM,iBACND,KAAM1H,EAAMyJ,OAAO1G,KAEhB/C,EAAMuf,UACbvf,EAAMyJ,OAAO+V,UAAU/a,IAAI,gBAE3BzE,EAAMuf,QAAQ3O,MAAMnH,IAChB,MAAMuT,EAAOvT,EAAOwT,wBACpB,QACID,EAAKyC,MAAQzf,EAAMoe,SAChBpB,EAAK0C,OAAS1f,EAAMoe,SACpBpB,EAAK2C,KAAO3f,EAAMqe,SAClBrB,EAAK4C,QAAU5f,EAAMqe,WAExBxe,KAAKsV,KAAK,CACNxN,KAAM,iBACND,KAAM+B,EAAO1G,MAEV,EAEX,IAGX,EAED8c,UAAU7f,GAGN,IAAIF,EAFJD,KAAKyf,qBAAqBtf,IAGrBA,EAAMF,QAAUE,EAAMyJ,OAEvB3J,EAAS,CAACE,GACHA,EAAMF,SAEbA,EAASE,EAAMF,QAInB,MAAMqH,EAAQrH,EAAO+c,KAAKpF,GAAM5X,KAAK0C,MAAMpD,MAAMgI,MAAMsQ,EAAEhO,OAAO1G,MAC1D8F,EAAU/I,EAAO+c,KAAKpF,GAAMA,EAAEhO,OAAO1G,KACrC+c,EAAW,GASjB,GARA3Y,EAAM5G,SAASmH,IACPA,EAAKG,SAAWgB,EAAQsK,SAASzL,EAAKG,SACtCiY,EAAS5f,KAAK,CACVsJ,OAAQ9B,EAAKG,OACb4B,OAAQ/B,EAAK3E,IAErB,IAEA+c,EAASvgB,OAAS,EAAG,CACrBM,KAAKsV,KAAK,CAAExN,KAAM,kBAAmBsE,UAAW6T,IAChD,MAAMC,EAAW/Z,KAAKga,KAClBhgB,EAAMigB,KAAK,GAAKjgB,EAAMigB,KAAK,GAAKjgB,EAAMigB,KAAK,GAAKjgB,EAAMigB,KAAK,IAI/D,KAAIF,EAAW,IAOX,OALAlgB,KAAKsV,KAAK,YACV2K,EAASvf,SAAS2f,IACdrgB,KAAKwV,SAAS9P,OAAO,aAAc2a,EAAnC,GAKZ,CAIApgB,EAAOS,SAASkX,IACZ,MAAM/P,EAAO7H,KAAK0C,MAAMpD,MAAMgI,MAAMsQ,EAAEhO,OAAO1G,IACzC2E,EAAKG,QACThI,KAAKwV,SAAS1L,WAAW,CACrB5G,GAAI0U,EAAEhO,OAAO1G,GACbgH,IAAK,CACD3B,SAAUqP,EAAE0I,UAAU,GACtB9X,SAAUoP,EAAE0I,UAAU,KAJ9B,GAQP,EAEDC,oBAAoBpgB,GAchB,GAVIH,KAAKkM,SAAS5M,QACd4C,GAAQC,IAAI,yCAA0CnC,KAAKiM,SAAS3M,MAAO,KAAMU,KAAKkM,SAAS5M,OAC/FU,KAAKwV,SAAS9P,OAAO,WAAY,CAC7BiE,OAAQ3J,KAAKkM,SAAS5M,MACtBsK,OAAQ5J,KAAKiM,SAAS3M,QAE1BU,KAAKsV,KAAK,kBAIVtV,KAAKoM,UAAU9M,MAAMI,OAAS,EAG9B,OAFAwC,GAAQC,IAAI,+DACZnC,KAAKsV,KAAK,kBAMd,GAAInV,EAAMqgB,UAAW,CACbrgB,EAAMqgB,UAAU5W,QAChBzJ,EAAMqgB,UAAU5W,OAAO+V,UAAUc,OAAO,gBAG5C,MAAMC,EAAW,GACjB1gB,KAAKmM,UAAUzL,SAASkX,IACpB,MAAM/P,EAAO7H,KAAK0C,MAAMpD,MAAMgI,MAAMsQ,EAAE1U,IACjC2E,EAAKG,QAAQ0Y,EAASrgB,KAAKuX,EAAE1U,GAAhB,IAEtBlD,KAAKwV,SAAS9P,OAAO,cAAe,CAChCxC,GAAIwd,EACJ1W,GAAI,CACA5B,EAAGjI,EAAMqgB,UAAUJ,KAAK,GACxB/X,EAAGlI,EAAMqgB,UAAUJ,KAAK,KAGpC,CACApgB,KAAKsV,KAAK,gBACb,EAEDqL,6BAA6B/I,GACzB,MAAM,OAAEhO,GAAWgO,EAAE2H,YAEjBvf,KAAK2Z,MAAMzI,SAAS0P,kBAAkBhX,IACnC5J,KAAKmM,UAAU4E,MAAMC,GAAMA,IAAMpH,GAAUoH,EAAE6P,SAASjX,OAIzDgO,EAAEkJ,MAET,EAEDC,WAAWnJ,GACP,GAAI5X,KAAKqM,QAAQ/M,OACa,IAAtBsY,EAAE9G,SAASpR,QAAgBkY,EAAE9G,SAAS,GAAG5N,KAAOlD,KAAKqM,QAAQ/M,MAM7D,OALA4C,GAAQC,IAAK,gCAA+BnC,KAAKqM,QAAQ/M,YAAYsY,EAAE9G,SAAS,GAAG5N,WACnFlD,KAAKwV,SAAS9P,OAAO,aAAc,CAC/BiE,OAAQ3J,KAAKqM,QAAQ/M,MACrBsK,OAAQgO,EAAE9G,SAAS,GAAG5N,KAKlClD,KAAKsV,KAAK,CACNxN,KAAM,mBACNqE,UAAWyL,EAAE9G,SAASkM,KAAK4B,GAAOA,EAAG1b,MAE5C,EAED8d,iBAAiBpJ,GACTA,EAAEqJ,cACFrJ,EAAE2H,WAAWV,iBACb5c,YAAW,KACPjC,KAAK2Z,MAAMzI,SAASgQ,UAAUtJ,EAAE2H,WAAhC,KAGRvf,KAAKmM,UAAYyL,EAAE9G,SACnB,MAAM6N,EAAc/G,EAAE9G,SAASkM,KAAK4B,GAAOA,EAAG1b,KAC9ClD,KAAKwV,SAASvR,gBAAgB,YAAa0a,GAC3C3e,KAAKsV,KAAK,CACNxN,KAAM,iBACNqE,UAAWwS,GAElB,EAEDwC,WAAWhhB,GAGP,MAAM,OAAEyJ,GAAWzJ,EACnByJ,EAAOmE,MAAM0M,MAAS,GAAEta,EAAMsa,UAC9Bza,KAAKwV,SAAS1L,WAAW,CACrB5G,GAAI/C,EAAMyJ,OAAO1G,GACjBgH,IAAK,CACDzB,aAActI,EAAMsa,QAG/B,EAED2G,eAAejhB,GACNA,EAAMqgB,WACXxgB,KAAKwV,SAAS9P,OAAO,aAAc,CAC/BxC,GAAI/C,EAAMyJ,OAAO1G,GACjBgH,IAAK,CACD5B,EAAGnI,EAAMqgB,UAAU/F,MACnBvB,EAAG/Y,EAAMyJ,OAAO+T,eAG3B,EAGDW,iBAAiBlW,EAAGC,GAChB,MAAMgZ,EAAUjZ,EAAIpI,KAAKid,KAAOjd,KAAKoI,EAC/BkZ,EAAUjZ,EAAIrI,KAAKid,KAAOjd,KAAKqI,EACrC,MAAO,CAAED,EAAGiZ,EAAShZ,EAAGiZ,EAC3B,EAEDC,kBAAkBC,EAAMC,GACpB,MAAMC,EAAcD,EAAc,IAAIld,IAAI,CAACid,EAAKte,KAAO,IAAIqB,IAQ3D,OAPAid,EAAKvZ,SAASvH,SAAS+I,IACnB,MAAMb,EAAQ5I,KAAK0C,MAAMpD,MAAMgI,MAAMmC,GAC/BkY,EAAmB3hB,KAAKuhB,kBAAkB3Y,GAAO,GACvD+Y,EAAiBjhB,SAASkhB,IACtBF,EAAY9c,IAAIgd,EAAhB,GADJ,IAIG,IAAIF,EACd,EAGDG,qBAAqB1hB,GACjB,MAAMke,EAASre,KAAKse,iBAAiBne,EAAMoe,QAASpe,EAAMqe,SAC1Dxe,KAAKwV,SAASvR,gBAAgB,UAAWoa,EAAOjW,GAChDpI,KAAKwV,SAASvR,gBAAgB,UAAWoa,EAAOhW,EACnD,EAEDyZ,aAAa3hB,GACJH,KAAK+L,UACN7J,GAAQC,IAAI,wCAAyChC,GACrDH,KAAKsV,KAAK,iBACVnV,EAAM0e,iBACN1e,EAAM4hB,kBAEb,EAEDC,YAAY7hB,GACHH,KAAK+L,UACN7J,GAAQC,IAAI,yCAA0ChC,GACtDH,KAAKsV,KAAK,kBACVnV,EAAM0e,iBAEb,GAGL7O,SAAU,CACNiS,mBACI,GAAIjiB,KAAKmM,UAAUzM,OAAS,EAAG,CAC3B,MAAMmI,EAAO7H,KAAK0C,MAAMpD,MAAMgI,MAAMtH,KAAKmM,UAAU,GAAGjJ,IACtD,OAAK2E,EACAA,EAAKiS,cACNjS,EAAKiS,eAAiB,GACfjS,EAAKiS,cAAgB,EAEzBjS,EAAKiS,cAAgB,GAJI9Z,KAAKmM,UAAU,GAAG0N,aADhC,CAMtB,CACA,OAAO,CACV,EAEDqI,eACI,OAA8B,IAA1BliB,KAAKmM,UAAUzM,WACdM,KAAK0C,MAAMpD,MAAMgI,MAAMtH,KAAKmM,UAAU,GAAGjJ,MAC1ClD,KAAK0C,MAAMpD,MAAMgI,MAAMtH,KAAKmM,UAAU,GAAGjJ,IAAI8E,OAEpD,GAGL2M,UAGIzB,OAAOC,iBAAiB,YAAanT,KAAK6hB,sBAE1C7hB,KAAKme,SAASje,GAAG,UAAW,QAASF,KAAK8hB,cAC1C9hB,KAAKme,SAASje,GAAG,QAAS,QAASF,KAAKgiB,aACxChiB,KAAKme,SAASje,GAAG,UAAW,YAAaF,KAAK6J,aAC9C7J,KAAKme,SAASje,GAAG,UAAW,SAAUF,KAAKgH,MAC3ChH,KAAKme,SAASje,GAAG,UAAW,eAAgBF,KAAKiH,MAEjDjH,KAAKwV,SAAStV,GAAG,UAAU,KAEvBF,KAAKwV,SAASvR,gBAAgB,YAAa,GAA3C,GAEP,EAEDoR,gBACInC,OAAOG,oBAAoB,YAAarT,KAAK6hB,sBAC7C7hB,KAAKme,SAAS/K,iBACjB,IWneL,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,MAEpE,U,2CCRI9F,EAAAA,EAAAA,IAAqE,OAAhEpK,GAAG,mBAAoB6K,OAAK,SAAA6R,KAAAA,GAAYrS,EAAAA,MAACuS,IAAAA,GAAcvS,EAAAA,SAA5D,O,CAIJ,QACI2B,KAAM,iBAENzN,OACI,MAAO,CACH2G,EAAG,EACHC,EAAG,EAEV,EAEDsM,UACIzB,OAAOC,iBAAiB,aAAchT,IAClCH,KAAKoI,EAAIjI,EAAMoe,QAAU,EACzBve,KAAKqI,EAAIlI,EAAMqe,QAAU,CAAzB,GAEP,GCbL,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,W1BeA,IACItP,KAAM,MACNW,WAAY,CACRsS,SADQ,EAERC,eAFQ,GAGRC,eAHQ,IAOZ5gB,OACI,MAAM+T,EAAW,IAAInO,EAErB,MAAO,CACHmO,WACA9S,MAAO8S,EAAS9S,MAChBK,MAAO,GACPuf,SAAS,EACTrO,MAAO,GACPsO,WAAO1iB,EACPe,cAAUf,EAEjB,EAEDqe,UAEI,MAAMsE,EAAa,CACfhN,SAAUxV,KAAKwV,SACf9S,OAAOsN,EAAAA,EAAAA,KAAS,IAAMhQ,KAAKwV,SAAS9S,QACpCgc,OAAO1O,EAAAA,EAAAA,KAAS,IAAMhQ,KAAK0e,QAC3BpJ,KAAMtV,KAAKsV,KACX1U,UAAUoP,EAAAA,EAAAA,KAAS,IAAMhQ,KAAKY,YAOlC,OAJA6D,OAAOC,KAAK1E,KAAK0e,MAAM5S,SAASpL,SAASd,IACrC4iB,EAAW5iB,IAAOoQ,EAAAA,EAAAA,KAAS,IAAMhQ,KAAK0e,MAAM5S,QAAQlM,IAApD,IAGG4iB,CACV,EAEDC,QACQvhB,OACA,mCAAuBM,MAAMW,IACzBsC,OAAO8H,OAAOrK,GAASC,EAAIugB,WAC3BvgB,EAAIwgB,aAAJ,IAIR,MAAM,MAAEjE,EAAF,KAASpJ,IAASsN,EAAAA,EAAAA,GAAWlX,GACnC,MAAO,CAAEgT,QAAOpJ,OACnB,EAED/F,QAAS,CACLsT,oBACI,MAAMC,EAAQC,IAAoB,KAAM,CAAEC,SAAU,IACpDhjB,KAAKwV,SAASvR,gBAAgB,OAAS,aAAY6e,IACtD,GAGLnO,UA+BI,GA9BA3U,KAAKwV,SAAStV,GAAG,UAAU,KACvBF,KAAK6iB,oBACL7iB,KAAKsiB,SAAU,CAAf,IAGJtiB,KAAKwV,SAAStV,GAAG,UAAU,KACnBgB,OAEA,mCAAmBM,MAAK,EAAGyhB,kBACvBA,EAAY3N,KAAK,cAAc,EAA/B,GAER,IAGJtV,KAAKwV,SAAStV,GAAG,SAAS,KAClBgB,OAEA,mCAAmBM,MAAK,EAAGyhB,kBACvBA,EAAY3N,KAAK,cAAc,EAA/B,GAER,IAIJpC,OAAOC,iBAAiB,WAAYhT,IACb,UAAfA,EAAM+iB,MAAoB/iB,EAAMyJ,SAAW4L,SAAS2N,MACpDhjB,EAAM0e,gBACV,IAGA3d,MAEA,mCAAmBM,MAAK,EAAGyhB,kBACvBA,EAAY/iB,GAAG,YAAY,KACvBgC,GAAQC,IAAI,6DACZnC,KAAKwV,SAAS3S,UAAd,IAGJogB,EAAY/iB,GAAG,gBAAgB,CAACkjB,EAAGxiB,KAC/BsB,GAAQC,IAAK,+CAA8CvB,MAC3DZ,KAAKY,SAAWA,EAChBZ,KAAKwV,SAAS5R,gBAAgBhD,EAA9B,GAHJ,QAMD,CACH,MAAMyiB,EAAcnQ,OAAOoQ,SAASC,OAC9BC,EAAY,IAAIC,gBAAgBJ,GACtCnhB,GAAQC,IAAK,wCAAuCqhB,EAAUE,IAAI,eAClE1jB,KAAKwV,SAAS3S,SAAS2gB,EAAUE,IAAI,aACrC1jB,KAAKwV,SAAS5R,gBAAgB4f,EAAUE,IAAI,YAChD,CACH,EAEDrO,gBACInT,GAAQC,IAAI,4CACZnC,KAAKwV,SAASzR,QACd7B,GAAQC,IAAI,wCACf,EAEDwT,MAAO,CACH,iBAAkB,CACdiI,MAAM,EACN9K,UACI,MAAM/P,EAAQ,GACd0B,OAAOC,KAAK1E,KAAKwV,SAASzS,OAAOrC,SAAS+C,IACtCV,EAAM1C,KAAKL,KAAKwV,SAASzS,MAAMU,GAA/B,IAEJzD,KAAK+C,MAAQA,CAChB,GAEL,yBAA0B,CACtB6a,MAAM,EACN9K,UACI9S,KAAKiU,MAAQjU,KAAKwV,SAASvS,SAASiM,IACvC,K2BvJb,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAASyU,KAEpE,UCFA,MAAMC,IAAMC,EAAAA,EAAAA,IAAUC,IACtBF,GAAIG,IAAIC,EAAAA,GACRJ,GAAIG,IAAIE,EAAAA,GACRL,GAAIM,MAAM,O,qBCTNC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBxkB,IAAjBykB,EACH,OAAOA,EAAaC,QAGrB,IAAIC,EAASL,EAAyBE,GAAY,CACjDnhB,GAAImhB,EACJI,QAAQ,EACRF,QAAS,CAAC,GAUX,OANAG,EAAoBL,GAAUM,KAAKH,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG3EI,EAAOC,QAAS,EAGTD,EAAOD,OACf,CAGAH,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,E,WC/BxB,IAAIW,EAAW,GACfV,EAAoBW,EAAI,SAASC,EAAQC,EAAUC,EAAIC,GACtD,IAAGF,EAAH,CAMA,IAAIG,EAAeC,IACnB,IAAS1lB,EAAI,EAAGA,EAAImlB,EAASplB,OAAQC,IAAK,CACrCslB,EAAWH,EAASnlB,GAAG,GACvBulB,EAAKJ,EAASnlB,GAAG,GACjBwlB,EAAWL,EAASnlB,GAAG,GAE3B,IAJA,IAGI2lB,GAAY,EACPC,EAAI,EAAGA,EAAIN,EAASvlB,OAAQ6lB,MACpB,EAAXJ,GAAsBC,GAAgBD,IAAa1gB,OAAOC,KAAK0f,EAAoBW,GAAGS,OAAM,SAAS5lB,GAAO,OAAOwkB,EAAoBW,EAAEnlB,GAAKqlB,EAASM,GAAK,IAChKN,EAAS1a,OAAOgb,IAAK,IAErBD,GAAY,EACTH,EAAWC,IAAcA,EAAeD,IAG7C,GAAGG,EAAW,CACbR,EAASva,OAAO5K,IAAK,GACrB,IAAI8lB,EAAIP,SACErlB,IAAN4lB,IAAiBT,EAASS,EAC/B,CACD,CACA,OAAOT,CArBP,CAJCG,EAAWA,GAAY,EACvB,IAAI,IAAIxlB,EAAImlB,EAASplB,OAAQC,EAAI,GAAKmlB,EAASnlB,EAAI,GAAG,GAAKwlB,EAAUxlB,IAAKmlB,EAASnlB,GAAKmlB,EAASnlB,EAAI,GACrGmlB,EAASnlB,GAAK,CAACslB,EAAUC,EAAIC,EAwB/B,C,eC5BAf,EAAoBsB,EAAI,SAASlB,GAChC,IAAImB,EAASnB,GAAUA,EAAOoB,WAC7B,WAAa,OAAOpB,EAAO,UAAY,EACvC,WAAa,OAAOA,CAAQ,EAE7B,OADAJ,EAAoBjJ,EAAEwK,EAAQ,CAAEE,EAAGF,IAC5BA,CACR,C,eCPA,IACIG,EADAC,EAAWthB,OAAOuhB,eAAiB,SAASC,GAAO,OAAOxhB,OAAOuhB,eAAeC,EAAM,EAAI,SAASA,GAAO,OAAOA,EAAIC,SAAW,EAQpI9B,EAAoBpT,EAAI,SAAS1R,EAAO6mB,GAEvC,GADU,EAAPA,IAAU7mB,EAAQU,KAAKV,IAChB,EAAP6mB,EAAU,OAAO7mB,EACpB,GAAoB,kBAAVA,GAAsBA,EAAO,CACtC,GAAW,EAAP6mB,GAAa7mB,EAAMsmB,WAAY,OAAOtmB,EAC1C,GAAW,GAAP6mB,GAAoC,oBAAf7mB,EAAMkC,KAAqB,OAAOlC,CAC5D,CACA,IAAI8mB,EAAK3hB,OAAO4hB,OAAO,MACvBjC,EAAoBqB,EAAEW,GACtB,IAAIE,EAAM,CAAC,EACXR,EAAiBA,GAAkB,CAAC,KAAMC,EAAS,CAAC,GAAIA,EAAS,IAAKA,EAASA,IAC/E,IAAI,IAAI/K,EAAiB,EAAPmL,GAAY7mB,EAAyB,iBAAX0b,KAAyB8K,EAAezb,QAAQ2Q,GAAUA,EAAU+K,EAAS/K,GACxHvW,OAAO8hB,oBAAoBvL,GAASta,SAAQ,SAASd,GAAO0mB,EAAI1mB,GAAO,WAAa,OAAON,EAAMM,EAAM,CAAG,IAI3G,OAFA0mB,EAAI,WAAa,WAAa,OAAOhnB,CAAO,EAC5C8kB,EAAoBjJ,EAAEiL,EAAIE,GACnBF,CACR,C,eCxBAhC,EAAoBjJ,EAAI,SAASoJ,EAASiC,GACzC,IAAI,IAAI5mB,KAAO4mB,EACXpC,EAAoBqC,EAAED,EAAY5mB,KAASwkB,EAAoBqC,EAAElC,EAAS3kB,IAC5E6E,OAAOiiB,eAAenC,EAAS3kB,EAAK,CAAE+mB,YAAY,EAAMjD,IAAK8C,EAAW5mB,IAG3E,C,eCPAwkB,EAAoBwC,EAAI,CAAC,EAGzBxC,EAAoBxM,EAAI,SAASiP,GAChC,OAAO1O,QAAQ2O,IAAIriB,OAAOC,KAAK0f,EAAoBwC,GAAGG,QAAO,SAASC,EAAUpnB,GAE/E,OADAwkB,EAAoBwC,EAAEhnB,GAAKinB,EAASG,GAC7BA,CACR,GAAG,IACJ,C,eCPA5C,EAAoB6C,EAAI,SAASJ,GAEhC,MAAO,MAAQA,EAAU,IAAM,CAAC,IAAM,WAAW,IAAM,YAAYA,GAAW,KAC/E,C,eCHAzC,EAAoB8C,SAAW,SAASL,GAGxC,C,eCJAzC,EAAoB+C,EAAI,WACvB,GAA0B,kBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAOpnB,MAAQ,IAAIqnB,SAAS,cAAb,EAGhB,CAFE,MAAOzP,GACR,GAAsB,kBAAX1E,OAAqB,OAAOA,MACxC,CACA,CAPuB,E,eCAxBkR,EAAoBqC,EAAI,SAASR,EAAKqB,GAAQ,OAAO7iB,OAAO8iB,UAAUC,eAAe7C,KAAKsB,EAAKqB,EAAO,C,eCAtG,IAAIG,EAAa,CAAC,EACdC,EAAoB,YAExBtD,EAAoBuD,EAAI,SAAShQ,EAAKiQ,EAAMhoB,EAAKinB,GAChD,GAAGY,EAAW9P,GAAQ8P,EAAW9P,GAAKtX,KAAKunB,OAA3C,CACA,IAAIC,EAAQC,EACZ,QAAWjoB,IAARD,EAEF,IADA,IAAImoB,EAAUvS,SAASwS,qBAAqB,UACpCroB,EAAI,EAAGA,EAAIooB,EAAQroB,OAAQC,IAAK,CACvC,IAAIsoB,EAAIF,EAAQpoB,GAChB,GAAGsoB,EAAEC,aAAa,QAAUvQ,GAAOsQ,EAAEC,aAAa,iBAAmBR,EAAoB9nB,EAAK,CAAEioB,EAASI,EAAG,KAAO,CACpH,CAEGJ,IACHC,GAAa,EACbD,EAASrS,SAAS2S,cAAc,UAEhCN,EAAOO,QAAU,QACjBP,EAAO5mB,QAAU,IACbmjB,EAAoBiE,IACvBR,EAAOS,aAAa,QAASlE,EAAoBiE,IAElDR,EAAOS,aAAa,eAAgBZ,EAAoB9nB,GACxDioB,EAAOU,IAAM5Q,GAEd8P,EAAW9P,GAAO,CAACiQ,GACnB,IAAIY,EAAmB,SAASC,EAAMtoB,GAErC0nB,EAAOa,QAAUb,EAAOc,OAAS,KACjC3mB,aAAaf,GACb,IAAI2nB,EAAUnB,EAAW9P,GAIzB,UAHO8P,EAAW9P,GAClBkQ,EAAOgB,YAAchB,EAAOgB,WAAWC,YAAYjB,GACnDe,GAAWA,EAAQloB,SAAQ,SAASwkB,GAAM,OAAOA,EAAG/kB,EAAQ,IACzDsoB,EAAM,OAAOA,EAAKtoB,EACtB,EAEIc,EAAUgB,WAAWumB,EAAiBzmB,KAAK,UAAMlC,EAAW,CAAEiI,KAAM,UAAW8B,OAAQie,IAAW,MACtGA,EAAOa,QAAUF,EAAiBzmB,KAAK,KAAM8lB,EAAOa,SACpDb,EAAOc,OAASH,EAAiBzmB,KAAK,KAAM8lB,EAAOc,QACnDb,GAActS,SAASuT,KAAKC,YAAYnB,EApCkB,CAqC3D,C,eCxCAzD,EAAoBqB,EAAI,SAASlB,GACX,qBAAX0E,QAA0BA,OAAOC,aAC1CzkB,OAAOiiB,eAAenC,EAAS0E,OAAOC,YAAa,CAAE5pB,MAAO,WAE7DmF,OAAOiiB,eAAenC,EAAS,aAAc,CAAEjlB,OAAO,GACvD,C,eCNA8kB,EAAoB+E,IAAM,SAAS3E,GAGlC,OAFAA,EAAO4E,MAAQ,GACV5E,EAAOvc,WAAUuc,EAAOvc,SAAW,IACjCuc,CACR,C,eCJAJ,EAAoBiF,EAAI,G,eCKxB,IAAIC,EAAkB,CACrB,IAAK,GAGNlF,EAAoBwC,EAAErB,EAAI,SAASsB,EAASG,GAE1C,IAAIuC,EAAqBnF,EAAoBqC,EAAE6C,EAAiBzC,GAAWyC,EAAgBzC,QAAWhnB,EACtG,GAA0B,IAAvB0pB,EAGF,GAAGA,EACFvC,EAAS3mB,KAAKkpB,EAAmB,QAC3B,CAGL,IAAIC,EAAU,IAAIrR,SAAQ,SAASC,EAASC,GAAUkR,EAAqBD,EAAgBzC,GAAW,CAACzO,EAASC,EAAS,IACzH2O,EAAS3mB,KAAKkpB,EAAmB,GAAKC,GAGtC,IAAI7R,EAAMyM,EAAoBiF,EAAIjF,EAAoB6C,EAAEJ,GAEpD9gB,EAAQ,IAAIxE,MACZkoB,EAAe,SAAStpB,GAC3B,GAAGikB,EAAoBqC,EAAE6C,EAAiBzC,KACzC0C,EAAqBD,EAAgBzC,GACX,IAAvB0C,IAA0BD,EAAgBzC,QAAWhnB,GACrD0pB,GAAoB,CACtB,IAAIG,EAAYvpB,IAAyB,SAAfA,EAAM2H,KAAkB,UAAY3H,EAAM2H,MAChE6hB,EAAUxpB,GAASA,EAAMyJ,QAAUzJ,EAAMyJ,OAAO2e,IACpDxiB,EAAM6jB,QAAU,iBAAmB/C,EAAU,cAAgB6C,EAAY,KAAOC,EAAU,IAC1F5jB,EAAMmJ,KAAO,iBACbnJ,EAAM+B,KAAO4hB,EACb3jB,EAAMwS,QAAUoR,EAChBJ,EAAmB,GAAGxjB,EACvB,CAEF,EACAqe,EAAoBuD,EAAEhQ,EAAK8R,EAAc,SAAW5C,EAASA,EAE/D,CAEH,EAUAzC,EAAoBW,EAAEQ,EAAI,SAASsB,GAAW,OAAoC,IAA7ByC,EAAgBzC,EAAgB,EAGrF,IAAIgD,EAAuB,SAASC,EAA4BroB,GAC/D,IAKI4iB,EAAUwC,EALV5B,EAAWxjB,EAAK,GAChBsoB,EAActoB,EAAK,GACnBuoB,EAAUvoB,EAAK,GAGI9B,EAAI,EAC3B,GAAGslB,EAASlU,MAAK,SAAS7N,GAAM,OAA+B,IAAxBomB,EAAgBpmB,EAAW,IAAI,CACrE,IAAImhB,KAAY0F,EACZ3F,EAAoBqC,EAAEsD,EAAa1F,KACrCD,EAAoBQ,EAAEP,GAAY0F,EAAY1F,IAGhD,GAAG2F,EAAS,IAAIhF,EAASgF,EAAQ5F,EAClC,CAEA,IADG0F,GAA4BA,EAA2BroB,GACrD9B,EAAIslB,EAASvlB,OAAQC,IACzBknB,EAAU5B,EAAStlB,GAChBykB,EAAoBqC,EAAE6C,EAAiBzC,IAAYyC,EAAgBzC,IACrEyC,EAAgBzC,GAAS,KAE1ByC,EAAgBzC,GAAW,EAE5B,OAAOzC,EAAoBW,EAAEC,EAC9B,EAEIiF,EAAqBC,KAAK,wBAA0BA,KAAK,yBAA2B,GACxFD,EAAmBvpB,QAAQmpB,EAAqB9nB,KAAK,KAAM,IAC3DkoB,EAAmB5pB,KAAOwpB,EAAqB9nB,KAAK,KAAMkoB,EAAmB5pB,KAAK0B,KAAKkoB,G,ICpFvF,IAAIE,EAAsB/F,EAAoBW,OAAEllB,EAAW,CAAC,MAAM,WAAa,OAAOukB,EAAoBA,EAAoB6D,EAAI,KAAO,IACzIkC,EAAsB/F,EAAoBW,EAAEoF,E","sources":["webpack://intrigue/./src/App.vue","webpack://intrigue/./src/utils/prop.js","webpack://intrigue/./src/utils/event.js","webpack://intrigue/./src/store/persist.js","webpack://intrigue/./src/store/sync.js","webpack://intrigue/./src/store/undo.js","webpack://intrigue/./src/store/types.js","webpack://intrigue/./src/store/document.js","webpack://intrigue/./src/state/index.js","webpack://intrigue/./src/components/window/TitleBar.vue","webpack://intrigue/./src/components/window/CopyButton.vue","webpack://intrigue/./src/components/window/CopyButton.vue?5bce","webpack://intrigue/./src/components/window/TitleBar.vue?1db7","webpack://intrigue/./src/components/canvas/Canvas.vue","webpack://intrigue/./src/keyboard/index.js","webpack://intrigue/./src/components/canvas/Node.vue","webpack://intrigue/./src/components/canvas/node/Note.vue","webpack://intrigue/./src/components/canvas/node/Note.vue?0e4b","webpack://intrigue/./src/components/canvas/node/Reference.vue","webpack://intrigue/./src/components/canvas/node/Reference.vue?0a06","webpack://intrigue/./src/literature/index.js","webpack://intrigue/./src/components/canvas/Node.vue?ed95","webpack://intrigue/./src/components/canvas/Link.vue","webpack://intrigue/./src/components/canvas/Link.vue?5143","webpack://intrigue/./src/components/canvas/Canvas.vue?de33","webpack://intrigue/./src/components/canvas/PointerTracker.vue","webpack://intrigue/./src/components/canvas/PointerTracker.vue?2721","webpack://intrigue/./src/App.vue?7ccd","webpack://intrigue/./src/main.js","webpack://intrigue/webpack/bootstrap","webpack://intrigue/webpack/runtime/chunk loaded","webpack://intrigue/webpack/runtime/compat get default export","webpack://intrigue/webpack/runtime/create fake namespace object","webpack://intrigue/webpack/runtime/define property getters","webpack://intrigue/webpack/runtime/ensure chunk","webpack://intrigue/webpack/runtime/get javascript chunk filename","webpack://intrigue/webpack/runtime/get mini-css chunk filename","webpack://intrigue/webpack/runtime/global","webpack://intrigue/webpack/runtime/hasOwnProperty shorthand","webpack://intrigue/webpack/runtime/load script","webpack://intrigue/webpack/runtime/make namespace object","webpack://intrigue/webpack/runtime/node module decorator","webpack://intrigue/webpack/runtime/publicPath","webpack://intrigue/webpack/runtime/jsonp chunk loading","webpack://intrigue/webpack/startup"],"sourcesContent":["<template>\n    <TitleBar />\n    <DocumentCanvas />\n    <PointerTracker />\n    <!-- <Debug /> -->\n</template>\n\n<script>\nimport { computed } from 'vue';\nimport isElectron from 'is-electron';\n\n// import Avatar from 'vue-boring-avatars';\n\nimport getRandomFruitsName from 'random-fruits-name';\n\nimport { IntrigueDocument } from '@/store';\nimport intrigueMachine from '@/state';\nimport { useMachine } from '@xstate/vue';\n\nimport TitleBar from '@/components/window/TitleBar.vue';\nimport DocumentCanvas from '@/components/canvas/Canvas.vue';\nimport PointerTracker from '@/components/canvas/PointerTracker.vue';\n// import Debug from '@/components/utils/Debug.vue';\n\nexport default {\n    name: 'App',\n    components: {\n        TitleBar,\n        DocumentCanvas,\n        PointerTracker,\n        // Debug,\n    },\n\n    data() {\n        const document = new IntrigueDocument();\n\n        return {\n            document,\n            store: document.store,\n            users: [],\n            loading: true,\n            title: '',\n            docId: undefined,\n            filePath: undefined,\n        };\n    },\n\n    provide() {\n        // use function syntax so that we can access `this`\n        const injections = {\n            document: this.document,\n            store: computed(() => this.document.store),\n            state: computed(() => this.state),\n            send: this.send,\n            filePath: computed(() => this.filePath),\n        };\n\n        Object.keys(this.state.context).forEach((key) => {\n            injections[key] = computed(() => this.state.context[key]);\n        });\n\n        return injections;\n    },\n\n    setup() {\n        if (isElectron()) {\n            import('electron-log').then((log) => {\n                Object.assign(console, log.functions);\n                log.catchErrors();\n            });\n        }\n\n        const { state, send } = useMachine(intrigueMachine);\n        return { state, send };\n    },\n\n    methods: {\n        broadcastUsername() {\n            const fruit = getRandomFruitsName('en', { maxWords: 1 });\n            this.document.updateAwareness('name', `Anonymous ${fruit}`);\n        },\n    },\n\n    mounted() {\n        this.document.on('synced', () => {\n            this.broadcastUsername();\n            this.loading = false;\n        });\n\n        this.document.on('commit', () => {\n            if (isElectron()) {\n                // eslint-disable-next-line import/no-extraneous-dependencies, global-require\n                import('electron').then(({ ipcRenderer }) => {\n                    ipcRenderer.send('set-edited', true);\n                });\n            }\n        });\n\n        this.document.on('saved', () => {\n            if (isElectron()) {\n                // eslint-disable-next-line import/no-extraneous-dependencies, global-require\n                import('electron').then(({ ipcRenderer }) => {\n                    ipcRenderer.send('set-edited', false);\n                });\n            }\n        });\n\n        // Prevent space from causing scrolling down behavior.\n        window.addEventListener('keydown', (event) => {\n            if (event.code === 'Space' && event.target === document.body) {\n                event.preventDefault();\n            }\n        });\n\n        if (isElectron()) {\n            // eslint-disable-next-line import/no-extraneous-dependencies, global-require\n            import('electron').then(({ ipcRenderer }) => {\n                ipcRenderer.on('new-file', () => {\n                    console.log('[App][ipcRenderer@set-filepath] This is a new empty file.');\n                    this.document.initSync();\n                });\n\n                ipcRenderer.on('set-filepath', (_, filePath) => {\n                    console.log(`[App][ipcRenderer@set-filepath] filePath is ${filePath}.`);\n                    this.filePath = filePath;\n                    this.document.initPersistence(filePath);\n                });\n            });\n        } else {\n            const queryString = window.location.search;\n            const urlParams = new URLSearchParams(queryString);\n            console.log(`[App][mounted] urlParams.document is ${urlParams.get('document')}`);\n            this.document.initSync(urlParams.get('document'));\n            this.document.initPersistence(urlParams.get('document'));\n        }\n    },\n\n    beforeUnmount() {\n        console.log('[App][beforeUnmount] Closing document...');\n        this.document.close();\n        console.log('[App][beforeUnmount] Document closed.');\n    },\n\n    watch: {\n        'document.users': {\n            deep: true,\n            handler() {\n                const users = [];\n                Object.keys(this.document.users).forEach((userId) => {\n                    users.push(this.document.users[userId]);\n                });\n                this.users = users;\n            },\n        },\n        'document.metadata.name': {\n            deep: true,\n            handler() {\n                this.title = this.document.metadata.name;\n            },\n        },\n    },\n};\n</script>\n\n<style lang=\"scss\">\nhtml,\nbody,\n#app {\n    --background: #F8F9F9;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    background: var(--background);\n}\n\n.noselect {\n    -webkit-touch-callout: none; /* iOS Safari */\n    -webkit-user-select: none; /* Safari */\n    -khtml-user-select: none; /* Konqueror HTML */\n    -moz-user-select: none; /* Old versions of Firefox */\n    -ms-user-select: none; /* Internet Explorer/Edge */\n    user-select: none; /* Non-prefixed version, currently\n                                  supported by Chrome, Edge, Opera and Firefox */\n}\n</style>\n","/* eslint-disable no-plusplus */\n/* eslint-disable no-param-reassign */\nexport default function propByPath(object, path, value) {\n    const parts = path.split('.');\n    const limit = parts.length - 1;\n    for (let i = 0; i < limit; ++i) {\n        const key = parts[i];\n        object = object[key] ?? (object[key] = {});\n    }\n    const key = parts[limit];\n    if (value !== undefined) {\n        object[key] = value;\n    }\n    return object[key];\n}\n","export default class EventEmitter {\n    constructor() {\n        this.events = {};\n        // this.emitter = createNanoEvents();\n    }\n\n    // eslint-disable-next-line\n    on(event, callback) {\n        // return this.emitter.on(event, callback);\n        if (!this.events[event]) this.events[event] = [];\n        this.events[event].push(callback);\n        return () => {\n            this.events[event] = this.events[event]?.filter((i) => callback !== i);\n        };\n    }\n\n    emit(event, ...args) {\n        // this.emitter.emit(event, data);\n        const callbacks = this.events[event] || [];\n        callbacks.forEach((callback) => callback(...args));\n        // for (let i = 0, { length } = callbacks; i < length; i += 1) {\n        //     callbacks[i](...args);\n        // }\n    }\n}\n","import isElectron from 'is-electron';\nimport { encodeStateAsUpdate, applyUpdate } from 'yjs';\n// import * as mutex from 'lib0/mutex';\nimport EventEmitter from '@/utils/event';\n\nexport default class LocalFilePersistence extends EventEmitter {\n    constructor(filePath, doc, fs, debounce) {\n        super();\n        this.doc = doc;\n        this.filePath = filePath;\n        this.timeout = null;\n        this.debounce = debounce || 1000;\n\n        if (isElectron()) {\n            // eslint-disable-next-line global-require\n            const { readFile, writeFile, access } = require('fs/promises');\n            this.readFile = readFile;\n            this.writeFile = writeFile;\n            this.access = access;\n        } else if (fs) {\n            const { readFile, writeFile, access } = fs;\n            this.readFile = readFile;\n            this.writeFile = writeFile;\n            this.access = access;\n        } else {\n            throw new Error('LocalFilePersistence is designed to be used in Electron. Either make sure you are calling this class in an Electron environment, or provide your own async fs implementation.');\n        }\n\n        if (!this.filePath) {\n            this.emit('synced');\n        } else {\n            this.access(this.filePath).then(() => {\n                this.readFile(filePath).then((data) => {\n                    applyUpdate(this.doc, Uint8Array.from(data));\n                    this.emit('synced');\n                });\n            }).catch(() => {\n                this.storeUpdate(null, () => {\n                    this.emit('synced');\n                });\n            });\n        }\n        this.doc.on('update', this.storeUpdate.bind(this));\n    }\n\n    storeUpdate() {\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n            this.timeout = null;\n        }\n        this.timeout = setTimeout(() => {\n            if (!this.filePath) return;\n\n            console.log('[LocalFilePersistence][storeUpdate] Saving to disk.');\n            console.log(encodeStateAsUpdate(this.doc));\n            this.writeFile(this.filePath, encodeStateAsUpdate(this.doc)).then(() => {\n                // if (callback) callback();\n                this.emit('saved');\n            });\n        }, this.debounce);\n    }\n}\n","import { nanoid } from 'nanoid';\nimport * as Vue from 'vue';\nimport { reactive } from 'vue';\nimport isElectron from 'is-electron';\nimport { enableVueBindings, syncedStore, getYjsValue } from '@syncedstore/core';\n\nimport { WebrtcProvider } from 'y-webrtc';\nimport { IndexeddbPersistence } from 'y-indexeddb';\nimport EventEmitter from '@/utils/event';\nimport LocalFilePersistence from './persist';\n\n// import * as T from \"./types\"\n// import { DocTypeDescription } from '@syncedstore/core/types/doc';\n\nenableVueBindings(Vue);\n\nexport default class SyncedDocument extends EventEmitter {\n    constructor(storeStructure) {\n        super();\n        this.syncInitialized = false;\n        this.store = syncedStore(storeStructure);\n        console.warn = () => null; // Supress the numerous warnings generated by SyncedStore.\n    }\n\n    initSync(documentId) {\n        this.users = reactive({});\n        this.store.metadata.id = documentId || nanoid();\n\n        const doc = getYjsValue(this.store);\n        this.syncProvider = new WebrtcProvider(this.store.metadata.id, doc);\n        this.syncProvider.awareness.on('change', this.handleChanges.bind(this));\n\n        // Generate a random user id, then update the awareness.\n        this.userId = nanoid();\n        this.syncProvider.awareness.setLocalStateField('id', this.userId);\n        // if (!this.store.metadata.name) this.store.metadata.name = 'Untitled';\n\n        this.localUser = reactive(this.users[this.userId]);\n\n        this.syncInitialized = true;\n    }\n\n    initPersistence(filePath) {\n        const doc = getYjsValue(this.store);\n        this.saveProvider = isElectron()\n            ? new LocalFilePersistence(filePath, doc)\n            : new IndexeddbPersistence(filePath, doc);\n\n        this.saveProvider.on('synced', () => {\n            console.log('[Sync][saveProvider@synced] Save provider synced.', this.store.metadata.id);\n            if (!this.syncInitialized) this.initSync(this.store.metadata.id);\n            this.emit('synced');\n        });\n\n        this.saveProvider.on('saved', () => {\n            console.log('[Sync][saveProvider@synced] Save provider saved.');\n            this.emit('saved');\n        });\n    }\n\n    close() {\n        this.syncProvider.destroy();\n    }\n\n    // eslint-disable-next-line\n    updateAwareness(key, value) {\n        if (!this.syncInitialized) return;\n        this.syncProvider.awareness.setLocalStateField(key, value);\n    }\n\n    registerAwarenessCallback(key, callback) {\n        this.syncProvider.awareness.on(key, callback);\n    }\n\n    handleChanges() {\n        const awarenessInfo = [...this.syncProvider.awareness.getStates().values()];\n        const onlineUsers = new Set();\n        const offlineUsers = new Set(Object.keys(this.users));\n\n        awarenessInfo.forEach((user) => {\n            onlineUsers.add(user.id);\n            offlineUsers.delete(user.id);\n\n            if (!this.users[user.id]) this.users[user.id] = {};\n            Object.entries(user).forEach(([key, value]) => {\n                this.users[user.id][key] = value;\n            });\n        });\n\n        offlineUsers.forEach((userId) => delete this.users[userId]);\n    }\n\n    stringify() {\n        return JSON.stringify(this.store);\n    }\n}\n","import SyncedDocument from './sync';\n\nexport default class ReversibleDocument extends SyncedDocument {\n    constructor(storeStructure) {\n        super(storeStructure);\n\n        this.inverses = {};\n        this.undoStack = [];\n        this.redoStack = [];\n\n        this.previousTime = -1;\n        this.captureTimeout = 50;\n    }\n\n    registerInverses(actionA, actionB) {\n        this.inverses[actionA] = actionB;\n        this.inverses[actionB] = actionA;\n    }\n\n    commit(action, params) {\n        let inverseParams = null;\n\n        // eslint-disable-next-line\n        const actionFunction = this[action].bind(this);\n\n        if (actionFunction !== undefined) {\n            inverseParams = actionFunction(params);\n        } else {\n            console.error(`[Undo][Commit] There is no method called ${action}() on this object:`, this);\n            return;\n        }\n\n        if (!inverseParams) return;\n\n        const currentTime = Date.now();\n        if (Math.abs(currentTime - this.previousTime) < this.captureTimeout) {\n            console.log('[Undo][Commit] Capturing.');\n            // If the previous item is not in an array, then put it inside one.\n            if (!Array.isArray(this.undoStack[this.undoStack.length - 1])) {\n                this.undoStack[this.undoStack.length - 1] = [\n                    this.undoStack[this.undoStack.length - 1],\n                ];\n            }\n            this.undoStack[this.undoStack.length - 1].push({ action, inverseParams });\n        } else {\n            this.undoStack.push({ action, inverseParams });\n        }\n        this.previousTime = currentTime;\n        // console.log(`[Undo][Commit] ${JSON.stringify(this.undoStack, null, 2)}`);\n\n        this.redoStack = [];\n        this.emit('commit');\n    }\n\n    popStackItem(fromStack, toStack) {\n        if (fromStack.length <= 0) return;\n        let lastRecord = fromStack.pop();\n        if (!lastRecord) return;\n\n        if (!Array.isArray(lastRecord)) lastRecord = [lastRecord];\n\n        const toStackRecord = [];\n        lastRecord.reverse().forEach((item) => {\n            const inverseAction = this.inverses[item.action];\n            if (!inverseAction) {\n                console.error(`There is no registered inverse for ${item.action}().`);\n                return;\n            }\n\n            let inverseParams;\n\n            // eslint-disable-next-line\n            const actionFunction = this[inverseAction].bind(this);\n\n            if (actionFunction !== undefined) {\n                inverseParams = actionFunction(item.inverseParams);\n            } else {\n                console.error(`There is no method called ${inverseAction}() on this object:`, this);\n            }\n\n            toStackRecord.push({\n                action: inverseAction,\n                inverseParams,\n            });\n        });\n\n        toStack.push(toStackRecord.length === 1 ? toStackRecord[0] : toStackRecord);\n    }\n\n    undo() {\n        this.popStackItem(this.undoStack, this.redoStack);\n    }\n\n    redo() {\n        this.popStackItem(this.redoStack, this.undoStack);\n    }\n\n    canUndo() {\n        return this.undoStack.length > 0;\n    }\n\n    canRedo() {\n        return this.redoStack.length > 0;\n    }\n}\n","export default class NodeTypes {\n    static Note = 'note';\n\n    static Reference = 'reference';\n\n    static Area = 'area';\n}\n","/* eslint-disable no-param-reassign */\nimport { reactive } from 'vue';\nimport { nanoid } from 'nanoid';\n\nimport propByPath from '@/utils/prop';\n\nimport ReversibleDocument from './undo';\nimport NodeTypes from './types';\n\nexport default class IntrigueDocument extends ReversibleDocument {\n    constructor() {\n        super({\n            metadata: {},\n            nodes: {},\n            links: {},\n\n            fragment: 'xml',\n        });\n\n        this.remoteSelection = reactive(new Set());\n\n        this.registerInverses('createNode', 'deleteNode');\n        this.registerInverses('createNodes', 'deleteNodes');\n        this.registerInverses('updateNode', 'updateNode');\n        this.registerInverses('updateNodes', 'updateNodes');\n        this.registerInverses('snapNode', 'unsnapNode');\n        this.registerInverses('createLink', 'removeLink');\n    }\n\n    // Note: each function below should return its inverse parameters\n    createNode(nodeItem) {\n        const nodeId = nodeItem.id ? nodeItem.id : nanoid();\n        const node = {\n            id: nodeId,\n            type: nodeItem.type,\n            content: nodeItem.content,\n            links: [],\n            parent: null,\n            children: [],\n            identifier: null,\n            literature: null,\n            x: nodeItem.x ? nodeItem.x : 0,\n            y: nodeItem.y ? nodeItem.y : 0,\n            w: nodeItem.w ? nodeItem.w : 200,\n            currentX: nodeItem.x ? nodeItem.x : 0,\n            currentY: nodeItem.y ? nodeItem.y : 0,\n            currentWidth: nodeItem.w ? nodeItem.w : 200,\n        };\n        if (nodeItem.links) {\n            nodeItem.links.forEach((link) => this.createLink(link));\n        }\n        if (nodeItem.children) {\n            nodeItem.children.forEach((child) => this.snapNode(child));\n        }\n        this.store.nodes[nodeId] = node;\n        return nodeId;\n    }\n\n    createNodes(nodeItems) {\n        const nodeIds = [];\n        const newLinks = [];\n        const newChildren = [];\n        nodeItems.forEach((item) => {\n            // Extract all links to be created.\n            // This is to delay link creation until all nodes are first created.\n            if (item.links) {\n                item.links.forEach((link) => newLinks.push(link));\n                delete item.links;\n            }\n            // Extract all children to be snapped.\n            // Same as above.\n            if (item.children) {\n                item.children.forEach((child) => newChildren.push(child));\n                delete item.children;\n            }\n\n            const nodeId = this.createNode(item);\n            nodeIds.push(nodeId);\n        });\n\n        newLinks.forEach((link) => this.createLink(link));\n\n        newChildren.forEach((pairInfo) => this.snapNode(pairInfo));\n\n        return nodeIds;\n    }\n\n    deleteNode(nodeId) {\n        const node = { ...this.store.nodes[nodeId] };\n        const removedLinks = [];\n        const unsnappedChildren = [];\n        node.links.forEach((linkId) => {\n            removedLinks.push(this.removeLink(linkId));\n        });\n        node.children.forEach((childId) => {\n            unsnappedChildren.push(\n                this.unsnapNode({\n                    source: node.id,\n                    target: childId,\n                }),\n            );\n        });\n        node.links = removedLinks;\n        node.children = unsnappedChildren;\n        delete this.store.nodes[nodeId];\n        return node;\n    }\n\n    deleteNodes(nodeIds) {\n        const nodes = [];\n        nodeIds.forEach((nodeId) => {\n            const node = this.deleteNode(nodeId);\n            nodes.push(node);\n        });\n        return nodes;\n    }\n\n    updateNode(update) {\n        const node = this.store.nodes[update.id];\n        const inverseParams = {\n            id: update.id,\n        };\n        // Update parameters by a number\n        if (update.by) {\n            inverseParams.by = {};\n            Object.entries(update.by).forEach(([path, value]) => {\n                const originalValue = propByPath(node, path);\n                if (typeof originalValue !== 'number') {\n                    console.error('Only number properties can be updated by a number!');\n                    return;\n                }\n                propByPath(node, path, originalValue + value);\n                inverseParams.by[path] = -originalValue;\n            });\n        }\n        // Set parameters to values\n        if (update.set) {\n            inverseParams.set = {};\n            Object.entries(update.set).forEach(([path, value]) => {\n                const originalValue = propByPath(node, path);\n                propByPath(node, path, value);\n                inverseParams.set[path] = originalValue;\n            });\n        }\n        return inverseParams;\n    }\n\n    updateNodes(update) {\n        const inverseParams = {\n            id: [...update.id],\n        };\n\n        if (update.by) {\n            inverseParams.by = {};\n            Object.entries(update.by).forEach(([path, value]) => {\n                inverseParams.by[path] = -value;\n            });\n            update.id.forEach((nodeId) => {\n                this.updateNode({\n                    id: nodeId,\n                    by: update.by,\n                });\n            });\n        }\n\n        if (update.set) {\n            inverseParams.set = {};\n            update.id.forEach((nodeId) => {\n                inverseParams.set[nodeId] = {};\n                const node = this.store.nodes[nodeId];\n                Object.keys(update.set[nodeId]).forEach((path) => {\n                    inverseParams.set[nodeId][path] = propByPath(node, path);\n                });\n                this.updateNode({\n                    id: nodeId,\n                    set: update.set[nodeId],\n                });\n            });\n        }\n\n        return inverseParams;\n    }\n\n    snapNode(nodes) {\n        const inverseParams = {};\n        if (!nodes.source || !nodes.target) return false;\n        const parent = this.store.nodes[nodes.source];\n        const child = this.store.nodes[nodes.target];\n\n        // Areas can have multiple children\n        if (parent.type === NodeTypes.Area) {\n            parent.children.push(nodes.target);\n            // Remove potential duplicates\n            parent.children.filter((item, i) => parent.children.indexOf(item) === i);\n            child.parent = parent.id;\n\n            inverseParams.source = nodes.source;\n            inverseParams.target = nodes.target;\n\n            // Other nodes may only have one child.\n        } else if (parent.children.length === 0) {\n            parent.children.push(nodes.target);\n            // Remove potential duplicates\n            parent.children.filter((item, i) => parent.children.indexOf(item) === i);\n            child.parent = parent.id;\n\n            inverseParams.source = nodes.source;\n            inverseParams.target = nodes.target;\n        }\n        return inverseParams.source ? inverseParams : false;\n    }\n\n    unsnapNode(nodes) {\n        const inverseParams = {};\n        if (!nodes.source || !nodes.target) return false;\n        const parent = this.store.nodes[nodes.source];\n        const child = this.store.nodes[nodes.target];\n\n        const childIndex = parent.children.indexOf(nodes.target);\n        if (childIndex > -1) {\n            parent.children.splice(childIndex, 1);\n            child.parent = null;\n            inverseParams.source = nodes.source;\n            inverseParams.target = nodes.target;\n        }\n\n        return inverseParams.source ? inverseParams : false;\n    }\n\n    createLink(params) {\n        const source = this.store.nodes[params.source];\n        const target = this.store.nodes[params.target];\n\n        const linkId = params.id ? params.id : nanoid();\n        const link = {\n            id: linkId,\n            source: params.source,\n            target: params.target,\n        };\n        this.store.links[linkId] = link;\n\n        source.links.push(linkId);\n        source.links.filter((item, i) => source.links.indexOf(item) === i);\n        target.links.push(linkId);\n        target.links.filter((item, i) => target.links.indexOf(item) === i);\n\n        return linkId;\n    }\n\n    removeLink(linkId) {\n        const link = { ...this.store.links[linkId] };\n        const source = this.store.nodes[link.source];\n        const target = this.store.nodes[link.target];\n\n        source.links.splice(source.links.indexOf(linkId), 1);\n        target.links.splice(target.links.indexOf(linkId), 1);\n\n        delete this.store.links[linkId];\n        return link;\n    }\n}\n","/* eslint-disable no-param-reassign */\n/* eslint-disable no-return-assign */\n\nimport { createMachine, assign } from 'xstate';\n\nconst ViewingState = {\n    initial: 'Idle',\n    states: {\n        Idle: {\n            on: {\n                'editing title': 'TitleEditing',\n                'space pressed': { target: 'Panning', actions: 'setPanning' },\n                'start dragging': { target: 'Dragging', actions: 'setDragging' },\n                'start linking': { target: 'Linking', actions: 'setLinking' },\n                'update selection': { target: 'Selecting', actions: 'setSelection' },\n                'create node': { target: '#Intrigue.Editing', actions: 'setEditing' },\n                'delete node': { target: 'Idle', actions: 'clearSelection' },\n                'dblclick node': { target: '#Intrigue.Editing', actions: 'setEditing' },\n            },\n        },\n\n        TitleEditing: {\n            on: { 'stop editing title': 'Idle' },\n        },\n\n        Panning: {\n            on: {\n                'space released': { target: 'Idle', actions: 'clearPanning' },\n            },\n        },\n\n        Selecting: {\n            on: {\n                'update selection': { target: 'Selecting', actions: 'setSelection' },\n                'done selecting': { target: 'Idle' },\n            },\n        },\n\n        Dragging: {\n            on: {\n                'drop enter': { target: 'Dropping', actions: 'setDropping' },\n                'stop dragging': { target: 'Idle', actions: ['clearDragging', 'clearDetaching'] },\n                'start detaching': { target: 'Detaching', actions: 'setDetaching' },\n            },\n        },\n\n        Dropping: {\n            on: {\n                'drop leave': { target: 'Dragging', actions: 'clearDropping' },\n                'stop dragging': { target: 'Idle', actions: ['clearDragging', 'clearDropping'] },\n            },\n        },\n\n        Detaching: {\n            on: {\n                detached: { target: 'Dragging', actions: 'clearDetaching' },\n                'stop detaching': { target: 'Idle', actions: 'clearDetaching' },\n            },\n        },\n\n        Linking: {\n            on: {\n                'update selection': { target: 'Idle', actions: ['clearLinking', 'setSelection'] },\n                'click on empty canvas': { target: 'Idle', actions: 'clearLinking' },\n                'create node': { target: '#Intrigue.Editing', actions: ['clearLinking', 'setEditing'] },\n            },\n        },\n    },\n};\n\nconst EditingState = {\n    initial: 'Editing',\n    states: {\n        Editing: {\n            on: {\n                'editor blur': {\n                    target: '#Intrigue.Viewing',\n                    actions: 'clearEditing',\n                },\n                'update selection': {\n                    target: '#Intrigue.Viewing',\n                    actions: ['clearEditing', 'setSelection'],\n                },\n            },\n        },\n    },\n};\n\nconst ArrangingState = {\n    initial: 'Selected',\n    states: {\n        Selected: {\n            on: {\n                'click on empty canvas': '#Intrigue.Viewing',\n                'drag node handle': 'Resizing',\n            },\n        },\n\n        Resizing: {\n            on: {\n                'drag end': 'Selected',\n            },\n        },\n    },\n};\n\nconst intrigueMachine = createMachine(\n    {\n        id: 'Intrigue',\n        initial: 'Viewing',\n        states: {\n            Viewing: { ...ViewingState },\n            Arranging: { ...ArrangingState },\n            Editing: { ...EditingState },\n        },\n        context: {\n            editing: null,\n            panning: false,\n            dragging: null,\n            dropping: null,\n            selection: [],\n            detaching: [],\n            linking: null,\n        },\n    },\n    {\n        actions: {\n            setEditing: assign({\n                editing: (context, event) => (context.editing = event.node),\n            }),\n\n            clearEditing: assign({\n                editing: (context) => (context.editing = null),\n            }),\n\n            setPanning: assign({\n                panning: (context) => (context.panning = true),\n            }),\n\n            clearPanning: assign({\n                panning: (context) => (context.panning = false),\n            }),\n\n            setDragging: assign({\n                dragging: (context, event) => (context.dragging = event.node),\n            }),\n\n            clearDragging: assign({\n                dragging: (context) => (context.dragging = null),\n            }),\n\n            setDropping: assign({\n                dropping: (context, event) => (context.dropping = event.node),\n            }),\n\n            clearDropping: assign({\n                dropping: (context) => (context.dropping = null),\n            }),\n\n            setDetaching: assign({\n                detaching: (context, event) => (context.detaching = event.detaching),\n            }),\n\n            clearDetaching: assign({\n                detaching: (context) => (context.detaching = []),\n            }),\n\n            setSelection: assign({\n                selection: (context, event) => (context.selection = event.selection),\n            }),\n\n            clearSelection: assign({\n                selection: (context) => (context.selection = []),\n            }),\n\n            setLinking: assign({\n                linking: (context, event) => (context.linking = event.node),\n            }),\n\n            clearLinking: assign({\n                linking: (context) => (context.linking = null),\n            }),\n        },\n    },\n);\n\nexport default intrigueMachine;\n// export const state = interpret(intrigueMachine).start();\n","<template>\n    <div class=\"titlebar-container\">\n        <a-row v-if=\"electron\" class=\"window noselect\" justify=\"center\" align=\"center\">\n            <a-col :span=\"8\">\n                <a-button-group style=\"margin-left: 5rem;\">\n                    <a-button type=\"text\" size=\"mini\"\n                        :disabled=\"!document.canUndo()\"\n                        @click=\"document.undo()\"\n                    >\n                        <template #icon><icon-undo /></template>\n                    </a-button>\n\n                    <a-button type=\"text\" size=\"mini\"\n                        :disabled=\"!document.canRedo()\"\n                        @click=\"document.redo()\"\n                    >\n                        <template #icon><icon-redo /></template>\n                    </a-button>\n                </a-button-group>\n            </a-col>\n            <a-col :span=\"8\" align=\"center\">\n                <b>{{fileName}}</b>\n            </a-col>\n            <a-col :span=\"8\" align=\"right\" style=\"padding-right: 0.5rem\">\n                <CopyButton size=\"mini\" :text=\"shareLink\">Share</CopyButton>\n            </a-col>\n        </a-row>\n\n        <a-row v-else class=\"browser noselect\" justify=\"center\" align=\"center\">\n            <a-col :span=\"8\">\n                <a-button-group style=\"margin-left: 1rem;\">\n                    <a-button type=\"text\" size=\"small\"\n                        :disabled=\"!document.canUndo()\"\n                        @click=\"document.undo()\"\n                    >\n                        <template #icon><icon-undo /></template>\n                    </a-button>\n\n                    <a-button type=\"text\" size=\"small\"\n                        :disabled=\"!document.canRedo()\"\n                        @click=\"document.redo()\"\n                    >\n                        <template #icon><icon-redo /></template>\n                    </a-button>\n                </a-button-group>\n            </a-col>\n            <a-col :span=\"8\" align=\"center\">\n            </a-col>\n            <a-col :span=\"8\" align=\"right\" style=\"padding-right: 0.5rem\">\n                <CopyButton size=\"small\" :text=\"shareLink\">Share</CopyButton>\n            </a-col>\n        </a-row>\n    </div>\n</template>\n\n<script>\nimport isElectron from 'is-electron';\nimport CopyButton from './CopyButton.vue';\n\nexport default {\n    name: 'TitleBar',\n    inject: ['store', 'document', 'selection', 'filePath'],\n\n    components: {\n        CopyButton,\n    },\n\n    data() {\n        return {\n            electron: isElectron(),\n        };\n    },\n\n    computed: {\n        fileName() {\n            // eslint-disable-next-line global-require\n            const { basename } = require('path');\n            return this.filePath.value ? basename(this.filePath.value) : 'Untitled';\n        },\n\n        shareLink() {\n            return `https://intrigue-app.github.io/?document=${this.store.value.metadata.id}`;\n        },\n    },\n};\n</script>\n\n<style scoped>\n.window {\n    position: fixed;\n    width: 100%;\n    height: 2rem;\n    -webkit-app-region: drag;\n    z-index: 10000;\n    background: linear-gradient(var(--background) 10%, transparent 100%)\n}\n\n.browser {\n    position: fixed;\n    width: 100%;\n    height: 2rem;\n    z-index: 10000;\n}\n</style>\n","<template>\n    <a-button\n        :type=\"type\"\n        :shape=\"shape\"\n        :size=\"size\"\n        :status=\"status\"\n        :disabled=\"copied\"\n        @click=\"copy\"\n    >\n        <slot v-if=\"!copied\"/>\n        <span v-else>Copied!</span>\n    </a-button>\n</template>\n\n<script>\nimport ultralightCopy from 'copy-to-clipboard-ultralight';\n\nexport default {\n    name: 'CopyButton',\n    props: {\n        size: String,\n        shape: String,\n        type: String,\n        status: String,\n        text: String,\n    },\n\n    data() {\n        return {\n            copied: false,\n            timer: null,\n        };\n    },\n\n    methods: {\n        copy() {\n            if (ultralightCopy(this.text)) {\n                this.copied = true;\n                if (this.timer) clearTimeout(this.timer);\n                this.timer = setTimeout(() => {\n                    this.copied = false;\n                }, 1000);\n            } else {\n                this.$message.error('Error copying to clipboard!');\n            }\n        },\n    },\n};\n</script>\n","import { render } from \"./CopyButton.vue?vue&type=template&id=11d5bf2b\"\nimport script from \"./CopyButton.vue?vue&type=script&lang=js\"\nexport * from \"./CopyButton.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./TitleBar.vue?vue&type=template&id=5ce49f0c&scoped=true\"\nimport script from \"./TitleBar.vue?vue&type=script&lang=js\"\nexport * from \"./TitleBar.vue?vue&type=script&lang=js\"\n\nimport \"./TitleBar.vue?vue&type=style&index=0&id=5ce49f0c&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5ce49f0c\"]])\n\nexport default __exports__","<template>\n    <div style=\"width: 100%; height: 100%;\">\n        <vue-infinite-viewer\n            class=\"canvas\"\n            ref=\"canvas\"\n            :style=\"{\n                'background-position': `${-x * zoom}px ${-y * zoom}px`,\n                'background-size': `${13 * zoom}px ${13 * zoom}px`,\n                '--resize-handle-height': `${activeNodeHeight}px`,\n            }\"\n            :maxPinchWheel=\"10\"\n            @scroll=\"panCanvas\"\n            @pinch=\"zoomCanvas\"\n            @dblclick=\"newNode\"\n        >\n            <div class=\"viewport\">\n                <IntrigueLink\n                    v-for=\"link in store.value.links\"\n                    :key=\"link.id\"\n                    :ref=\"link.id\"\n                    :source=\"link.source\"\n                    :target=\"link.target\"\n                />\n\n                <IntrigueLink\n                    v-if=\"linking.value\"\n                    :source=\"linking.value\"\n                    target=\"pointer-location\"\n                />\n\n                <IntrigueNode\n                    v-for=\"node in store.value.nodes\"\n                    :key=\"node.id\"\n                    :ref=\"node.id\"\n                    :node=\"node\"\n                    :selected=\"selection.some((t) => t.id === node.id)\"\n                    @dblclick.stop=\"doubleClickNode(node)\"\n                    @update-dimensions=\"$refs.moveable.updateRect\"\n                />\n\n                <!-- <div v-for=\"user in document.users\" :key=\"user.id\">\n                    <Cursor\n                        v-if=\"document.localUser.id !== user.id\"\n                        :id=\"user.id\"\n                        :name=\"user.name\"\n                        :x=\"user.cursorX\"\n                        :y=\"user.cursorY\"\n                    />\n                </div> -->\n\n                <Moveable\n                    ref=\"moveable\"\n                    className=\"moveable\"\n                    :target=\"selection\"\n                    :draggable=\"true\"\n                    :resizable=\"shouldResize\"\n                    :renderDirections=\"['e']\"\n                    @clickGroup=\"cancelSelectionWhenClickEmpty\"\n                    @drag=\"dragNodes\"\n                    @dragGroup=\"dragNodes\"\n                    @dragEnd=\"commitNodePositions\"\n                    @dragGroupEnd=\"commitNodePositions\"\n                    @resize=\"resizeNode\"\n                    @resizeEnd=\"commitNodeSize\"\n                />\n\n                <VueSelecto\n                    ref=\"selecto\"\n                    dragContainer=\".canvas\"\n                    :selectableTargets=\"['.node.selectable']\"\n                    :selectByClick=\"true\"\n                    :selectFromInside=\"false\"\n                    :toggleContinueSelect=\"['shift']\"\n                    :keyContainer=\"window\"\n                    :hitRate=\"0\"\n                    :ratio=\"0\"\n                    @dragStart=\"preventSelectionWhenDragging\"\n                    @select=\"selectNode\"\n                    @selectEnd=\"commitSelections\"\n                />\n            </div>\n        </vue-infinite-viewer>\n    </div>\n</template>\n\n<script>\nimport { defineComponent, computed } from 'vue';\n\nimport { VueInfiniteViewer } from 'vue3-infinite-viewer';\nimport Moveable from 'vue3-moveable';\nimport { VueSelecto } from 'vue3-selecto';\n\nimport { nanoid } from 'nanoid';\n\nimport { NodeTypes } from '@/store';\nimport Keyboard from '@/keyboard';\n\nimport IntrigueNode from '@/components/canvas/Node.vue';\nimport IntrigueLink from '@/components/canvas/Link.vue';\n// import Cursor from '@/components/canvas/Cursor.vue';\n\nexport default defineComponent({\n    name: 'IntrigueCanvas',\n    inject: ['document', 'store', 'state', 'send', 'editing', 'dragging', 'dropping', 'detaching', 'linking'],\n    components: {\n        VueInfiniteViewer,\n        Moveable,\n        VueSelecto,\n        IntrigueNode,\n        IntrigueLink,\n        // Cursor,\n    },\n\n    provide() {\n        return {\n            x: computed(() => this.x),\n            y: computed(() => this.y),\n            zoom: computed(() => this.zoom),\n        };\n    },\n\n    data() {\n        return {\n            x: 0,\n            y: 0,\n            zoom: 1,\n            selection: [],\n            keyboard: new Keyboard(),\n        };\n    },\n\n    methods: {\n        // Data editing methods\n\n        newNode(event) {\n            const mapped = this.mapMousePosition(event.clientX, event.clientY);\n            const nodeId = nanoid();\n            this.document.commit('createNode', {\n                id: nodeId,\n                type: NodeTypes.Note,\n                content: '',\n                x: mapped.x - 14,\n                y: mapped.y - 10,\n                w: 200,\n                h: 15,\n            });\n            this.send({\n                type: 'create node',\n                node: nodeId,\n            });\n            // if (Object.keys(this.store.value.nodes).length === 2) {\n            //     const [source, target] = Object.keys(this.store.value.nodes);\n            //     this.document.commit('createLink', { source, target });\n            //     // arrowLine(`[id=\"${nodeIds[0]}\"]`, `[id=\"${nodeIds[1]}\"]`);\n            // }\n        },\n\n        doubleClickNode(node) {\n            this.send({\n                type: 'dblclick node',\n                node: node.id,\n            });\n            console.log(this.state.value, this.editing.value);\n        },\n\n        deleteNodes(event) {\n            if (this.editing.value) return;\n            const selectedIds = this.selection.map((el) => el.id);\n            console.log(`[Canvas][deleteNodes] ${selectedIds}`);\n            this.selection = [];\n            this.send('delete node');\n            this.document.commit('deleteNodes', selectedIds);\n            // console.log(selectedIds);\n            event.preventDefault();\n        },\n\n        undo(event) {\n            if (this.editing.value === null) {\n                this.document.undo();\n                event.preventDefault();\n            }\n        },\n\n        redo(event) {\n            if (this.editing.value === null) {\n                this.document.redo();\n                event.preventDefault();\n            }\n        },\n\n        // Node wrangling methods (dragging, resizing, selecting, etc)\n        panCanvas(event) {\n            this.x = event.scrollLeft;\n            this.y = event.scrollTop;\n            this.document.updateAwareness('x', this.x);\n            this.document.updateAwareness('y', this.y);\n        },\n\n        zoomCanvas(event) {\n            this.zoom = event.zoom;\n            this.$refs.canvas.setZoom(event.zoom);\n        },\n\n        cancelSelectionWhenClickEmpty(e) {\n            this.$refs.selecto.clickTarget(e.inputEvent, e.inputTarget);\n        },\n\n        sendDragStartMessage(event) {\n            if (!event.events && event.target) {\n                this.send({\n                    type: 'start dragging',\n                    node: event.target.id,\n                });\n            } else if (event.targets) {\n                event.target.classList.add('clickthrough');\n                // console.log(event.target);\n                event.targets.some((target) => {\n                    const rect = target.getBoundingClientRect();\n                    if (\n                        rect.left <= event.clientX\n                        && rect.right >= event.clientX\n                        && rect.top <= event.clientY\n                        && rect.bottom >= event.clientY\n                    ) {\n                        this.send({\n                            type: 'start dragging',\n                            node: target.id,\n                        });\n                        return false;\n                    }\n                    return true;\n                });\n            }\n        },\n\n        dragNodes(event) {\n            this.sendDragStartMessage(event);\n\n            let events;\n            if (!event.events && event.target) {\n                // Dragging only one node\n                events = [event];\n            } else if (event.events) {\n                // Dragging multiple nodes\n                events = event.events;\n            }\n\n            // See if any nodes in the current selection will be detached from parent if moved.\n            const nodes = events.map((e) => this.store.value.nodes[e.target.id]);\n            const nodeIds = events.map((e) => e.target.id);\n            const toDetach = [];\n            nodes.forEach((node) => {\n                if (node.parent && !nodeIds.includes(node.parent)) {\n                    toDetach.push({\n                        source: node.parent,\n                        target: node.id,\n                    });\n                }\n            });\n            if (toDetach.length > 0) {\n                this.send({ type: 'start detaching', detaching: toDetach });\n                const distance = Math.sqrt(\n                    event.dist[0] * event.dist[0] + event.dist[1] * event.dist[1],\n                );\n                // console.log(distance);\n\n                if (distance > 30) {\n                    // Detach these nodes\n                    this.send('detached');\n                    toDetach.forEach((pair) => {\n                        this.document.commit('unsnapNode', pair);\n                    });\n                } else {\n                    return;\n                }\n            }\n\n            // We don't commit here because we don't want to\n            // leave undo history for rapid-firing events.\n            events.forEach((e) => {\n                const node = this.store.value.nodes[e.target.id];\n                if (node.parent) return;\n                this.document.updateNode({\n                    id: e.target.id,\n                    set: {\n                        currentX: e.translate[0],\n                        currentY: e.translate[1],\n                    },\n                });\n            });\n        },\n\n        commitNodePositions(event) {\n            // If dropping has value, then handle that first.\n            // Note that in this case, the action to be commited is snapNode,\n            // not updateNodes\n            if (this.dropping.value) {\n                console.log('[Canvas][commitNodePositions] Dropping', this.dragging.value, 'on', this.dropping.value);\n                this.document.commit('snapNode', {\n                    source: this.dropping.value,\n                    target: this.dragging.value,\n                });\n                this.send('stop dragging');\n            }\n\n            // If we're detaching half-way, then don't commit any position update and just return.\n            if (this.detaching.value.length > 0) {\n                console.log('[Canvas][commitNodePositions] Detaching ended halfway.');\n                this.send('stop detaching');\n                return;\n            }\n\n            // If event.lastEvent exists, then it means that the node moved a little.\n            // Basically, not a \"in-place click\".\n            if (event.lastEvent) {\n                if (event.lastEvent.target) {\n                    event.lastEvent.target.classList.remove('clickthrough');\n                }\n                // Only update the parents, and the descendants will follow.\n                const toUpdate = [];\n                this.selection.forEach((e) => {\n                    const node = this.store.value.nodes[e.id];\n                    if (!node.parent) toUpdate.push(e.id);\n                });\n                this.document.commit('updateNodes', {\n                    id: toUpdate,\n                    by: {\n                        x: event.lastEvent.dist[0],\n                        y: event.lastEvent.dist[1],\n                    },\n                });\n            }\n            this.send('stop dragging');\n        },\n\n        preventSelectionWhenDragging(e) {\n            const { target } = e.inputEvent;\n            if (\n                this.$refs.moveable.isMoveableElement(target)\n                || this.selection.some((t) => t === target || t.contains(target))\n                // || target.matches('.moveable-area')\n                // || target.matches('.moveable-control')\n            ) {\n                e.stop();\n            }\n        },\n\n        selectNode(e) {\n            if (this.linking.value) {\n                if (e.selected.length === 1 && e.selected[0].id !== this.linking.value) {\n                    console.log(`[Canvas][selectNode] Linking ${this.linking.value} to ${e.selected[0].id}`);\n                    this.document.commit('createLink', {\n                        source: this.linking.value,\n                        target: e.selected[0].id,\n                    });\n                    return;\n                }\n            }\n            this.send({\n                type: 'update selection',\n                selection: e.selected.map((el) => el.id),\n            });\n        },\n\n        commitSelections(e) {\n            if (e.isDragStart) {\n                e.inputEvent.preventDefault();\n                setTimeout(() => {\n                    this.$refs.moveable.dragStart(e.inputEvent);\n                });\n            }\n            this.selection = e.selected;\n            const selectedIds = e.selected.map((el) => el.id);\n            this.document.updateAwareness('selection', selectedIds);\n            this.send({\n                type: 'done selecting',\n                selection: selectedIds,\n            });\n        },\n\n        resizeNode(event) {\n            // We still need to change the width here, otherwise the resizing is very unresponsive.\n            // TODO: See if we can get around this.\n            const { target } = event;\n            target.style.width = `${event.width}px`;\n            this.document.updateNode({\n                id: event.target.id,\n                set: {\n                    currentWidth: event.width,\n                },\n            });\n        },\n\n        commitNodeSize(event) {\n            if (!event.lastEvent) return;\n            this.document.commit('updateNode', {\n                id: event.target.id,\n                set: {\n                    w: event.lastEvent.width,\n                    h: event.target.offsetHeight,\n                },\n            });\n        },\n\n        // Utility functions\n        mapMousePosition(x, y) {\n            const mappedX = x / this.zoom + this.x;\n            const mappedY = y / this.zoom + this.y;\n            return { x: mappedX, y: mappedY };\n        },\n\n        gatherDescendants(root, includeRoot) {\n            const descendants = includeRoot ? new Set([root.id]) : new Set();\n            root.children.forEach((childId) => {\n                const child = this.store.value.nodes[childId];\n                const childDescendants = this.gatherDescendants(child, true);\n                childDescendants.forEach((descendantId) => {\n                    descendants.add(descendantId);\n                });\n            });\n            return [...descendants];\n        },\n\n        // Event handlers\n        updateCursorPosition(event) {\n            const mapped = this.mapMousePosition(event.clientX, event.clientY);\n            this.document.updateAwareness('cursorX', mapped.x);\n            this.document.updateAwareness('cursorY', mapped.y);\n        },\n\n        startPanning(event) {\n            if (!this.editing) {\n                console.log('[Canvas][startPanning] Space pressed.', event);\n                this.send('space pressed');\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        },\n\n        stopPanning(event) {\n            if (!this.editing) {\n                console.log('[Canvas][startPanning] Space released.', event);\n                this.send('space released');\n                event.preventDefault();\n            }\n        },\n    },\n\n    computed: {\n        activeNodeHeight() {\n            if (this.selection.length > 0) {\n                const node = this.store.value.nodes[this.selection[0].id];\n                if (!node) return 0;\n                if (!node.currentHeight) return this.selection[0].clientHeight;\n                if (node.currentHeight <= 20) {\n                    return node.currentHeight - 8;\n                }\n                return node.currentHeight - 12;\n            }\n            return 0;\n        },\n\n        shouldResize() {\n            if (this.selection.length !== 1) return false;\n            if (!this.store.value.nodes[this.selection[0].id]) return false;\n            if (this.store.value.nodes[this.selection[0].id].parent) return false;\n            return true;\n        },\n    },\n\n    mounted() {\n        // Create handler to update cursor position to remote users.\n        // Don't forget to unregister upon leaving this page!\n        window.addEventListener('mousemove', this.updateCursorPosition);\n        // Register keyboard shortcuts. Need to unregister as well.\n        this.keyboard.on('keydown', 'Space', this.startPanning);\n        this.keyboard.on('keyup', 'Space', this.stopPanning);\n        this.keyboard.on('keydown', 'Backspace', this.deleteNodes);\n        this.keyboard.on('keydown', '$mod+Z', this.undo);\n        this.keyboard.on('keydown', '$mod+Shift+Z', this.redo);\n\n        this.document.on('synced', () => {\n            // Clear selections.\n            this.document.updateAwareness('selection', []);\n        });\n    },\n\n    beforeUnmount() {\n        window.removeEventListener('mousemove', this.updateCursorPosition);\n        this.keyboard.removeListeners();\n    },\n});\n</script>\n\n<style>\n.canvas {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    background: transparent;\n    background-image: radial-gradient(var(--color-neutral-3) 10%, transparent 10%);\n    /* background-size: 15px 15px; */\n    /* background-position: center; */\n}\n</style>\n","import { createKeybindingsHandler } from 'tinykeys';\n\nexport default class Keyboard {\n    constructor() {\n        this.handlers = [];\n    }\n\n    on(event, key, handler) {\n        const options = {};\n        options[key] = handler;\n        const keyBindingHandler = createKeybindingsHandler(options);\n        window.addEventListener(event, keyBindingHandler);\n        this.handlers.push({\n            event,\n            handler: keyBindingHandler,\n        });\n    }\n\n    removeListeners() {\n        this.handlers.forEach((handler) => {\n            window.removeEventListener(handler.event, handler.handler);\n        });\n    }\n}\n","<template>\n    <div\n        class=\"node\"\n        ref=\"node\"\n        :id=\"node.id\"\n        :class=\"{\n            selected: selection.value.includes(node.id),\n            dropping: dropping.value === node.id,\n            noselect: editing.value !== node.id,\n            clickthrough: dragging.value && selection.value.includes(node.id),\n            selectable: !selectedByRemoteUsers,\n            'remote-selected': selectedByRemoteUsers,\n            'snap-top': !node.parent && node.children.length > 0,\n            'snap-middle': node.parent && node.children.length > 0,\n            'snap-bottom': node.parent && node.children.length === 0,\n            reference: isReference,\n        }\"\n        :style=\"styles\"\n        :color=\"isReference ? 'primary' : 'white'\"\n        :gradient=\"isReference\"\n        @mouseenter=\"onMouseEnter\"\n        @focusin=\"onMouseEnter\"\n        @mouseleave=\"onMouseLeave\"\n        @focusout=\"onMouseLeave\"\n    >\n        <note\n            v-if=\"isNote\"\n            :id=\"node.id\"\n            :content=\"node.content\"\n            :editing=\"editing.value === node.id\"\n            @change=\"parseNoteContent\"\n        />\n\n        <reference\n            v-if=\"isReference\"\n            :id=\"node.id\"\n            :type=\"node.referenceType\"\n            :identifier=\"node.identifier\"\n            :title=\"node.title\"\n            :author=\"node.author\"\n        />\n\n        <button class=\"link-button\" v-if=\"showLinkButton\"\n            @mousedown.stop\n            @mouseup.stop\n            @dblclick.stop\n            @click.stop=\"onLinkButtonClick\"\n        >\n            <icon-link/>\n        </button>\n    </div>\n</template>\n\n<script>\nimport { defineComponent } from 'vue';\nimport { NodeTypes } from '@/store';\n\nimport Note from '@/components/canvas/node/Note.vue';\nimport Reference from '@/components/canvas/node/Reference.vue';\nimport { extractIdentifier, fetchLiteratureInfo } from '@/literature';\n\nexport default defineComponent({\n    name: 'IntrigueNode',\n    inject: ['document', 'store', 'state', 'send', 'editing', 'dragging', 'dropping', 'selection'],\n    components: {\n        Note,\n        Reference,\n    },\n    props: {\n        node: {\n            type: Object,\n            required: true,\n        },\n        selected: {\n            type: Boolean,\n            default: false,\n        },\n    },\n\n    data() {\n        return {\n            x: this.node.x,\n            y: this.node.y,\n            w: this.node.w,\n            h: this.node.h,\n            parent: null,\n            // content: this.node.content,\n        };\n    },\n\n    methods: {\n        onMouseEnter() {\n            this.send({\n                type: 'drop enter',\n                node: this.node.id,\n            });\n        },\n\n        onMouseLeave() {\n            this.send({\n                type: 'drop leave',\n                node: this.node.id,\n            });\n        },\n\n        onLinkButtonClick() {\n            this.send('start linking', { node: this.node.id });\n        },\n\n        observeParent() {\n            this.parentWatchers = [\n                this.$watch('parent.currentX', this.updateDimensionsFromParent),\n                this.$watch('parent.currentY', this.updateDimensionsFromParent),\n                this.$watch('parent.currentWidth', this.updateDimensionsFromParent),\n                this.$watch('parent.currentHeight', this.updateDimensionsFromParent),\n            ];\n        },\n\n        updateDimensions() {\n            if (!this.$refs.node) return;\n            const height = this.$refs.node.clientHeight;\n            this.document.updateNode({\n                id: this.node.id,\n                set: {\n                    currentHeight: height,\n                },\n            });\n            this.$emit('update-dimensions');\n        },\n\n        updateDimensionsFromParent() {\n            // console.log('Updating dimensions from parent', this.node.id);\n            this.document.updateNode({\n                id: this.node.id,\n                set: {\n                    x: this.parent.currentX,\n                    y: this.parent.currentY + this.parent.currentHeight + 5,\n                    w: this.parent.currentWidth,\n                    currentX: this.parent.currentX,\n                    currentY: this.parent.currentY + this.parent.currentHeight + 5,\n                    currentWidth: this.parent.currentWidth,\n                    currentHeight: this.$refs.node.clientHeight,\n                },\n            });\n        },\n\n        parseNoteContent(content) {\n            const identifier = extractIdentifier(content);\n            if (identifier) {\n                console.log(`[Node][parseNoteContent@extractIdentifier] ${JSON.stringify(identifier)}`);\n                this.document.commit('updateNode', {\n                    id: this.node.id,\n                    set: {\n                        type: NodeTypes.Reference,\n                        identifier: identifier.identifier,\n                        referenceType: identifier.type,\n                    },\n                });\n\n                if (identifier.type === 'zotero') {\n                    this.document.commit('updateNode', {\n                        id: this.node.id,\n                        set: {\n                            title: identifier.title,\n                            author: identifier.author,\n                            identifier: identifier.identifier,\n                            record: identifier,\n                        },\n                    });\n                } else if (identifier.type === 'zotero-link') {\n                    this.document.commit('updateNode', {\n                        id: this.node.id,\n                        set: {\n                            title: undefined,\n                            author: undefined,\n                            identifier: identifier.identifier,\n                            record: identifier,\n                        },\n                    });\n                } else {\n                    fetchLiteratureInfo(identifier.type, identifier.identifier).then((info) => {\n                        console.log(`[Node][parseNoteContent@fetchLiteratureInfo] ${info}`);\n                        this.document.commit('updateNode', {\n                            id: this.node.id,\n                            set: {\n                                title: info.title,\n                                author: info.author,\n                                identifier: info.identifier\n                                    ? info.identifier : identifier.identifier,\n                                record: info,\n                            },\n                        });\n                    });\n                }\n            }\n        },\n    },\n\n    mounted() {\n        // console.log('Mounted', this.node.id);\n        this.observer = new ResizeObserver(this.updateDimensions);\n        this.observer.observe(this.$refs.node);\n\n        this.document.updateNode({\n            id: this.node.id,\n            set: {\n                currentX: this.node.x,\n                currentY: this.node.y,\n                currentHeight: this.node.h ? this.node.h : this.$refs.node.clientHeight,\n            },\n        });\n\n        if (this.node.parent) {\n            this.parent = this.store.value.nodes[this.node.parent];\n            this.observeParent();\n            this.updateDimensionsFromParent();\n        }\n    },\n\n    breforeUnmount() {\n        console.log('[Node][breforeUnmount] Unmounting', this.node.id);\n        this.observer.disconnect();\n        this.parentWatchers.forEach((removeParentWatcher) => removeParentWatcher());\n    },\n\n    deactivated() {\n        console.log('[Node][deactivated] Deactivated', this.node.id);\n        this.observer.disconnect();\n        this.parentWatchers.forEach((removeParentWatcher) => removeParentWatcher());\n    },\n\n    computed: {\n        styles() {\n            return {\n                width: `${this.w}px`,\n                transform: `translate(${this.x}px, ${this.y}px)`,\n                '--bg-color': 'rgb(250, 248, 229)',\n                '--border-color': 'rgb(233, 183, 109)',\n                'z-index': this.index,\n            };\n        },\n\n        selectedByRemoteUsers() {\n            console.log(this.document.users);\n            let selected = false;\n            Object.entries(this.document.users).some(([userId, userData]) => {\n                if (userId === this.document.userId) return false;\n                if (userData.selection.includes(this.node.id)) {\n                    selected = true;\n                    return true;\n                }\n                return false;\n            });\n            return selected;\n        },\n\n        isNote() {\n            return this.node.type === NodeTypes.Note;\n        },\n\n        isReference() {\n            return this.node.type === NodeTypes.Reference;\n        },\n\n        index() {\n            let index = 0;\n            let current = this.node;\n            while (current.parent) {\n                index += 1;\n                current = this.store.value.nodes[current.parent];\n            }\n            if (this.selection.value.includes(this.node.id)) {\n                return index + 2;\n            }\n            return index;\n        },\n\n        showLinkButton() {\n            if (this.selection.value.length !== 1) return false;\n            if (!this.selection.value.includes(this.node.id)) return false;\n            return true;\n        },\n    },\n\n    watch: {\n        // eslint-disable-next-line func-names\n        'node.currentX': function () {\n            // console.log('node.currentX changed', this.node.id);\n            this.x = this.node.currentX;\n        },\n        // eslint-disable-next-line func-names\n        'node.currentY': function () {\n            this.y = this.node.currentY;\n        },\n        // eslint-disable-next-line func-names\n        'node.currentWidth': function () {\n            this.w = this.node.currentWidth;\n        },\n        // eslint-disable-next-line func-names\n        'node.x': function () {\n            // console.log('node.x changed', this.node.id);\n            this.document.updateNode({\n                id: this.node.id,\n                set: { currentX: this.node.x },\n            });\n        },\n        // eslint-disable-next-line func-names\n        'node.y': function () {\n            this.document.updateNode({\n                id: this.node.id,\n                set: { currentY: this.node.y },\n            });\n        },\n        // eslint-disable-next-line func-names\n        'node.w': function () {\n            this.document.updateNode({\n                id: this.node.id,\n                set: { currentWidth: this.node.w },\n            });\n        },\n        // eslint-disable-next-line func-names\n        'node.parent': function () {\n            if (this.node.parent) {\n                this.parent = this.store.value.nodes[this.node.parent];\n                this.observeParent();\n                this.updateDimensionsFromParent();\n            } else {\n                this.parent = null;\n                this.parentWatchers.forEach((removeParentWatcher) => removeParentWatcher());\n                this.parentWatchers = [];\n            }\n        },\n    },\n});\n</script>\n\n<style>\n.node {\n    --node-corner: 0.7rem;\n    position: absolute;\n    top: 0;\n    left: 0;\n\n    font-size: 12px;\n\n    border-radius: var(--node-corner);\n    padding: 0.2rem 0.5rem;\n    margin: -1px;\n    background: rgb(250, 248, 229);\n    border: 1px solid rgb(233, 183, 109);\n\n    word-wrap: break-word;\n    /* background: var(--bg-color); */\n    cursor: text;\n    z-index: 1;\n}\n\n.link-button {\n    position: absolute;\n    /* top: calc(50% - 0.5rem); */\n    top: -0.9rem;\n    left: calc(100% - 0.1rem);\n    padding: 0.1rem;\n    padding-left: 0.2rem;\n    padding-right: 0.2rem;\n    border-radius: var(--node-corner);\n    border: 0px transparent;\n    background: rgb(255, 112, 143);\n    color: white;\n    cursor: pointer;\n    z-index: 100 !important;\n}\n\n.link-button:hover {\n    background: rgb(255, 137, 163);\n}\n\n.link-button:active {\n    background: rgb(255, 112, 143);\n}\n\n.reference {\n    background: rgb(203, 227, 250);\n    border: 1px solid rgb(91, 169, 247);\n}\n\n.selected {\n    margin: -2px;\n    border: 2px solid;\n    border-color: rgb(255, 112, 143) !important;\n}\n\n.snap-top {\n    border-radius: var(--node-corner) var(--node-corner) 0 0;\n}\n\n.snap-middle {\n    border-radius: 0;\n}\n\n.snap-bottom {\n    border-radius: 0 0 var(--node-corner) var(--node-corner);\n}\n\n.noselect {\n    -webkit-touch-callout: none; /* iOS Safari */\n    -webkit-user-select: none; /* Safari */\n    -khtml-user-select: none; /* Konqueror HTML */\n    -moz-user-select: none; /* Old versions of Firefox */\n    -ms-user-select: none; /* Internet Explorer/Edge */\n    user-select: none; /* Non-prefixed version, currently\n                                  supported by Chrome, Edge, Opera and Firefox */\n}\n\n.node.noselect {\n    cursor: pointer;\n}\n\n.content {\n    padding: 0.4rem;\n    padding-right: 1rem;\n}\n\n.dropping {\n    margin: -2px;\n    border-width: 2px;\n    z-index: 0;\n}\n\n.remote-selected {\n    margin: -2px;\n    border: 2px solid;\n    border-color: gray !important;\n    pointer-events: none;\n}\n\n.moveable-line {\n    background: transparent !important;\n}\n\n.moveable-control.moveable-origin {\n    border-color: transparent !important;\n    background: transparent !important;\n}\n\n.moveable-control {\n    width: 3.5px !important;\n    height: var(--resize-handle-height) !important;\n    background: transparent !important;\n    margin-top: calc(var(--resize-handle-height) / -2) !important;\n    margin-left: -9px !important;\n    border-radius: 0px !important;\n    border-left: 1px solid rgba(0, 0, 0, 0.15) !important;\n    border-right: 1px solid rgba(0, 0, 0, 0.15) !important;\n    border-top: 0px solid transparent !important;\n    border-bottom: 0px solid transparent !important;\n}\n\n.clickthrough {\n    pointer-events: none;\n}\n</style>\n","<template>\n    <div class=\"note\" ref=\"note\">\n        <editor-content :editor=\"editor\" />\n    </div>\n</template>\n\n<script>\nimport { defineComponent } from 'vue';\nimport { Editor, EditorContent } from '@tiptap/vue-3';\nimport StarterKit from '@tiptap/starter-kit';\nimport Highlight from '@tiptap/extension-highlight';\nimport Link from '@tiptap/extension-link';\n\nexport default defineComponent({\n    name: 'IntrigueNote',\n    inject: ['document', 'store', 'state', 'send'],\n    components: {\n        EditorContent,\n    },\n    props: {\n        id: String,\n        content: String,\n        editing: Boolean,\n    },\n\n    data() {\n        return {\n            editor: null,\n        };\n    },\n\n    mounted() {\n        this.editor = new Editor({\n            content: this.content,\n            extensions: [\n                StarterKit,\n                Highlight,\n                Link.configure({\n                    protocols: ['zotero'],\n                }),\n            ],\n            autofocus: this.editing,\n            editable: this.editing,\n        });\n\n        this.editor.on('blur', this.onEditorBlur);\n    },\n\n    beforeUnmount() {\n        this.editor.destroy();\n    },\n\n    methods: {\n        onEditorBlur() {\n            this.send('editor blur');\n            if (this.editor.getHTML() === '<p></p>') {\n                this.document.deleteNode(this.id);\n            } else {\n                this.document.commit('updateNode', {\n                    id: this.id,\n                    set: {\n                        content: this.editor.getHTML(),\n                    },\n                });\n                this.$emit('change', this.editor.getText());\n            }\n        },\n    },\n\n    watch: {\n        content() {\n            this.editor.commands.setContent(this.content);\n        },\n\n        editing() {\n            this.editor.setEditable(this.editing);\n            if (this.editing) {\n                console.log(`[Note][watch@editing] Editing: ${this.editing}, ${this.id}`);\n                this.editor.commands.focus('end');\n            } else {\n                this.editor.commands.blur();\n            }\n        },\n    },\n});\n</script>\n\n<style>\n.ProseMirror {\n    outline: none;\n    outline-style: none;\n    box-shadow: none;\n    border-color: transparent;\n}\n\n.ProseMirror * {\n    margin-block-start: 0.2rem;\n    margin-block-end: 0.2rem;\n    margin: 0px;\n}\n\n.ProseMirror h1,\nh2,\nh3 {\n    margin-block-start: 0.5rem;\n    margin: 0px;\n}\n\n.ProseMirror ul {\n    padding-inline-start: 1.2rem;\n}\n\n.ProseMirror p.is-editor-empty:first-child::before {\n    content: attr(data-placeholder);\n    float: left;\n    /* color: #adb5bd; */\n    color: var(--va-gray);\n    pointer-events: none;\n    height: 0;\n}\n</style>\n","import { render } from \"./Note.vue?vue&type=template&id=59589eac\"\nimport script from \"./Note.vue?vue&type=script&lang=js\"\nexport * from \"./Note.vue?vue&type=script&lang=js\"\n\nimport \"./Note.vue?vue&type=style&index=0&id=59589eac&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div class=\"reference-content\" ref=\"reference\" @dblclick.stop.prevent=\"showFullText\">\n        <span class=\"title\"> {{ title ? title : 'Fetching title...' }} </span> <br />\n        <span class=\"authors\">\n            {{ author ? formatAuthors(author) : 'Fetching authors...' }}\n        </span>  <br />\n        <span class=\"identifier\"> {{ identifier ? identifier : '' }} </span>\n    </div>\n</template>\n\n<script>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n    name: 'IntrigueReference',\n    inject: ['document', 'store', 'state', 'send'],\n    components: {},\n    props: {\n        id: String,\n        type: String,\n        title: String,\n        author: String,\n        identifier: String,\n    },\n\n    methods: {\n        formatAuthors(authors) {\n            let authorsString = '';\n            authors.forEach((author, i) => {\n                authorsString += author.family;\n                if (i === authors.length - 2) {\n                    authorsString += authors.length === 2 ? ' and ' : ', and ';\n                } else if (i < authors.length - 2) {\n                    authorsString += ', ';\n                }\n            });\n            return authorsString;\n        },\n\n        showFullText() {\n            if (this.type === 'zotero' || this.type === 'zotero-link') {\n                window.open(this.identifier);\n            } else if (this.type === 'doi') {\n                window.open(`https://sci-hub.se/${this.data.identifier}`);\n            } else if (this.type === 'isbn') {\n                window.open(`http://libgen.rs/search.php?req=${this.data.identifier}`);\n            } else if (this.type === 'url') {\n                window.open(this.identifier);\n            }\n        },\n    },\n});\n</script>\n\n<style scoped>\n.title {\n    font-weight: bold;\n}\n\n.authors {\n    font-weight: normal;\n}\n\n.identifier {\n    font-weight: normal;\n    font-style: italic;\n}\n</style>\n","import { render } from \"./Reference.vue?vue&type=template&id=8d4a73d4&scoped=true\"\nimport script from \"./Reference.vue?vue&type=script&lang=js\"\nexport * from \"./Reference.vue?vue&type=script&lang=js\"\n\nimport \"./Reference.vue?vue&type=style&index=0&id=8d4a73d4&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8d4a73d4\"]])\n\nexport default __exports__","import * as linkify from 'linkifyjs';\n\nimport doi from 'identifiers-doi';\nimport Cite from 'citation-js';\nimport axios from 'axios';\n\nexport function extractIsbn(subject) {\n    // Checks for ISBN-10 or ISBN-13 format\n    // eslint-disable-next-line operator-linebreak\n    const regex =\n        /^(?:ISBN(?:-1[03])?:? )?(?=[0-9X]{10}$|(?=(?:[0-9]+[- ]){3})[- 0-9X]{13}$|97[89][0-9]{10}$|(?=(?:[0-9]+[- ]){4})[- 0-9]{17}$)(?:97[89][- ]?)?[0-9]{1,5}[- ]?[0-9]+[- ]?[0-9]+[- ]?[0-9X]$/;\n\n    if (regex.test(subject)) {\n        // Remove non ISBN digits, then split into an array\n        const chars = subject.replace(/[- ]|^ISBN(?:-1[03])?:?/g, '').split('');\n        // Remove the final ISBN digit from `chars`, and assign it to `last`\n        const last = chars.pop();\n        let sum = 0;\n        let check;\n        let i;\n\n        if (chars.length === 9) {\n            // Compute the ISBN-10 check digit\n            chars.reverse();\n            for (i = 0; i < chars.length; i += 1) {\n                sum += (i + 2) * parseInt(chars[i], 10);\n            }\n            check = 11 - (sum % 11);\n            if (check === 10) {\n                check = 'X';\n            } else if (check === 11) {\n                check = '0';\n            }\n        } else {\n            // Compute the ISBN-13 check digit\n            for (i = 0; i < chars.length; i += 1) {\n                sum += ((i % 2) * 2 + 1) * parseInt(chars[i], 10);\n            }\n            check = 10 - (sum % 10);\n            if (check === 10) {\n                check = '0';\n            }\n        }\n\n        if (check === last) {\n            const final = subject.match(regex)[0];\n            return final;\n        }\n    }\n    return false;\n}\n\nexport function extractIdentifier(content) {\n    // Check ISBN\n    const isbnString = extractIsbn(content);\n    if (isbnString) {\n        return {\n            type: 'isbn',\n            identifier: isbnString,\n        };\n    }\n    // Check DOI\n    const doiStrings = doi.extract(content);\n    if (doiStrings.length > 0) {\n        return {\n            type: 'doi',\n            identifier: doiStrings[0],\n        };\n    }\n\n    // Check Zotero Paste\n    try {\n        const data = JSON.parse(content);\n        if (data.source === 'zotero') {\n            return {\n                type: 'zotero',\n                identifier: data.url,\n                ...data,\n            };\n        }\n    } catch (e) {\n        // Do nothing here.\n    }\n\n    // Check Zotero URL\n    const zotero = linkify.find(content, 'url').filter(\n        (item) => item.value.startsWith('zotero://'),\n    );\n    if (zotero.length > 0) {\n        return {\n            type: 'zotero-link',\n            identifier: zotero[0].href,\n        };\n    }\n\n    // Check URL\n    const urls = linkify.find(content, 'url');\n    if (urls.length > 0) {\n        return {\n            type: 'url',\n            identifier: urls[0].href,\n        };\n    }\n    return false;\n}\n\nexport function fetchLiteratureInfo(type, identifier) {\n    console.log(type, identifier);\n    return new Promise((resolve, reject) => {\n        if (type === 'url') {\n            axios.get(identifier).then((data) => {\n                console.log(data.request);\n                const matches = data.data.match(/<title>(.*?)<\\/title>/);\n                resolve({\n                    title: matches[1],\n                    author: [{ family: 'Web link' }],\n                    identifier: data.request.responseURL,\n                });\n            }).catch((err) => {\n                reject(err);\n            });\n        } else {\n            // Handles both BibTex and DOIs.\n            // eslint-disable-next-line no-new, new-cap\n            new Cite.async(identifier, (data) => {\n                const info = data.data[0];\n                // eslint-disable-next-line no-underscore-dangle\n                delete info._graph;\n                resolve(\n                    JSON.parse(JSON.stringify(info)),\n                );\n            });\n        }\n    });\n}\n","import { render } from \"./Node.vue?vue&type=template&id=25348257\"\nimport script from \"./Node.vue?vue&type=script&lang=js\"\nexport * from \"./Node.vue?vue&type=script&lang=js\"\n\nimport \"./Node.vue?vue&type=style&index=0&id=25348257&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <svg\n        style=\"position: fixed; top: 0; left: 0; width: 100vw; height: 100vh\"\n        width=\"100vw\"\n        height=\"100vh\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n    >\n        <path ref=\"arrow\"\n            style=\"cursor: pointer\"\n            :d=\"`M ${sx} ${sy} C ${c1x} ${c1y}, ${c2x} ${c2y}, ${ex} ${ey}`\"\n            :stroke=\"color\"\n            :strokeWidth=\"arrowHeadSize / 2\"\n            fill=\"none\"\n        />\n        <polygon\n            :points=\"`0,${-arrowHeadSize} ${arrowHeadSize *\n            2},0, 0,${arrowHeadSize}`\"\n            :transform=\"`translate(${ex}, ${ey}) rotate(${ae})`\"\n            fill={color}\n        />\n    </svg>\n</template>\n\n<script>\n// import { nextTick } from 'vue';\nimport { getBoxToBoxArrow } from 'curved-arrows';\n\nexport default {\n    name: 'IntrigueLink',\n    inject: ['store', 'x', 'y', 'zoom'],\n\n    props: {\n        source: {\n            type: String,\n            required: true,\n        },\n        target: {\n            type: String,\n            required: true,\n        },\n        text: {\n            type: String,\n            default: '',\n        },\n        color: {\n            type: String,\n            default: '#9A9A9B',\n        },\n        arrowHeadSize: {\n            type: Number,\n            default: 4,\n        },\n    },\n\n    data() {\n        const sourceNode = this.store.value.nodes[this.source];\n        const targetNode = this.store.value.nodes[this.target];\n        if (!targetNode) {\n            window.addEventListener('mousemove', this.updateLine);\n        }\n\n        return {\n            sourceNode,\n            targetNode,\n            sx: 0,\n            sy: 0,\n            c1x: 0,\n            c1y: 0,\n            c2x: 0,\n            c2y: 0,\n            ex: 0,\n            ey: 0,\n            ae: 0,\n            as: 0,\n        };\n    },\n\n    mounted() {\n        this.$refs.arrow.addEventListener('click', this.onClick);\n        this.updateLine();\n    },\n\n    beforeUnmount() {\n        window.removeEventListener('mousemove', this.updateLine);\n    },\n\n    methods: {\n        onClick() {\n            console.log('click');\n        },\n\n        updateLine() {\n            const sourceElement = document.querySelector(`[id=\"${this.source}\"]`);\n            const targetElement = document.querySelector(`[id=\"${this.target}\"]`);\n            const sourceBox = this.getBoundingBox(sourceElement, this.sourceNode);\n            const targetBox = this.getBoundingBox(targetElement, this.targetNode);\n\n            const [sx, sy, c1x, c1y, c2x, c2y, ex, ey, ae] = getBoxToBoxArrow(\n                sourceBox.x,\n                sourceBox.y,\n                sourceBox.w,\n                sourceBox.h,\n                targetBox.x,\n                targetBox.y,\n                targetBox.w,\n                targetBox.h,\n                { padEnd: this.arrowHeadSize },\n            );\n\n            this.sx = sx;\n            this.sy = sy;\n            this.c1x = c1x;\n            this.c1y = c1y;\n            this.c2x = c2x;\n            this.c2y = c2y;\n            this.ex = ex;\n            this.ey = ey;\n            this.ae = ae;\n        },\n\n        map(value) {\n            return value / this.zoom.value + this.x.value;\n        },\n\n        getBoundingBox(element, data) {\n            const rect = element.getBoundingClientRect();\n            const cs = getComputedStyle(element);\n            const paddingX = parseFloat(cs.paddingLeft) + parseFloat(cs.paddingRight);\n            // const paddingY = parseFloat(cs.paddingTop) + parseFloat(cs.paddingBottom);\n\n            // const borderX = parseFloat(cs.borderLeftWidth) + parseFloat(cs.borderRightWidth);\n            // const borderY = parseFloat(cs.borderTopWidth) + parseFloat(cs.borderBottomWidth);\n\n            // const elementWidth = element.offsetWidth - paddingX - borderX;\n            // const elementHeight = element.offsetHeight - paddingY - borderY;\n\n            // const centerX = element.offsetLeft + element.offsetWidth / 2;\n            // const centerY = element.offsetTop + element.offsetHeight / 2;\n\n            return {\n                x: data ? data.currentX : this.map(rect.x),\n                y: data ? data.currentY : this.map(rect.y),\n                w: data ? data.currentWidth + paddingX : this.map(rect.width),\n                h: element.offsetHeight - 2,\n            };\n        },\n    },\n\n    watch: {\n        sourceNode: {\n            deep: true,\n            handler() {\n                this.updateLine();\n            },\n        },\n\n        targetNode: {\n            deep: true,\n            handler() {\n                this.updateLine();\n            },\n        },\n\n        x: {\n            deep: true,\n            handler() {\n                this.updateLine();\n            },\n        },\n\n        y: {\n            deep: true,\n            handler() {\n                this.updateLine();\n            },\n        },\n\n        zoom: {\n            deep: true,\n            handler() {\n                this.updateLine(true);\n            },\n        },\n    },\n};\n</script>\n","import { render } from \"./Link.vue?vue&type=template&id=682d20d3\"\nimport script from \"./Link.vue?vue&type=script&lang=js\"\nexport * from \"./Link.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Canvas.vue?vue&type=template&id=70830cea\"\nimport script from \"./Canvas.vue?vue&type=script&lang=js\"\nexport * from \"./Canvas.vue?vue&type=script&lang=js\"\n\nimport \"./Canvas.vue?vue&type=style&index=0&id=70830cea&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div id=\"pointer-location\" :style=\"{left: `${x}px`, top: `${y}px`}\"/>\n</template>\n\n<script>\nexport default {\n    name: 'PointerTracker',\n\n    data() {\n        return {\n            x: 0,\n            y: 0,\n        };\n    },\n\n    mounted() {\n        window.addEventListener('mousemove', (event) => {\n            this.x = event.clientX + 2;\n            this.y = event.clientY + 2;\n        });\n    },\n};\n</script>\n\n<style scoped>\n#pointer-location {\n    position: fixed;\n    width: 2px;\n    height: 2px;\n    /* background-color: red; */\n    pointer-events: none;\n}\n</style>\n","import { render } from \"./PointerTracker.vue?vue&type=template&id=0fb01106&scoped=true\"\nimport script from \"./PointerTracker.vue?vue&type=script&lang=js\"\nexport * from \"./PointerTracker.vue?vue&type=script&lang=js\"\n\nimport \"./PointerTracker.vue?vue&type=style&index=0&id=0fb01106&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0fb01106\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=58725b44\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=58725b44&lang=scss\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue';\nimport ArcoVue from '@arco-design/web-vue';\nimport ArcoVueIcon from '@arco-design/web-vue/es/icon';\nimport '@arco-design/web-vue/dist/arco.css';\n\nimport App from './App.vue';\n\nconst app = createApp(App);\napp.use(ArcoVue);\napp.use(ArcoVueIcon);\napp.mount('#app');\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// expose the module cache\n__webpack_require__.c = __webpack_module_cache__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"js/\" + chunkId + \".\" + {\"798\":\"bb0d12ed\",\"916\":\"fe57ca0f\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var inProgress = {};\nvar dataWebpackPrefix = \"intrigue:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkintrigue\"] = self[\"webpackChunkintrigue\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// module cache are used so entry inlining is disabled\n// startup\n// Load entry module and return exports\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(__webpack_require__.s = 2537); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_createVNode","_component_TitleBar","_component_DocumentCanvas","_component_PointerTracker","propByPath","object","path","value","parts","split","limit","length","i","key","undefined","EventEmitter","constructor","this","events","on","event","callback","push","filter","emit","args","callbacks","forEach","LocalFilePersistence","filePath","doc","fs","debounce","super","timeout","isElectron","readFile","writeFile","access","require","Error","then","data","applyUpdate","Uint8Array","from","catch","storeUpdate","bind","clearTimeout","setTimeout","console","log","encodeStateAsUpdate","enableVueBindings","Vue","SyncedDocument","storeStructure","syncInitialized","store","syncedStore","warn","initSync","documentId","users","reactive","metadata","id","nanoid","getYjsValue","syncProvider","WebrtcProvider","awareness","handleChanges","userId","setLocalStateField","localUser","initPersistence","saveProvider","IndexeddbPersistence","close","destroy","updateAwareness","registerAwarenessCallback","awarenessInfo","getStates","values","onlineUsers","Set","offlineUsers","Object","keys","user","add","delete","entries","stringify","JSON","ReversibleDocument","inverses","undoStack","redoStack","previousTime","captureTimeout","registerInverses","actionA","actionB","commit","action","params","inverseParams","actionFunction","error","currentTime","Date","now","Math","abs","Array","isArray","popStackItem","fromStack","toStack","lastRecord","pop","toStackRecord","reverse","item","inverseAction","undo","redo","canUndo","canRedo","NodeTypes","IntrigueDocument","nodes","links","fragment","remoteSelection","createNode","nodeItem","nodeId","node","type","content","parent","children","identifier","literature","x","y","w","currentX","currentY","currentWidth","link","createLink","child","snapNode","createNodes","nodeItems","nodeIds","newLinks","newChildren","pairInfo","deleteNode","removedLinks","unsnappedChildren","linkId","removeLink","childId","unsnapNode","source","target","deleteNodes","updateNode","update","by","originalValue","set","updateNodes","Area","indexOf","childIndex","splice","ViewingState","initial","states","Idle","actions","TitleEditing","Panning","Selecting","Dragging","Dropping","Detaching","detached","Linking","EditingState","Editing","ArrangingState","Selected","Resizing","intrigueMachine","createMachine","Viewing","Arranging","context","editing","panning","dragging","dropping","selection","detaching","linking","setEditing","assign","clearEditing","setPanning","clearPanning","setDragging","clearDragging","setDropping","clearDropping","setDetaching","clearDetaching","setSelection","clearSelection","setLinking","clearLinking","class","_createElementBlock","$data","_createBlock","_component_a_row","justify","align","_component_a_col","span","_component_a_button_group","style","_component_a_button","size","disabled","$options","onClick","icon","_component_icon_undo","_component_icon_redo","_createElementVNode","_toDisplayString","_component_CopyButton","text","$props","shape","status","_hoisted_1","_renderSlot","_ctx","name","props","String","copied","timer","methods","copy","ultralightCopy","$message","__exports__","inject","components","CopyButton","electron","computed","fileName","basename","shareLink","_component_vue_infinite_viewer","ref","maxPinchWheel","onScroll","onPinch","onDblclick","_Fragment","_renderList","_component_IntrigueLink","_component_IntrigueNode","selected","some","t","onUpdateDimensions","moveable","updateRect","_component_Moveable","className","draggable","resizable","renderDirections","onClickGroup","onDrag","onDragGroup","onDragEnd","onDragGroupEnd","onResize","onResizeEnd","_component_VueSelecto","dragContainer","selectableTargets","selectByClick","selectFromInside","toggleContinueSelect","keyContainer","hitRate","ratio","onDragStart","onSelect","onSelectEnd","Keyboard","handlers","handler","options","keyBindingHandler","createKeybindingsHandler","window","addEventListener","removeListeners","removeEventListener","includes","color","gradient","onMouseenter","onFocusin","onMouseleave","onFocusout","_component_note","onChange","_component_reference","referenceType","title","author","onMousedown","onMouseup","_component_icon_link","_component_editor_content","editor","defineComponent","EditorContent","Boolean","mounted","Editor","extensions","StarterKit","Highlight","Link","protocols","autofocus","editable","onEditorBlur","beforeUnmount","send","getHTML","document","$emit","getText","watch","commands","setContent","setEditable","focus","blur","_hoisted_3","_hoisted_6","formatAuthors","authors","authorsString","family","showFullText","open","extractIsbn","subject","regex","test","chars","replace","last","check","sum","parseInt","final","match","extractIdentifier","isbnString","doiStrings","doi","extract","parse","url","e","zotero","linkify","startsWith","href","urls","fetchLiteratureInfo","Promise","resolve","reject","axios","request","matches","responseURL","err","Cite","info","_graph","Note","Reference","required","default","h","onMouseEnter","onMouseLeave","onLinkButtonClick","observeParent","parentWatchers","$watch","updateDimensionsFromParent","updateDimensions","$refs","height","clientHeight","currentHeight","parseNoteContent","record","observer","ResizeObserver","observe","breforeUnmount","disconnect","removeParentWatcher","deactivated","styles","width","transform","index","selectedByRemoteUsers","userData","isNote","isReference","current","showLinkButton","xmlns","d","stroke","strokeWidth","fill","points","arrowHeadSize","Number","sourceNode","targetNode","updateLine","sx","sy","c1x","c1y","c2x","c2y","ex","ey","ae","as","arrow","sourceElement","querySelector","targetElement","sourceBox","getBoundingBox","targetBox","getBoxToBoxArrow","padEnd","map","zoom","element","rect","getBoundingClientRect","cs","getComputedStyle","paddingX","parseFloat","paddingLeft","paddingRight","offsetHeight","deep","VueInfiniteViewer","Moveable","VueSelecto","IntrigueNode","IntrigueLink","provide","keyboard","newNode","mapped","mapMousePosition","clientX","clientY","doubleClickNode","state","selectedIds","el","preventDefault","panCanvas","scrollLeft","scrollTop","zoomCanvas","canvas","setZoom","cancelSelectionWhenClickEmpty","selecto","clickTarget","inputEvent","inputTarget","sendDragStartMessage","targets","classList","left","right","top","bottom","dragNodes","toDetach","distance","sqrt","dist","pair","translate","commitNodePositions","lastEvent","remove","toUpdate","preventSelectionWhenDragging","isMoveableElement","contains","stop","selectNode","commitSelections","isDragStart","dragStart","resizeNode","commitNodeSize","mappedX","mappedY","gatherDescendants","root","includeRoot","descendants","childDescendants","descendantId","updateCursorPosition","startPanning","stopPropagation","stopPanning","activeNodeHeight","shouldResize","TitleBar","DocumentCanvas","PointerTracker","loading","docId","injections","setup","functions","catchErrors","useMachine","broadcastUsername","fruit","getRandomFruitsName","maxWords","ipcRenderer","code","body","_","queryString","location","search","urlParams","URLSearchParams","get","render","app","createApp","App","use","ArcoVue","ArcoVueIcon","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","loaded","__webpack_modules__","call","m","c","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","r","n","getter","__esModule","a","leafPrototypes","getProto","getPrototypeOf","obj","__proto__","mode","ns","create","def","getOwnPropertyNames","definition","o","defineProperty","enumerable","f","chunkId","all","reduce","promises","u","miniCssF","g","globalThis","Function","prop","prototype","hasOwnProperty","inProgress","dataWebpackPrefix","l","done","script","needAttach","scripts","getElementsByTagName","s","getAttribute","createElement","charset","nc","setAttribute","src","onScriptComplete","prev","onerror","onload","doneFns","parentNode","removeChild","head","appendChild","Symbol","toStringTag","nmd","paths","p","installedChunks","installedChunkData","promise","loadingEnded","errorType","realSrc","message","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}
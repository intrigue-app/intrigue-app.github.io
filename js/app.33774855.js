(function(){var e={9938:function(e,t,n){"use strict";var i=n(3862),s=n(3068),o=n(667),r=(n(9072),n(3396));function d(e,t,n,i,s,o){const d=(0,r.up)("TitleBar"),a=(0,r.up)("DocumentCanvas"),c=(0,r.up)("PointerTracker");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(d),(0,r.Wm)(a),(0,r.Wm)(c)],64)}var a=n(4024),c=n.n(a),l=n(4892),u=n.n(l),h=n(4870),g=n(691);function p(e,t,n){const i=t.split("."),s=i.length-1;for(let r=0;r<s;++r){const t=i[r];e=e[t]??(e[t]={})}const o=i[s];return void 0!==n&&(e[o]=n),e[o]}var m=n(6866),f=n(1346),v=n(5697),y=n(3089);class w{constructor(){this.events={}}on(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),()=>{this.events[e]=this.events[e]?.filter((e=>t!==e))}}emit(e,...t){const n=this.events[e]||[];n.forEach((e=>e(...t)))}}n(1703),n(8675),n(3462),n(7380),n(1118);var k=n(567),b=n(5941);class S extends w{constructor(e,t,i,s){if(super(),this.doc=t,this.filePath=e,this.timeout=null,this.debounce=s||1e3,c()()){const{readFile:e,writeFile:t,access:i}=n(1510);this.readFile=e,this.writeFile=t,this.access=i}else{if(!i)throw new Error("LocalFilePersistence is designed to be used in Electron. Either make sure you are calling this class in an Electron environment, or provide your own async fs implementation.");{const{readFile:e,writeFile:t,access:n}=i;this.readFile=e,this.writeFile=t,this.access=n}}this.filePath?this.access(this.filePath).then((()=>{this.readFile(e).then((e=>{(0,k.NG)(this.doc,Uint8Array.from(e)),this.emit("synced")}))})).catch((()=>{this.storeUpdate(null,(()=>{this.emit("synced")}))})):this.emit("synced"),this.doc.on("update",this.storeUpdate.bind(this))}storeUpdate(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.timeout=setTimeout((()=>{this.filePath&&(b.log("[LocalFilePersistence][storeUpdate] Saving to disk."),b.log((0,k.D$)(this.doc)),this.writeFile(this.filePath,(0,k.D$)(this.doc)).then((()=>{this.emit("saved")})))}),this.debounce)}}var x=n(5941);(0,f.QB)(m);class N extends w{constructor(e){super(),this.syncInitialized=!1,this.store=(0,f.wI)(e),x.warn=()=>null}initSync(e){this.users=(0,h.qj)({}),this.store.metadata.id=e||(0,g.x0)();const t=(0,f.mL)(this.store);this.syncProvider=new v.x$(this.store.metadata.id,t),this.syncProvider.awareness.on("change",this.handleChanges.bind(this)),this.userId=(0,g.x0)(),this.syncProvider.awareness.setLocalStateField("id",this.userId),this.localUser=(0,h.qj)(this.users[this.userId]),this.syncInitialized=!0}initPersistence(e){const t=(0,f.mL)(this.store);this.saveProvider=c()()?new S(e,t):new y.H7(e,t),this.saveProvider.on("synced",(()=>{x.log("[Sync][saveProvider@synced] Save provider synced.",this.store.metadata.id),this.syncInitialized||this.initSync(this.store.metadata.id),this.emit("synced")})),this.saveProvider.on("saved",(()=>{x.log("[Sync][saveProvider@synced] Save provider saved."),this.emit("saved")}))}close(){this.syncProvider.destroy()}updateAwareness(e,t){this.syncInitialized&&this.syncProvider.awareness.setLocalStateField(e,t)}registerAwarenessCallback(e,t){this.syncProvider.awareness.on(e,t)}handleChanges(){const e=[...this.syncProvider.awareness.getStates().values()],t=new Set,n=new Set(Object.keys(this.users));e.forEach((e=>{t.add(e.id),n.delete(e.id),this.users[e.id]||(this.users[e.id]={}),Object.entries(e).forEach((([t,n])=>{this.users[e.id][t]=n}))})),n.forEach((e=>delete this.users[e]))}stringify(){return JSON.stringify(this.store)}}var E=n(5941);class P extends N{constructor(e){super(e),this.inverses={},this.undoStack=[],this.redoStack=[],this.previousTime=-1,this.captureTimeout=50}registerInverses(e,t){this.inverses[e]=t,this.inverses[t]=e}commit(e,t){let n=null;const i=this[e].bind(this);if(void 0===i)return void E.error(`[Undo][Commit] There is no method called ${e}() on this object:`,this);if(n=i(t),!n)return;const s=Date.now();Math.abs(s-this.previousTime)<this.captureTimeout?(E.log("[Undo][Commit] Capturing."),Array.isArray(this.undoStack[this.undoStack.length-1])||(this.undoStack[this.undoStack.length-1]=[this.undoStack[this.undoStack.length-1]]),this.undoStack[this.undoStack.length-1].push({action:e,inverseParams:n})):this.undoStack.push({action:e,inverseParams:n}),this.previousTime=s,this.redoStack=[],this.emit("commit")}popStackItem(e,t){if(e.length<=0)return;let n=e.pop();if(!n)return;Array.isArray(n)||(n=[n]);const i=[];n.reverse().forEach((e=>{const t=this.inverses[e.action];if(!t)return void E.error(`There is no registered inverse for ${e.action}().`);let n;const s=this[t].bind(this);void 0!==s?n=s(e.inverseParams):E.error(`There is no method called ${t}() on this object:`,this),i.push({action:t,inverseParams:n})})),t.push(1===i.length?i[0]:i)}undo(){this.popStackItem(this.undoStack,this.redoStack)}redo(){this.popStackItem(this.redoStack,this.undoStack)}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}}var D=n(2482);class z{}(0,D.Z)(z,"Note","note"),(0,D.Z)(z,"Reference","reference"),(0,D.Z)(z,"Area","area");var L=n(5941);class $ extends P{constructor(){super({metadata:{},nodes:{},links:{},fragment:"xml"}),this.remoteSelection=(0,h.qj)(new Set),this.registerInverses("createNode","deleteNode"),this.registerInverses("createNodes","deleteNodes"),this.registerInverses("updateNode","updateNode"),this.registerInverses("updateNodes","updateNodes"),this.registerInverses("snapNode","unsnapNode"),this.registerInverses("createLink","removeLink")}createNode(e){const t=e.id?e.id:(0,g.x0)(),n={id:t,type:e.type,content:e.content,links:[],parent:null,children:[],identifier:null,literature:null,x:e.x?e.x:0,y:e.y?e.y:0,w:e.w?e.w:200,currentX:e.x?e.x:0,currentY:e.y?e.y:0,currentWidth:e.w?e.w:200};return e.links&&e.links.forEach((e=>this.createLink(e))),e.children&&e.children.forEach((e=>this.snapNode(e))),this.store.nodes[t]=n,t}createNodes(e){const t=[],n=[],i=[];return e.forEach((e=>{e.links&&(e.links.forEach((e=>n.push(e))),delete e.links),e.children&&(e.children.forEach((e=>i.push(e))),delete e.children);const s=this.createNode(e);t.push(s)})),n.forEach((e=>this.createLink(e))),i.forEach((e=>this.snapNode(e))),t}deleteNode(e){const t={...this.store.nodes[e]},n=[],i=[];return t.links.forEach((e=>{n.push(this.removeLink(e))})),t.children.forEach((e=>{i.push(this.unsnapNode({source:t.id,target:e}))})),t.links=n,t.children=i,delete this.store.nodes[e],t}deleteNodes(e){const t=[];return e.forEach((e=>{const n=this.deleteNode(e);t.push(n)})),t}updateNode(e){const t=this.store.nodes[e.id],n={id:e.id};return e.by&&(n.by={},Object.entries(e.by).forEach((([e,i])=>{const s=p(t,e);"number"===typeof s?(p(t,e,s+i),n.by[e]=-s):L.error("Only number properties can be updated by a number!")}))),e.set&&(n.set={},Object.entries(e.set).forEach((([e,i])=>{const s=p(t,e);p(t,e,i),n.set[e]=s}))),n}updateNodes(e){const t={id:[...e.id]};return e.by&&(t.by={},Object.entries(e.by).forEach((([e,n])=>{t.by[e]=-n})),e.id.forEach((t=>{this.updateNode({id:t,by:e.by})}))),e.set&&(t.set={},e.id.forEach((n=>{t.set[n]={};const i=this.store.nodes[n];Object.keys(e.set[n]).forEach((e=>{t.set[n][e]=p(i,e)})),this.updateNode({id:n,set:e.set[n]})}))),t}snapNode(e){const t={};if(!e.source||!e.target)return!1;const n=this.store.nodes[e.source],i=this.store.nodes[e.target];return(n.type===z.Area||0===n.children.length)&&(n.children.push(e.target),n.children.filter(((e,t)=>n.children.indexOf(e)===t)),i.parent=n.id,t.source=e.source,t.target=e.target),!!t.source&&t}unsnapNode(e){const t={};if(!e.source||!e.target)return!1;const n=this.store.nodes[e.source],i=this.store.nodes[e.target],s=n.children.indexOf(e.target);return s>-1&&(n.children.splice(s,1),i.parent=null,t.source=e.source,t.target=e.target),!!t.source&&t}createLink(e){const t=this.store.nodes[e.source],n=this.store.nodes[e.target],i=e.id?e.id:(0,g.x0)(),s={id:i,source:e.source,target:e.target};return this.store.links[i]=s,t.links.push(i),t.links.filter(((e,n)=>t.links.indexOf(e)===n)),n.links.push(i),n.links.filter(((e,t)=>n.links.indexOf(e)===t)),i}removeLink(e){const t={...this.store.links[e]},n=this.store.nodes[t.source],i=this.store.nodes[t.target];return n.links.splice(n.links.indexOf(e),1),i.links.splice(i.links.indexOf(e),1),delete this.store.links[e],t}}var C=n(1552),I=n(3371);const j={initial:"Idle",states:{Idle:{on:{"editing title":"TitleEditing","space pressed":{target:"Panning",actions:"setPanning"},"start dragging":{target:"Dragging",actions:"setDragging"},"start linking":{target:"Linking",actions:"setLinking"},"update selection":{target:"Selecting",actions:"setSelection"},"create node":{target:"#Intrigue.Editing",actions:"setEditing"},"delete node":{target:"Idle",actions:"clearSelection"},"dblclick node":{target:"#Intrigue.Editing",actions:"setEditing"}}},TitleEditing:{on:{"stop editing title":"Idle"}},Panning:{on:{"space released":{target:"Idle",actions:"clearPanning"}}},Selecting:{on:{"update selection":{target:"Selecting",actions:"setSelection"},"done selecting":{target:"Idle"}}},Dragging:{on:{"drop enter":{target:"Dropping",actions:"setDropping"},"stop dragging":{target:"Idle",actions:["clearDragging","clearDetaching"]},"start detaching":{target:"Detaching",actions:"setDetaching"}}},Dropping:{on:{"drop leave":{target:"Dragging",actions:"clearDropping"},"stop dragging":{target:"Idle",actions:["clearDragging","clearDropping"]}}},Detaching:{on:{detached:{target:"Dragging",actions:"clearDetaching"},"stop detaching":{target:"Idle",actions:"clearDetaching"}}},Linking:{on:{"update selection":{target:"Idle",actions:["clearLinking","setSelection"]},"click on empty canvas":{target:"Idle",actions:"clearLinking"},"create node":{target:"#Intrigue.Editing",actions:["clearLinking","setEditing"]}}}}},W={initial:"Editing",states:{Editing:{on:{"editor blur":{target:"#Intrigue.Viewing",actions:"clearEditing"},"update selection":{target:"#Intrigue.Viewing",actions:["clearEditing","setSelection"]}}}}},_={initial:"Selected",states:{Selected:{on:{"click on empty canvas":"#Intrigue.Viewing","drag node handle":"Resizing"}},Resizing:{on:{"drag end":"Selected"}}}},O=(0,C.C)({id:"Intrigue",initial:"Viewing",states:{Viewing:{...j},Arranging:{..._},Editing:{...W}},context:{editing:null,panning:!1,dragging:null,dropping:null,selection:[],detaching:[],linking:null}},{actions:{setEditing:(0,I.f0)({editing:(e,t)=>e.editing=t.node}),clearEditing:(0,I.f0)({editing:e=>e.editing=null}),setPanning:(0,I.f0)({panning:e=>e.panning=!0}),clearPanning:(0,I.f0)({panning:e=>e.panning=!1}),setDragging:(0,I.f0)({dragging:(e,t)=>e.dragging=t.node}),clearDragging:(0,I.f0)({dragging:e=>e.dragging=null}),setDropping:(0,I.f0)({dropping:(e,t)=>e.dropping=t.node}),clearDropping:(0,I.f0)({dropping:e=>e.dropping=null}),setDetaching:(0,I.f0)({detaching:(e,t)=>e.detaching=t.detaching}),clearDetaching:(0,I.f0)({detaching:e=>e.detaching=[]}),setSelection:(0,I.f0)({selection:(e,t)=>e.selection=t.selection}),clearSelection:(0,I.f0)({selection:e=>e.selection=[]}),setLinking:(0,I.f0)({linking:(e,t)=>e.linking=t.node}),clearLinking:(0,I.f0)({linking:e=>e.linking=null})}});var T=O,F=n(218),M=n(7139);const R={class:"titlebar-container"},U=(0,r.Uk)("Share"),B=(0,r.Uk)("Share");function A(e,t,n,i,s,o){const d=(0,r.up)("icon-undo"),a=(0,r.up)("a-button"),c=(0,r.up)("icon-redo"),l=(0,r.up)("a-button-group"),u=(0,r.up)("a-col"),h=(0,r.up)("CopyButton"),g=(0,r.up)("a-row");return(0,r.wg)(),(0,r.iD)("div",R,[s.electron?((0,r.wg)(),(0,r.j4)(g,{key:0,class:"window noselect",justify:"center",align:"center"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{span:8},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{style:{"margin-left":"5rem"}},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{type:"text",size:"mini",disabled:!o.document.canUndo(),onClick:t[0]||(t[0]=e=>o.document.undo())},{icon:(0,r.w5)((()=>[(0,r.Wm)(d)])),_:1},8,["disabled"]),(0,r.Wm)(a,{type:"text",size:"mini",disabled:!o.document.canRedo(),onClick:t[1]||(t[1]=e=>o.document.redo())},{icon:(0,r.w5)((()=>[(0,r.Wm)(c)])),_:1},8,["disabled"])])),_:1})])),_:1}),(0,r.Wm)(u,{span:8,align:"center"},{default:(0,r.w5)((()=>[(0,r._)("b",null,(0,M.zw)(o.fileName),1)])),_:1}),(0,r.Wm)(u,{span:8,align:"right",style:{"padding-right":"0.5rem"}},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{size:"mini",text:o.shareLink},{default:(0,r.w5)((()=>[U])),_:1},8,["text"])])),_:1})])),_:1})):((0,r.wg)(),(0,r.j4)(g,{key:1,class:"browser noselect",justify:"center",align:"center"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{span:8},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{style:{"margin-left":"1rem"}},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{type:"text",size:"small",disabled:!o.document.canUndo(),onClick:t[2]||(t[2]=e=>o.document.undo())},{icon:(0,r.w5)((()=>[(0,r.Wm)(d)])),_:1},8,["disabled"]),(0,r.Wm)(a,{type:"text",size:"small",disabled:!o.document.canRedo(),onClick:t[3]||(t[3]=e=>o.document.redo())},{icon:(0,r.w5)((()=>[(0,r.Wm)(c)])),_:1},8,["disabled"])])),_:1})])),_:1}),(0,r.Wm)(u,{span:8,align:"center"}),(0,r.Wm)(u,{span:8,align:"right",style:{"padding-right":"0.5rem"}},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{size:"small",text:o.shareLink},{default:(0,r.w5)((()=>[B])),_:1},8,["text"])])),_:1})])),_:1}))])}const H={key:1};function X(e,t,n,i,s,o){const d=(0,r.up)("a-button");return(0,r.wg)(),(0,r.j4)(d,{type:n.type,shape:n.shape,size:n.size,status:n.status,disabled:s.copied,onClick:o.copy},{default:(0,r.w5)((()=>[s.copied?((0,r.wg)(),(0,r.iD)("span",H,"Copied!")):(0,r.WI)(e.$slots,"default",{key:0})])),_:3},8,["type","shape","size","status","disabled","onClick"])}var Z=n(7666),Y={name:"CopyButton",props:{size:String,shape:String,type:String,status:String,text:String},data(){return{copied:!1,timer:null}},methods:{copy(){(0,Z.Z)(this.text)?(this.copied=!0,this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>{this.copied=!1}),1e3)):this.$message.error("Error copying to clipboard!")}}},q=n(89);const V=(0,q.Z)(Y,[["render",X]]);var G=V,J={name:"TitleBar",inject:["store","document","selection","filePath"],components:{CopyButton:G},data(){return{electron:c()()}},computed:{fileName(){const{basename:e}=n(6554);return this.filePath.value?e(this.filePath.value):"Untitled"},shareLink(){return`https://intrigue-app.github.io/?document=${this.store.value.metadata.id}`}}};const K=(0,q.Z)(J,[["render",A],["__scopeId","data-v-5ce49f0c"]]);var Q=K;const ee={style:{width:"100%",height:"100%"}},te={class:"viewport"},ne=(0,r._)("svg",{class:"links",id:"links",xmlns:"http://www.w3.org/2000/svg"},null,-1),ie=(0,r.Uk)(" > ");function se(e,t,n,s,o,d){const a=(0,r.up)("IntrigueLink"),c=(0,r.up)("IntrigueNode"),l=(0,r.up)("Moveable"),u=(0,r.up)("VueSelecto"),h=(0,r.up)("vue-infinite-viewer");return(0,r.wg)(),(0,r.iD)("div",ee,[(0,r.Wm)(h,{class:"canvas",ref:"canvas",style:(0,M.j5)({"background-position":`${-e.x*e.zoom}px ${-e.y*e.zoom}px`,"background-size":`${13*e.zoom}px ${13*e.zoom}px`,"--resize-handle-height":`${e.activeNodeHeight}px`}),maxPinchWheel:10,onScroll:e.panCanvas,onPinch:e.zoomCanvas,onDblclick:e.newNode},{default:(0,r.w5)((()=>[(0,r._)("div",te,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.store.value.links,(e=>((0,r.wg)(),(0,r.j4)(a,{key:e.id,ref_for:!0,ref:e.id,source:e.source,target:e.target},null,8,["source","target"])))),128)),e.linking.value?((0,r.wg)(),(0,r.j4)(a,{key:0,source:e.linking.value,target:"pointer-location"},null,8,["source"])):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.store.value.nodes,(t=>((0,r.wg)(),(0,r.j4)(c,{key:t.id,ref_for:!0,ref:t.id,node:t,selected:e.selection.some((e=>e.id===t.id)),onDblclick:(0,i.iM)((n=>e.doubleClickNode(t)),["stop"]),onUpdateDimensions:e.$refs.moveable.updateRect},null,8,["node","selected","onDblclick","onUpdateDimensions"])))),128)),(0,r.Wm)(l,{ref:"moveable",className:"moveable",target:e.selection,draggable:!0,resizable:e.shouldResize,renderDirections:["e"],onClickGroup:e.cancelSelectionWhenClickEmpty,onDrag:e.dragNodes,onDragGroup:e.dragNodes,onDragEnd:e.commitNodePositions,onDragGroupEnd:e.commitNodePositions,onResize:e.resizeNode,onResizeEnd:e.commitNodeSize},null,8,["target","resizable","onClickGroup","onDrag","onDragGroup","onDragEnd","onDragGroupEnd","onResize","onResizeEnd"]),(0,r.Wm)(u,{ref:"selecto",dragContainer:".canvas",selectableTargets:[".node.selectable"],selectByClick:!0,selectFromInside:!1,toggleContinueSelect:["shift"],keyContainer:e.window,hitRate:0,ratio:0,onDragStart:e.preventSelectionWhenDragging,onSelect:e.selectNode,onSelectEnd:e.commitSelections},null,8,["selectableTargets","keyContainer","onDragStart","onSelect","onSelectEnd"])])])),_:1},8,["style","onScroll","onPinch","onDblclick"]),ne,ie])}var oe=n(7391),re=n(1966),de=n(151),ae=n(8773);class ce{constructor(){this.handlers=[]}on(e,t,n){const i={};i[t]=n;const s=(0,ae.Le)(i);window.addEventListener(e,s),this.handlers.push({event:e,handler:s})}removeListeners(){this.handlers.forEach((e=>{window.removeEventListener(e.event,e.handler)}))}}const le=["id","color","gradient"];function ue(e,t,n,s,o,d){const a=(0,r.up)("note"),c=(0,r.up)("reference"),l=(0,r.up)("icon-link");return(0,r.wg)(),(0,r.iD)("div",{class:(0,M.C_)(["node",{selected:e.selection.value.includes(e.node.id),dropping:e.dropping.value===e.node.id,noselect:e.editing.value!==e.node.id,clickthrough:e.dragging.value&&e.selection.value.includes(e.node.id),selectable:!e.selectedByRemoteUsers,"remote-selected":e.selectedByRemoteUsers,"snap-top":!e.node.parent&&e.node.children.length>0,"snap-middle":e.node.parent&&e.node.children.length>0,"snap-bottom":e.node.parent&&0===e.node.children.length,reference:e.isReference}]),ref:"node",id:e.node.id,style:(0,M.j5)(e.styles),color:e.isReference?"primary":"white",gradient:e.isReference,onMouseenter:t[4]||(t[4]=(...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),onFocusin:t[5]||(t[5]=(...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),onMouseleave:t[6]||(t[6]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t)),onFocusout:t[7]||(t[7]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t))},[e.isNote?((0,r.wg)(),(0,r.j4)(a,{key:0,id:e.node.id,content:e.node.content,editing:e.editing.value===e.node.id,onChange:e.parseNoteContent},null,8,["id","content","editing","onChange"])):(0,r.kq)("",!0),e.isReference?((0,r.wg)(),(0,r.j4)(c,{key:1,id:e.node.id,type:e.node.referenceType,identifier:e.node.identifier,title:e.node.title,author:e.node.author},null,8,["id","type","identifier","title","author"])):(0,r.kq)("",!0),e.showLinkButton?((0,r.wg)(),(0,r.iD)("button",{key:2,class:"link-button",onMousedown:t[0]||(t[0]=(0,i.iM)((()=>{}),["stop"])),onMouseup:t[1]||(t[1]=(0,i.iM)((()=>{}),["stop"])),onDblclick:t[2]||(t[2]=(0,i.iM)((()=>{}),["stop"])),onClick:t[3]||(t[3]=(0,i.iM)(((...t)=>e.onLinkButtonClick&&e.onLinkButtonClick(...t)),["stop"]))},[(0,r.Wm)(l)],32)):(0,r.kq)("",!0)],46,le)}const he={class:"note",ref:"note"};function ge(e,t,n,i,s,o){const d=(0,r.up)("editor-content");return(0,r.wg)(),(0,r.iD)("div",he,[(0,r.Wm)(d,{editor:e.editor},null,8,["editor"])],512)}var pe=n(5977),me=n(8347),fe=n(2030),ve=n(4885),ye=n(5941),we=(0,r.aZ)({name:"IntrigueNote",inject:["document","store","state","send"],components:{EditorContent:pe.kg},props:{id:String,content:String,editing:Boolean},data(){return{editor:null}},mounted(){this.editor=new pe.ML({content:this.content,extensions:[me.Z,fe.ZP,ve.Z.configure({protocols:["zotero"]})],autofocus:this.editing,editable:this.editing}),this.editor.on("blur",this.onEditorBlur)},beforeUnmount(){this.editor.destroy()},methods:{onEditorBlur(){this.send("editor blur"),"<p></p>"===this.editor.getHTML()?this.document.deleteNode(this.id):(this.document.commit("updateNode",{id:this.id,set:{content:this.editor.getHTML()}}),this.$emit("change",this.editor.getText()))}},watch:{content(){this.editor.commands.setContent(this.content)},editing(){this.editor.setEditable(this.editing),this.editing?(ye.log(`[Note][watch@editing] Editing: ${this.editing}, ${this.id}`),this.editor.commands.focus("end")):this.editor.commands.blur()}}});const ke=(0,q.Z)(we,[["render",ge]]);var be=ke;const Se=e=>((0,r.dD)("data-v-8d4a73d4"),e=e(),(0,r.Cn)(),e),xe={class:"title"},Ne=(0,r.Uk)(),Ee=Se((()=>(0,r._)("br",null,null,-1))),Pe={class:"authors"},De=(0,r.Uk)(),ze=Se((()=>(0,r._)("br",null,null,-1))),Le={class:"identifier"};function $e(e,t,n,s,o,d){return(0,r.wg)(),(0,r.iD)("div",{class:"reference-content",ref:"reference",onDblclick:t[0]||(t[0]=(0,i.iM)(((...t)=>e.showFullText&&e.showFullText(...t)),["stop","prevent"]))},[(0,r._)("span",xe,(0,M.zw)(e.title?e.title:"Fetching title..."),1),Ne,Ee,(0,r._)("span",Pe,(0,M.zw)(e.author?e.formatAuthors(e.author):"Fetching authors..."),1),De,ze,(0,r._)("span",Le,(0,M.zw)(e.identifier?e.identifier:""),1)],544)}var Ce=(0,r.aZ)({name:"IntrigueReference",inject:["document","store","state","send"],components:{},props:{id:String,type:String,title:String,author:String,identifier:String},methods:{formatAuthors(e){let t="";return e.forEach(((n,i)=>{t+=n.family,i===e.length-2?t+=2===e.length?" and ":", and ":i<e.length-2&&(t+=", ")})),t},showFullText(){"zotero"===this.type||"zotero-link"===this.type?window.open(this.identifier):"doi"===this.type?window.open(`https://sci-hub.se/${this.data.identifier}`):"isbn"===this.type?window.open(`http://libgen.rs/search.php?req=${this.data.identifier}`):"url"===this.type&&window.open(this.identifier)}}});const Ie=(0,q.Z)(Ce,[["render",$e],["__scopeId","data-v-8d4a73d4"]]);var je=Ie,We=n(1466),_e=n(9841),Oe=n(553),Te=n.n(Oe),Fe=n(6265),Me=n.n(Fe),Re=n(5941);function Ue(e){const t=/^(?:ISBN(?:-1[03])?:? )?(?=[0-9X]{10}$|(?=(?:[0-9]+[- ]){3})[- 0-9X]{13}$|97[89][0-9]{10}$|(?=(?:[0-9]+[- ]){4})[- 0-9]{17}$)(?:97[89][- ]?)?[0-9]{1,5}[- ]?[0-9]+[- ]?[0-9]+[- ]?[0-9X]$/;if(t.test(e)){const n=e.replace(/[- ]|^ISBN(?:-1[03])?:?/g,"").split(""),i=n.pop();let s,o,r=0;if(9===n.length){for(n.reverse(),o=0;o<n.length;o+=1)r+=(o+2)*parseInt(n[o],10);s=11-r%11,10===s?s="X":11===s&&(s="0")}else{for(o=0;o<n.length;o+=1)r+=(o%2*2+1)*parseInt(n[o],10);s=10-r%10,10===s&&(s="0")}if(s===i){const n=e.match(t)[0];return n}}return!1}function Be(e){const t=Ue(e);if(t)return{type:"isbn",identifier:t};const n=_e.extract(e);if(n.length>0)return{type:"doi",identifier:n[0]};try{const t=JSON.parse(e);if("zotero"===t.source)return{type:"zotero",identifier:t.url,...t}}catch(o){}const i=We.sE(e,"url").filter((e=>e.value.startsWith("zotero://")));if(i.length>0)return{type:"zotero-link",identifier:i[0].href};const s=We.sE(e,"url");return s.length>0&&{type:"url",identifier:s[0].href}}function Ae(e,t){return Re.log(e,t),new Promise(((n,i)=>{"url"===e?Me().get(t).then((e=>{Re.log(e.request);const t=e.data.match(/<title>(.*?)<\/title>/);n({title:t[1],author:[{family:"Web link"}],identifier:e.request.responseURL})})).catch((e=>{i(e)})):new(Te().async)(t,(e=>{const t=e.data[0];delete t._graph,n(JSON.parse(JSON.stringify(t)))}))}))}var He=n(5941),Xe=(0,r.aZ)({name:"IntrigueNode",inject:["document","store","state","send","editing","dragging","dropping","selection"],components:{Note:be,Reference:je},props:{node:{type:Object,required:!0},selected:{type:Boolean,default:!1}},data(){return{x:this.node.x,y:this.node.y,w:this.node.w,h:this.node.h,parent:null}},methods:{onMouseEnter(){this.send({type:"drop enter",node:this.node.id})},onMouseLeave(){this.send({type:"drop leave",node:this.node.id})},onLinkButtonClick(){this.send("start linking",{node:this.node.id})},observeParent(){this.parentWatchers=[this.$watch("parent.currentX",this.updateDimensionsFromParent),this.$watch("parent.currentY",this.updateDimensionsFromParent),this.$watch("parent.currentWidth",this.updateDimensionsFromParent),this.$watch("parent.currentHeight",this.updateDimensionsFromParent)]},updateDimensions(){if(!this.$refs.node)return;const e=this.$refs.node.clientHeight;this.document.updateNode({id:this.node.id,set:{currentHeight:e}}),this.$emit("update-dimensions")},updateDimensionsFromParent(){this.document.updateNode({id:this.node.id,set:{x:this.parent.currentX,y:this.parent.currentY+this.parent.currentHeight+5,w:this.parent.currentWidth,currentX:this.parent.currentX,currentY:this.parent.currentY+this.parent.currentHeight+5,currentWidth:this.parent.currentWidth,currentHeight:this.$refs.node.clientHeight}})},parseNoteContent(e){const t=Be(e);t&&(He.log(`[Node][parseNoteContent@extractIdentifier] ${JSON.stringify(t)}`),this.document.commit("updateNode",{id:this.node.id,set:{type:z.Reference,identifier:t.identifier,referenceType:t.type}}),"zotero"===t.type?this.document.commit("updateNode",{id:this.node.id,set:{title:t.title,author:t.author,identifier:t.identifier,record:t}}):"zotero-link"===t.type?this.document.commit("updateNode",{id:this.node.id,set:{title:void 0,author:void 0,identifier:t.identifier,record:t}}):Ae(t.type,t.identifier).then((e=>{He.log(`[Node][parseNoteContent@fetchLiteratureInfo] ${e}`),this.document.commit("updateNode",{id:this.node.id,set:{title:e.title,author:e.author,identifier:e.identifier?e.identifier:t.identifier,record:e}})})))}},mounted(){this.observer=new ResizeObserver(this.updateDimensions),this.observer.observe(this.$refs.node),this.document.updateNode({id:this.node.id,set:{currentX:this.node.x,currentY:this.node.y,currentHeight:this.node.h?this.node.h:this.$refs.node.clientHeight}}),this.node.parent&&(this.parent=this.store.value.nodes[this.node.parent],this.observeParent(),this.updateDimensionsFromParent())},breforeUnmount(){He.log("[Node][breforeUnmount] Unmounting",this.node.id),this.observer.disconnect(),this.parentWatchers.forEach((e=>e()))},deactivated(){He.log("[Node][deactivated] Deactivated",this.node.id),this.observer.disconnect(),this.parentWatchers.forEach((e=>e()))},computed:{styles(){return{width:`${this.w}px`,transform:`translate(${this.x}px, ${this.y}px)`,"--bg-color":"rgb(250, 248, 229)","--border-color":"rgb(233, 183, 109)","z-index":this.index}},selectedByRemoteUsers(){He.log(this.document.users);let e=!1;return Object.entries(this.document.users).some((([t,n])=>t!==this.document.userId&&(!!n.selection.includes(this.node.id)&&(e=!0,!0)))),e},isNote(){return this.node.type===z.Note},isReference(){return this.node.type===z.Reference},index(){let e=0,t=this.node;while(t.parent)e+=1,t=this.store.value.nodes[t.parent];return this.selection.value.includes(this.node.id)?e+2:e},showLinkButton(){return 1===this.selection.value.length&&!!this.selection.value.includes(this.node.id)}},watch:{"node.currentX":function(){this.x=this.node.currentX},"node.currentY":function(){this.y=this.node.currentY},"node.currentWidth":function(){this.w=this.node.currentWidth},"node.x":function(){this.document.updateNode({id:this.node.id,set:{currentX:this.node.x}})},"node.y":function(){this.document.updateNode({id:this.node.id,set:{currentY:this.node.y}})},"node.w":function(){this.document.updateNode({id:this.node.id,set:{currentWidth:this.node.w}})},"node.parent":function(){this.node.parent?(this.parent=this.store.value.nodes[this.node.parent],this.observeParent(),this.updateDimensionsFromParent()):(this.parent=null,this.parentWatchers.forEach((e=>e())),this.parentWatchers=[])}}});const Ze=(0,q.Z)(Xe,[["render",ue]]);var Ye=Ze;const qe={ref:"arrow",style:{"pointer-events":"auto"}},Ve=["d","stroke","stroke-width"],Ge=["points","transform","fill"];function Je(e,t,n,i,s,o){return(0,r.wg)(),(0,r.j4)(r.lR,{to:"#links"},[(0,r._)("g",qe,[(0,r._)("path",{style:{cursor:"pointer"},d:`M ${s.sx} ${s.sy} C ${s.c1x} ${s.c1y}, ${s.c2x} ${s.c2y}, ${s.ex} ${s.ey}`,stroke:n.color,"stroke-width":n.arrowHeadSize/3*o.zoom.value,fill:"none"},null,8,Ve),(0,r._)("polygon",{points:`0,${-n.arrowHeadSize*o.zoom.value} ${2*n.arrowHeadSize*o.zoom.value},0, 0,${n.arrowHeadSize*o.zoom.value}`,transform:`translate(${s.ex}, ${s.ey}) rotate(${s.ae})`,fill:n.color},null,8,Ge)],512)])}var Ke=n(4041),Qe=n(5941),et={name:"IntrigueLink",inject:["store","x","y","zoom"],props:{source:{type:String,required:!0},target:{type:String,required:!0},text:{type:String,default:""},color:{type:String,default:"#9A9A9B"},arrowHeadSize:{type:Number,default:4}},data(){const e=this.store.value.nodes[this.source],t=this.store.value.nodes[this.target];return t||window.addEventListener("mousemove",this.updateLine),{sourceNode:e,targetNode:t,sx:0,sy:0,c1x:0,c1y:0,c2x:0,c2y:0,ex:0,ey:0,ae:0,as:0}},mounted(){this.$refs.arrow.addEventListener("click",this.onClick),this.updateLine()},beforeUnmount(){window.removeEventListener("mousemove",this.updateLine)},methods:{onClick(){Qe.log("click")},updateLine(){const e=document.querySelector(`[id="${this.source}"]`),t=document.querySelector(`[id="${this.target}"]`),n=this.getBoundingBox(e,this.sourceNode),i=this.getBoundingBox(t,this.targetNode),[s,o,r,d,a,c,l,u,h]=(0,Ke.g)(n.x,n.y,n.w,n.h,i.x,i.y,i.w,i.h,{padEnd:this.arrowHeadSize});this.sx=this.mapX(s),this.sy=this.mapY(o),this.c1x=this.mapX(r),this.c1y=this.mapY(d),this.c2x=this.mapX(a),this.c2y=this.mapY(c),this.ex=this.mapX(l),this.ey=this.mapY(u),this.ae=h},mapX(e){return(e-this.x.value)*this.zoom.value},mapY(e){return(e-this.y.value)*this.zoom.value},getBoundingBox(e,t){const n=e.getBoundingClientRect(),i=getComputedStyle(e),s=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight);return{x:t?t.currentX:n.x/this.zoom.value+this.x.value,y:t?t.currentY:n.y/this.zoom.value+this.y.value,w:t?t.currentWidth+s:n.width/this.zoom.value,h:e.offsetHeight-2}}},watch:{sourceNode:{deep:!0,handler(){this.updateLine()}},targetNode:{deep:!0,handler(){this.updateLine()}},x:{deep:!0,handler(){this.updateLine()}},y:{deep:!0,handler(){this.updateLine()}},zoom:{deep:!0,handler(){this.updateLine(!0)}}}};const tt=(0,q.Z)(et,[["render",Je]]);var nt=tt,it=n(5941),st=(0,r.aZ)({name:"IntrigueCanvas",inject:["document","store","state","send","editing","dragging","dropping","detaching","linking"],components:{VueInfiniteViewer:oe.Q,Moveable:re.ZP,VueSelecto:de.y,IntrigueNode:Ye,IntrigueLink:nt},provide(){return{x:(0,r.Fl)((()=>this.x)),y:(0,r.Fl)((()=>this.y)),zoom:(0,r.Fl)((()=>this.zoom))}},data(){return{x:0,y:0,zoom:1,selection:[],keyboard:new ce}},methods:{newNode(e){const t=this.mapMousePosition(e.clientX,e.clientY),n=(0,g.x0)();this.document.commit("createNode",{id:n,type:z.Note,content:"",x:t.x-14,y:t.y-10,w:200,h:15}),this.send({type:"create node",node:n})},doubleClickNode(e){this.send({type:"dblclick node",node:e.id}),it.log(this.state.value,this.editing.value)},deleteNodes(e){if(this.editing.value)return;const t=this.selection.map((e=>e.id));it.log(`[Canvas][deleteNodes] ${t}`),this.selection=[],this.send("delete node"),this.document.commit("deleteNodes",t),e.preventDefault()},undo(e){null===this.editing.value&&(this.document.undo(),e.preventDefault())},redo(e){null===this.editing.value&&(this.document.redo(),e.preventDefault())},panCanvas(e){this.x=e.scrollLeft,this.y=e.scrollTop,this.document.updateAwareness("x",this.x),this.document.updateAwareness("y",this.y)},zoomCanvas(e){this.zoom=e.zoom,this.$refs.canvas.setZoom(e.zoom)},cancelSelectionWhenClickEmpty(e){this.$refs.selecto.clickTarget(e.inputEvent,e.inputTarget)},sendDragStartMessage(e){!e.events&&e.target?this.send({type:"start dragging",node:e.target.id}):e.targets&&(e.target.classList.add("clickthrough"),e.targets.some((t=>{const n=t.getBoundingClientRect();return!(n.left<=e.clientX&&n.right>=e.clientX&&n.top<=e.clientY&&n.bottom>=e.clientY)||(this.send({type:"start dragging",node:t.id}),!1)})))},dragNodes(e){let t;this.sendDragStartMessage(e),!e.events&&e.target?t=[e]:e.events&&(t=e.events);const n=t.map((e=>this.store.value.nodes[e.target.id])),i=t.map((e=>e.target.id)),s=[];if(n.forEach((e=>{e.parent&&!i.includes(e.parent)&&s.push({source:e.parent,target:e.id})})),s.length>0){this.send({type:"start detaching",detaching:s});const t=Math.sqrt(e.dist[0]*e.dist[0]+e.dist[1]*e.dist[1]);if(!(t>30))return;this.send("detached"),s.forEach((e=>{this.document.commit("unsnapNode",e)}))}t.forEach((e=>{const t=this.store.value.nodes[e.target.id];t.parent||this.document.updateNode({id:e.target.id,set:{currentX:e.translate[0],currentY:e.translate[1]}})}))},commitNodePositions(e){if(this.dropping.value&&(it.log("[Canvas][commitNodePositions] Dropping",this.dragging.value,"on",this.dropping.value),this.document.commit("snapNode",{source:this.dropping.value,target:this.dragging.value}),this.send("stop dragging")),this.detaching.value.length>0)return it.log("[Canvas][commitNodePositions] Detaching ended halfway."),void this.send("stop detaching");if(e.lastEvent){e.lastEvent.target&&e.lastEvent.target.classList.remove("clickthrough");const t=[];this.selection.forEach((e=>{const n=this.store.value.nodes[e.id];n.parent||t.push(e.id)})),this.document.commit("updateNodes",{id:t,by:{x:e.lastEvent.dist[0],y:e.lastEvent.dist[1]}})}this.send("stop dragging")},preventSelectionWhenDragging(e){const{target:t}=e.inputEvent;(this.$refs.moveable.isMoveableElement(t)||this.selection.some((e=>e===t||e.contains(t))))&&e.stop()},selectNode(e){if(this.linking.value&&1===e.selected.length&&e.selected[0].id!==this.linking.value)return it.log(`[Canvas][selectNode] Linking ${this.linking.value} to ${e.selected[0].id}`),void this.document.commit("createLink",{source:this.linking.value,target:e.selected[0].id});this.send({type:"update selection",selection:e.selected.map((e=>e.id))})},commitSelections(e){e.isDragStart&&(e.inputEvent.preventDefault(),setTimeout((()=>{this.$refs.moveable.dragStart(e.inputEvent)}))),this.selection=e.selected;const t=e.selected.map((e=>e.id));this.document.updateAwareness("selection",t),this.send({type:"done selecting",selection:t})},resizeNode(e){const{target:t}=e;t.style.width=`${e.width}px`,this.document.updateNode({id:e.target.id,set:{currentWidth:e.width}})},commitNodeSize(e){e.lastEvent&&this.document.commit("updateNode",{id:e.target.id,set:{w:e.lastEvent.width,h:e.target.offsetHeight}})},mapMousePosition(e,t){const n=e/this.zoom+this.x,i=t/this.zoom+this.y;return{x:n,y:i}},gatherDescendants(e,t){const n=t?new Set([e.id]):new Set;return e.children.forEach((e=>{const t=this.store.value.nodes[e],i=this.gatherDescendants(t,!0);i.forEach((e=>{n.add(e)}))})),[...n]},updateCursorPosition(e){const t=this.mapMousePosition(e.clientX,e.clientY);this.document.updateAwareness("cursorX",t.x),this.document.updateAwareness("cursorY",t.y)},startPanning(e){this.editing||(it.log("[Canvas][startPanning] Space pressed.",e),this.send("space pressed"),e.preventDefault(),e.stopPropagation())},stopPanning(e){this.editing||(it.log("[Canvas][startPanning] Space released.",e),this.send("space released"),e.preventDefault())}},computed:{activeNodeHeight(){if(this.selection.length>0){const e=this.store.value.nodes[this.selection[0].id];return e?e.currentHeight?e.currentHeight<=20?e.currentHeight-8:e.currentHeight-12:this.selection[0].clientHeight:0}return 0},shouldResize(){return 1===this.selection.length&&(!!this.store.value.nodes[this.selection[0].id]&&!this.store.value.nodes[this.selection[0].id].parent)}},mounted(){window.addEventListener("mousemove",this.updateCursorPosition),this.keyboard.on("keydown","Space",this.startPanning),this.keyboard.on("keyup","Space",this.stopPanning),this.keyboard.on("keydown","Backspace",this.deleteNodes),this.keyboard.on("keydown","$mod+Z",this.undo),this.keyboard.on("keydown","$mod+Shift+Z",this.redo),this.document.on("synced",(()=>{this.document.updateAwareness("selection",[])}))},beforeUnmount(){window.removeEventListener("mousemove",this.updateCursorPosition),this.keyboard.removeListeners()}});const ot=(0,q.Z)(st,[["render",se]]);var rt=ot;function dt(e,t,n,i,s,o){return(0,r.wg)(),(0,r.iD)("div",{id:"pointer-location",style:(0,M.j5)({left:`${s.x}px`,top:`${s.y}px`})},null,4)}var at={name:"PointerTracker",data(){return{x:0,y:0}},mounted(){window.addEventListener("mousemove",(e=>{this.x=e.clientX+2,this.y=e.clientY+2}))}};const ct=(0,q.Z)(at,[["render",dt],["__scopeId","data-v-0fb01106"]]);var lt=ct,ut=n(5941),ht={name:"App",components:{TitleBar:Q,DocumentCanvas:rt,PointerTracker:lt},data(){const e=new $;return{document:e,store:e.store,users:[],loading:!0,title:"",docId:void 0,filePath:void 0}},provide(){const e={document:this.document,store:(0,r.Fl)((()=>this.document.store)),state:(0,r.Fl)((()=>this.state)),send:this.send,filePath:(0,r.Fl)((()=>this.filePath))};return Object.keys(this.state.context).forEach((t=>{e[t]=(0,r.Fl)((()=>this.state.context[t]))})),e},setup(){c()()&&n.e(798).then(n.t.bind(n,2798,23)).then((e=>{Object.assign(ut,e.functions),e.catchErrors()}));const{state:e,send:t}=(0,F.e)(T);return{state:e,send:t}},methods:{broadcastUsername(){const e=u()("en",{maxWords:1});this.document.updateAwareness("name",`Anonymous ${e}`)}},mounted(){if(this.document.on("synced",(()=>{this.broadcastUsername(),this.loading=!1})),this.document.on("commit",(()=>{c()()&&n.e(916).then(n.t.bind(n,8916,23)).then((({ipcRenderer:e})=>{e.send("set-edited",!0)}))})),this.document.on("saved",(()=>{c()()&&n.e(916).then(n.t.bind(n,8916,23)).then((({ipcRenderer:e})=>{e.send("set-edited",!1)}))})),window.addEventListener("keydown",(e=>{"Space"===e.code&&e.target===document.body&&e.preventDefault()})),c()())n.e(916).then(n.t.bind(n,8916,23)).then((({ipcRenderer:e})=>{e.on("new-file",(()=>{ut.log("[App][ipcRenderer@set-filepath] This is a new empty file."),this.document.initSync()})),e.on("set-filepath",((e,t)=>{ut.log(`[App][ipcRenderer@set-filepath] filePath is ${t}.`),this.filePath=t,this.document.initPersistence(t)}))}));else{const e=window.location.search,t=new URLSearchParams(e);ut.log(`[App][mounted] urlParams.document is ${t.get("document")}`),this.document.initSync(t.get("document")),this.document.initPersistence(t.get("document"))}},beforeUnmount(){ut.log("[App][beforeUnmount] Closing document..."),this.document.close(),ut.log("[App][beforeUnmount] Document closed.")},watch:{"document.users":{deep:!0,handler(){const e=[];Object.keys(this.document.users).forEach((t=>{e.push(this.document.users[t])})),this.users=e}},"document.metadata.name":{deep:!0,handler(){this.title=this.document.metadata.name}}}};const gt=(0,q.Z)(ht,[["render",d]]);var pt=gt;const mt=(0,i.ri)(pt);mt.use(s.Z),mt.use(o.Z),mt.mount("#app")},1510:function(){}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.c=t,function(){var e=[];n.O=function(t,i,s,o){if(!i){var r=1/0;for(l=0;l<e.length;l++){i=e[l][0],s=e[l][1],o=e[l][2];for(var d=!0,a=0;a<i.length;a++)(!1&o||r>=o)&&Object.keys(n.O).every((function(e){return n.O[e](i[a])}))?i.splice(a--,1):(d=!1,o<r&&(r=o));if(d){e.splice(l--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[i,s,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(i,s){if(1&s&&(i=this(i)),8&s)return i;if("object"===typeof i&&i){if(4&s&&i.__esModule)return i;if(16&s&&"function"===typeof i.then)return i}var o=Object.create(null);n.r(o);var r={};e=e||[null,t({}),t([]),t(t)];for(var d=2&s&&i;"object"==typeof d&&!~e.indexOf(d);d=t(d))Object.getOwnPropertyNames(d).forEach((function(e){r[e]=function(){return i[e]}}));return r["default"]=function(){return i},n.d(o,r),o}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{798:"bb0d12ed",916:"fe57ca0f"}[e]+".js"}}(),function(){n.miniCssF=function(e){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="intrigue:";n.l=function(i,s,o,r){if(e[i])e[i].push(s);else{var d,a;if(void 0!==o)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var u=c[l];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+o){d=u;break}}d||(a=!0,d=document.createElement("script"),d.charset="utf-8",d.timeout=120,n.nc&&d.setAttribute("nonce",n.nc),d.setAttribute("data-webpack",t+o),d.src=i),e[i]=[s];var h=function(t,n){d.onerror=d.onload=null,clearTimeout(g);var s=e[i];if(delete e[i],d.parentNode&&d.parentNode.removeChild(d),s&&s.forEach((function(e){return e(n)})),t)return t(n)},g=setTimeout(h.bind(null,void 0,{type:"timeout",target:d}),12e4);d.onerror=h.bind(null,d.onerror),d.onload=h.bind(null,d.onload),a&&document.head.appendChild(d)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.p="/"}(),function(){var e={143:0};n.f.j=function(t,i){var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)i.push(s[2]);else{var o=new Promise((function(n,i){s=e[t]=[n,i]}));i.push(s[2]=o);var r=n.p+n.u(t),d=new Error,a=function(i){if(n.o(e,t)&&(s=e[t],0!==s&&(e[t]=void 0),s)){var o=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;d.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",d.name="ChunkLoadError",d.type=o,d.request=r,s[1](d)}};n.l(r,a,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,o,r=i[0],d=i[1],a=i[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(s in d)n.o(d,s)&&(n.m[s]=d[s]);if(a)var l=a(n)}for(t&&t(i);c<r.length;c++)o=r[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(l)},i=self["webpackChunkintrigue"]=self["webpackChunkintrigue"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(n.s=9938)}));i=n.O(i)})();
//# sourceMappingURL=app.33774855.js.map
{"version":3,"file":"js/app.14d8d5ca.js","mappings":"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","sources":["webpack://intrigue/./src/App.vue","webpack://intrigue/./src/utils/prop.js","webpack://intrigue/./src/utils/event.js","webpack://intrigue/./src/store/persist.js","webpack://intrigue/./src/store/sync.js","webpack://intrigue/./src/store/undo.js","webpack://intrigue/./src/store/types.js","webpack://intrigue/./src/store/document.js","webpack://intrigue/./src/state/index.js","webpack://intrigue/./src/utils/tutorial.js","webpack://intrigue/./src/components/window/TitleBar.vue","webpack://intrigue/./src/components/window/CopyButton.vue","webpack://intrigue/./src/components/window/CopyButton.vue?5bce","webpack://intrigue/./src/components/window/TitleBar.vue?1db7","webpack://intrigue/./src/components/canvas/Canvas.vue","webpack://intrigue/./src/keyboard/index.js","webpack://intrigue/./src/components/canvas/Node.vue","webpack://intrigue/./src/components/canvas/node/Note.vue","webpack://intrigue/./src/components/canvas/node/Note.vue?0e4b","webpack://intrigue/./src/components/canvas/node/Reference.vue","webpack://intrigue/./src/components/canvas/node/Reference.vue?0a06","webpack://intrigue/./src/literature/index.js","webpack://intrigue/./src/components/canvas/Node.vue?ed95","webpack://intrigue/./src/components/canvas/Link.vue","webpack://intrigue/./src/components/canvas/Link.vue?5143","webpack://intrigue/./src/components/canvas/Cursor.vue","webpack://intrigue/./src/components/canvas/Cursor.vue?4f09","webpack://intrigue/./src/components/canvas/Canvas.vue?de33","webpack://intrigue/./src/components/canvas/PointerTracker.vue","webpack://intrigue/./src/components/canvas/PointerTracker.vue?2721","webpack://intrigue/./src/components/utils/Debug.vue","webpack://intrigue/./src/components/utils/Debug.vue?dfaf","webpack://intrigue/./src/App.vue?7ccd","webpack://intrigue/./src/main.js","webpack://intrigue/webpack/bootstrap","webpack://intrigue/webpack/runtime/chunk loaded","webpack://intrigue/webpack/runtime/compat get default export","webpack://intrigue/webpack/runtime/create fake namespace object","webpack://intrigue/webpack/runtime/define property getters","webpack://intrigue/webpack/runtime/ensure chunk","webpack://intrigue/webpack/runtime/get javascript chunk filename","webpack://intrigue/webpack/runtime/get mini-css chunk filename","webpack://intrigue/webpack/runtime/global","webpack://intrigue/webpack/runtime/hasOwnProperty shorthand","webpack://intrigue/webpack/runtime/load script","webpack://intrigue/webpack/runtime/make namespace object","webpack://intrigue/webpack/runtime/node module decorator","webpack://intrigue/webpack/runtime/publicPath","webpack://intrigue/webpack/runtime/jsonp chunk loading","webpack://intrigue/webpack/startup"],"sourcesContent":["<template>\n    <TitleBar />\n    <DocumentCanvas />\n    <PointerTracker />\n    <Debug v-if=\"debug\"/>\n</template>\n\n<script>\nimport { computed } from 'vue';\nimport isElectron from 'is-electron';\n\n// import Avatar from 'vue-boring-avatars';\n\nimport getRandomFruitsName from 'random-fruits-name';\n\nimport { IntrigueDocument } from '@/store';\nimport intrigueMachine from '@/state';\nimport { useMachine } from '@xstate/vue';\n\nimport tutorialData from '@/utils/tutorial';\n\nimport TitleBar from '@/components/window/TitleBar.vue';\nimport DocumentCanvas from '@/components/canvas/Canvas.vue';\nimport PointerTracker from '@/components/canvas/PointerTracker.vue';\nimport Debug from '@/components/utils/Debug.vue';\n\nexport default {\n    name: 'App',\n    components: {\n        TitleBar,\n        DocumentCanvas,\n        PointerTracker,\n        Debug,\n    },\n\n    data() {\n        const document = new IntrigueDocument();\n\n        return {\n            document,\n            store: document.store,\n            users: [],\n            loading: true,\n            debug: false,\n            title: '',\n            docId: undefined,\n            filePath: undefined,\n        };\n    },\n\n    provide() {\n        // use function syntax so that we can access `this`\n        const injections = {\n            document: this.document,\n            store: computed(() => this.document.store),\n            state: computed(() => this.state),\n            send: this.send,\n            filePath: computed(() => this.filePath),\n        };\n\n        Object.keys(this.state.context).forEach((key) => {\n            injections[key] = computed(() => this.state.context[key]);\n        });\n\n        return injections;\n    },\n\n    setup() {\n        if (isElectron()) {\n            import('electron-log').then((log) => {\n                Object.assign(console, log.functions);\n                log.catchErrors();\n            });\n        }\n\n        const { state, send } = useMachine(intrigueMachine);\n        return { state, send };\n    },\n\n    methods: {\n        broadcastUsername() {\n            const fruit = getRandomFruitsName('en', { maxWords: 1 });\n            this.document.updateAwareness('name', `Anonymous ${fruit}`);\n        },\n    },\n\n    mounted() {\n        this.document.on('synced', () => {\n            this.broadcastUsername();\n            this.loading = false;\n        });\n\n        this.document.on('commit', () => {\n            if (isElectron()) {\n                // eslint-disable-next-line import/no-extraneous-dependencies, global-require\n                import('electron').then(({ ipcRenderer }) => {\n                    ipcRenderer.send('set-edited', true);\n                });\n            }\n        });\n\n        this.document.on('saved', () => {\n            if (isElectron()) {\n                // eslint-disable-next-line import/no-extraneous-dependencies, global-require\n                import('electron').then(({ ipcRenderer }) => {\n                    ipcRenderer.send('set-edited', false);\n                });\n            }\n        });\n\n        // Prevent space from causing scrolling down behavior.\n        window.addEventListener('keydown', (event) => {\n            if (event.code === 'Space' && event.target === document.body) {\n                event.preventDefault();\n            }\n        });\n\n        if (isElectron()) {\n            // eslint-disable-next-line import/no-extraneous-dependencies, global-require\n            import('electron').then(({ ipcRenderer }) => {\n                ipcRenderer.on('new-file', () => {\n                    console.log('[App][ipcRenderer@set-filepath] This is a new empty file.');\n                    this.document.initSync();\n                });\n\n                ipcRenderer.on('set-filepath', (_, filePath) => {\n                    console.log(`[App][ipcRenderer@set-filepath] filePath is ${filePath}.`);\n                    this.filePath = filePath;\n                    this.document.initPersistence(filePath);\n                });\n            });\n        } else {\n            const queryString = window.location.search;\n            const urlParams = new URLSearchParams(queryString);\n            console.log(`[App][mounted] urlParams.document is ${urlParams.get('document')}`);\n            this.document.initSync(urlParams.get('document'));\n\n            if (urlParams.get('document') === 'tutorial') {\n                console.log('[App][mounted@web] Loading tutorial data...');\n                Object.keys(tutorialData.nodes).forEach((nodeId) => {\n                    this.store.nodes[nodeId] = tutorialData.nodes[nodeId];\n                });\n\n                Object.keys(tutorialData.links).forEach((linkId) => {\n                    this.store.links[linkId] = tutorialData.links[linkId];\n                });\n            } else {\n                this.document.initPersistence(urlParams.get('document'));\n            }\n        }\n    },\n\n    beforeUnmount() {\n        console.log('[App][beforeUnmount] Closing document...');\n        this.document.close();\n        console.log('[App][beforeUnmount] Document closed.');\n    },\n\n    watch: {\n        'document.users': {\n            deep: true,\n            handler() {\n                const users = [];\n                Object.keys(this.document.users).forEach((userId) => {\n                    users.push(this.document.users[userId]);\n                });\n                this.users = users;\n            },\n        },\n        'document.metadata.name': {\n            deep: true,\n            handler() {\n                this.title = this.document.metadata.name;\n            },\n        },\n    },\n};\n</script>\n\n<style lang=\"scss\">\nhtml,\nbody,\n#app {\n    --background: #F8F9F9;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    background: var(--background);\n}\n\n.noselect {\n    -webkit-touch-callout: none; /* iOS Safari */\n    -webkit-user-select: none; /* Safari */\n    -khtml-user-select: none; /* Konqueror HTML */\n    -moz-user-select: none; /* Old versions of Firefox */\n    -ms-user-select: none; /* Internet Explorer/Edge */\n    user-select: none; /* Non-prefixed version, currently\n                                  supported by Chrome, Edge, Opera and Firefox */\n}\n</style>\n","/* eslint-disable no-plusplus */\n/* eslint-disable no-param-reassign */\nexport default function propByPath(object, path, value) {\n    const parts = path.split('.');\n    const limit = parts.length - 1;\n    for (let i = 0; i < limit; ++i) {\n        const key = parts[i];\n        object = object[key] ?? (object[key] = {});\n    }\n    const key = parts[limit];\n    if (value !== undefined) {\n        object[key] = value;\n    }\n    return object[key];\n}\n","export default class EventEmitter {\n    constructor() {\n        this.events = {};\n        // this.emitter = createNanoEvents();\n    }\n\n    // eslint-disable-next-line\n    on(event, callback) {\n        // return this.emitter.on(event, callback);\n        if (!this.events[event]) this.events[event] = [];\n        this.events[event].push(callback);\n        return () => {\n            this.events[event] = this.events[event]?.filter((i) => callback !== i);\n        };\n    }\n\n    emit(event, ...args) {\n        // this.emitter.emit(event, data);\n        const callbacks = this.events[event] || [];\n        callbacks.forEach((callback) => callback(...args));\n        // for (let i = 0, { length } = callbacks; i < length; i += 1) {\n        //     callbacks[i](...args);\n        // }\n    }\n}\n","import isElectron from 'is-electron';\nimport { encodeStateAsUpdate, applyUpdate } from 'yjs';\n// import * as mutex from 'lib0/mutex';\nimport EventEmitter from '@/utils/event';\n\nexport default class LocalFilePersistence extends EventEmitter {\n    constructor(filePath, doc, fs, debounce) {\n        super();\n        this.doc = doc;\n        this.filePath = filePath;\n        this.timeout = null;\n        this.debounce = debounce || 1000;\n\n        if (isElectron()) {\n            // eslint-disable-next-line global-require\n            const { readFile, writeFile, access } = require('fs/promises');\n            this.readFile = readFile;\n            this.writeFile = writeFile;\n            this.access = access;\n        } else if (fs) {\n            const { readFile, writeFile, access } = fs;\n            this.readFile = readFile;\n            this.writeFile = writeFile;\n            this.access = access;\n        } else {\n            throw new Error('LocalFilePersistence is designed to be used in Electron. Either make sure you are calling this class in an Electron environment, or provide your own async fs implementation.');\n        }\n\n        if (!this.filePath) {\n            this.emit('synced');\n        } else {\n            this.access(this.filePath).then(() => {\n                this.readFile(this.filePath).then((data) => {\n                    applyUpdate(this.doc, Uint8Array.from(data));\n                    this.emit('synced');\n                });\n            }).catch(() => {\n                // console.error(`Cannot access file at ${this.filePath}`);\n                this.storeUpdate();\n            });\n        }\n        this.doc.on('update', this.storeUpdate.bind(this));\n    }\n\n    storeUpdate() {\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n            this.timeout = null;\n        }\n        this.timeout = setTimeout(() => {\n            if (!this.filePath) return;\n\n            console.log('[LocalFilePersistence][storeUpdate] Saving to disk.');\n            console.log(encodeStateAsUpdate(this.doc));\n            this.writeFile(this.filePath, encodeStateAsUpdate(this.doc)).then(() => {\n                // if (callback) callback();\n                this.emit('saved');\n            });\n        }, this.debounce);\n    }\n}\n","import { nanoid } from 'nanoid';\nimport * as Vue from 'vue';\nimport { reactive } from 'vue';\nimport isElectron from 'is-electron';\nimport { enableVueBindings, syncedStore, getYjsValue } from '@syncedstore/core';\nimport jiff from 'jiff';\n\nimport { WebrtcProvider } from 'y-webrtc';\nimport { IndexeddbPersistence } from 'y-indexeddb';\nimport EventEmitter from '@/utils/event';\nimport LocalFilePersistence from './persist';\n\n// import * as T from \"./types\"\n// import { DocTypeDescription } from '@syncedstore/core/types/doc';\n\nenableVueBindings(Vue);\n\nexport default class SyncedDocument extends EventEmitter {\n    constructor(storeStructure) {\n        super();\n        this.syncInitialized = false;\n        this.storeStructure = storeStructure;\n        this.store = { ...storeStructure };\n        this.syncedData = syncedStore(storeStructure);\n        console.warn = () => null; // Supress the numerous warnings generated by SyncedStore.\n    }\n\n    initSync(documentId) {\n        console.log(`[Sync][initSync] Initializing sync with docID ${documentId}.`);\n        this.users = reactive({});\n        this.store.metadata.id = documentId || nanoid();\n        // this.syncedData.metadata.id = this.store.metadata.id;\n        this.updateSyncedData();\n\n        const doc = getYjsValue(this.syncedData);\n        this.syncProvider = new WebrtcProvider(this.store.metadata.id, doc);\n        this.syncProvider.awareness.on('change', this.handleChanges.bind(this));\n        doc.on('update', () => this.emit('sync'));\n\n        // Generate a random user id, then update the awareness.\n        this.userId = nanoid();\n        this.syncProvider.awareness.setLocalStateField('id', this.userId);\n        // if (!this.store.metadata.name) this.store.metadata.name = 'Untitled';\n\n        this.localUser = reactive(this.users[this.userId]);\n\n        this.syncInitialized = true;\n    }\n\n    initPersistence(filePath) {\n        console.log(filePath);\n        const doc = getYjsValue(this.syncedData);\n        this.saveProvider = isElectron()\n            ? new LocalFilePersistence(filePath, doc)\n            : new IndexeddbPersistence(filePath || this.store.metadata.id, doc);\n\n        this.saveProvider.on('synced', () => {\n            console.log('[Sync][saveProvider@synced] Save provider synced.', this.syncedData.metadata.id);\n            this.store = JSON.parse(JSON.stringify(this.syncedData));\n            if (!this.syncInitialized) this.initSync(this.syncedData.metadata.id);\n            this.emit('synced');\n        });\n\n        this.saveProvider.on('saved', () => {\n            console.log('[Sync][saveProvider@synced] Save provider saved.');\n            this.emit('saved');\n        });\n    }\n\n    updateSyncedData() {\n        console.log('[Sync][updateSyncedData] Updating synced data from store after commit.');\n        const changes = jiff.diff(this.syncedData, this.store).filter(\n            (change) => change.path !== '/fragment',\n        );\n        jiff.patchInPlace(changes, this.syncedData);\n    }\n\n    updateStoreData() {\n        console.log('[Sync][updateStoreData] Updating store data from upon sync update.');\n        const changes = jiff.diff(this.store, this.syncedData).filter(\n            (change) => change.path !== '/fragment',\n        );\n        jiff.patchInPlace(changes, this.store);\n    }\n\n    close() {\n        this.syncProvider.destroy();\n    }\n\n    // eslint-disable-next-line\n    updateAwareness(key, value) {\n        if (!this.syncInitialized) return;\n        this.syncProvider.awareness.setLocalStateField(key, value);\n    }\n\n    registerAwarenessCallback(key, callback) {\n        this.syncProvider.awareness.on(key, callback);\n    }\n\n    handleChanges() {\n        const awarenessInfo = [...this.syncProvider.awareness.getStates().values()];\n        const onlineUsers = new Set();\n        const offlineUsers = new Set(Object.keys(this.users));\n\n        awarenessInfo.forEach((user) => {\n            onlineUsers.add(user.id);\n            offlineUsers.delete(user.id);\n\n            if (!this.users[user.id]) this.users[user.id] = {};\n            Object.entries(user).forEach(([key, value]) => {\n                this.users[user.id][key] = value;\n            });\n        });\n\n        offlineUsers.forEach((userId) => delete this.users[userId]);\n    }\n\n    stringify() {\n        return JSON.stringify(this.store);\n    }\n}\n","import SyncedDocument from './sync';\n\nexport default class ReversibleDocument extends SyncedDocument {\n    constructor(storeStructure) {\n        super(storeStructure);\n\n        this.inverses = {};\n        this.undoStack = [];\n        this.redoStack = [];\n\n        this.previousTime = -1;\n        this.captureTimeout = 50;\n    }\n\n    registerInverses(actionA, actionB) {\n        this.inverses[actionA] = actionB;\n        this.inverses[actionB] = actionA;\n    }\n\n    commit(action, params) {\n        let inverseParams = null;\n\n        // eslint-disable-next-line\n        const actionFunction = this[action].bind(this);\n\n        if (actionFunction !== undefined) {\n            inverseParams = actionFunction(params);\n        } else {\n            console.error(`[Undo][Commit] There is no method called ${action}() on this object:`, this);\n            return;\n        }\n\n        if (!inverseParams) return;\n\n        const currentTime = Date.now();\n        if (Math.abs(currentTime - this.previousTime) < this.captureTimeout) {\n            console.log('[Undo][Commit] Capturing.');\n            // If the previous item is not in an array, then put it inside one.\n            if (!Array.isArray(this.undoStack[this.undoStack.length - 1])) {\n                this.undoStack[this.undoStack.length - 1] = [\n                    this.undoStack[this.undoStack.length - 1],\n                ];\n            }\n            this.undoStack[this.undoStack.length - 1].push({ action, inverseParams });\n        } else {\n            this.undoStack.push({ action, inverseParams });\n        }\n        this.previousTime = currentTime;\n        // console.log(`[Undo][Commit] ${JSON.stringify(this.undoStack, null, 2)}`);\n\n        this.redoStack = [];\n        this.emit('commit');\n    }\n\n    popStackItem(fromStack, toStack) {\n        if (fromStack.length <= 0) return;\n        let lastRecord = fromStack.pop();\n        if (!lastRecord) return;\n\n        if (!Array.isArray(lastRecord)) lastRecord = [lastRecord];\n\n        const toStackRecord = [];\n        lastRecord.reverse().forEach((item) => {\n            const inverseAction = this.inverses[item.action];\n            if (!inverseAction) {\n                console.error(`There is no registered inverse for ${item.action}().`);\n                return;\n            }\n\n            let inverseParams;\n\n            // eslint-disable-next-line\n            const actionFunction = this[inverseAction].bind(this);\n\n            if (actionFunction !== undefined) {\n                inverseParams = actionFunction(item.inverseParams);\n            } else {\n                console.error(`There is no method called ${inverseAction}() on this object:`, this);\n            }\n\n            toStackRecord.push({\n                action: inverseAction,\n                inverseParams,\n            });\n        });\n\n        toStack.push(toStackRecord.length === 1 ? toStackRecord[0] : toStackRecord);\n    }\n\n    undo() {\n        this.popStackItem(this.undoStack, this.redoStack);\n    }\n\n    redo() {\n        this.popStackItem(this.redoStack, this.undoStack);\n    }\n\n    canUndo() {\n        return this.undoStack.length > 0;\n    }\n\n    canRedo() {\n        return this.redoStack.length > 0;\n    }\n}\n","export default class NodeTypes {\n    static Note = 'note';\n\n    static Reference = 'reference';\n\n    static Area = 'area';\n}\n","/* eslint-disable no-param-reassign */\nimport { reactive } from 'vue';\nimport { nanoid } from 'nanoid';\n\nimport propByPath from '@/utils/prop';\n\nimport ReversibleDocument from './undo';\nimport NodeTypes from './types';\n\nexport default class IntrigueDocument extends ReversibleDocument {\n    constructor() {\n        super({\n            metadata: {},\n            nodes: {},\n            links: {},\n\n            fragment: 'xml',\n        });\n\n        this.remoteSelection = reactive(new Set());\n\n        this.registerInverses('createNode', 'deleteNode');\n        this.registerInverses('createNodes', 'deleteNodes');\n        this.registerInverses('updateNode', 'updateNode');\n        this.registerInverses('updateNodes', 'updateNodes');\n        this.registerInverses('snapNode', 'unsnapNode');\n        this.registerInverses('createLink', 'removeLink');\n\n        this.unbindSyncHandler = this.on('sync', this.updateStoreData.bind(this));\n        this.unbindCommitHandler = this.on('commit', this.updateSyncedData.bind(this));\n    }\n\n    // Note: each function below should return its inverse parameters\n    createNode(nodeItem) {\n        const nodeId = nodeItem.id ? nodeItem.id : nanoid();\n        const node = {\n            id: nodeId,\n            type: nodeItem.type,\n            content: nodeItem.content,\n            links: [],\n            parent: null,\n            children: [],\n            identifier: null,\n            literature: null,\n            x: nodeItem.x ? nodeItem.x : 0,\n            y: nodeItem.y ? nodeItem.y : 0,\n            w: nodeItem.w ? nodeItem.w : 200,\n            currentX: nodeItem.x ? nodeItem.x : 0,\n            currentY: nodeItem.y ? nodeItem.y : 0,\n            currentWidth: nodeItem.w ? nodeItem.w : 200,\n        };\n        if (nodeItem.links) {\n            nodeItem.links.forEach((link) => this.createLink(link));\n        }\n        if (nodeItem.children) {\n            nodeItem.children.forEach((child) => this.snapNode(child));\n        }\n        this.store.nodes[nodeId] = node;\n        return nodeId;\n    }\n\n    createNodes(nodeItems) {\n        const nodeIds = [];\n        const newLinks = [];\n        const newChildren = [];\n        nodeItems.forEach((item) => {\n            // Extract all links to be created.\n            // This is to delay link creation until all nodes are first created.\n            if (item.links) {\n                item.links.forEach((link) => newLinks.push(link));\n                delete item.links;\n            }\n            // Extract all children to be snapped.\n            // Same as above.\n            if (item.children) {\n                item.children.forEach((child) => newChildren.push(child));\n                delete item.children;\n            }\n\n            const nodeId = this.createNode(item);\n            nodeIds.push(nodeId);\n        });\n\n        newLinks.forEach((link) => this.createLink(link));\n\n        newChildren.forEach((pairInfo) => this.snapNode(pairInfo));\n\n        return nodeIds;\n    }\n\n    deleteNode(nodeId) {\n        const node = { ...this.store.nodes[nodeId] };\n        const removedLinks = [];\n        const unsnappedChildren = [];\n        node.links.forEach((linkId) => {\n            removedLinks.push(this.removeLink(linkId));\n        });\n        node.children.forEach((childId) => {\n            unsnappedChildren.push(\n                this.unsnapNode({\n                    source: node.id,\n                    target: childId,\n                }),\n            );\n        });\n        node.links = removedLinks;\n        node.children = unsnappedChildren;\n        delete this.store.nodes[nodeId];\n        return node;\n    }\n\n    deleteNodes(nodeIds) {\n        const nodes = [];\n        nodeIds.forEach((nodeId) => {\n            const node = this.deleteNode(nodeId);\n            nodes.push(node);\n        });\n        return nodes;\n    }\n\n    updateNode(update) {\n        const node = this.store.nodes[update.id];\n        const inverseParams = {\n            id: update.id,\n        };\n        // Update parameters by a number\n        if (update.by) {\n            inverseParams.by = {};\n            Object.entries(update.by).forEach(([path, value]) => {\n                const originalValue = propByPath(node, path);\n                if (typeof originalValue !== 'number') {\n                    console.error('Only number properties can be updated by a number!');\n                    return;\n                }\n                propByPath(node, path, originalValue + value);\n                inverseParams.by[path] = -originalValue;\n            });\n        }\n        // Set parameters to values\n        if (update.set) {\n            inverseParams.set = {};\n            Object.entries(update.set).forEach(([path, value]) => {\n                const originalValue = propByPath(node, path);\n                propByPath(node, path, value);\n                inverseParams.set[path] = originalValue;\n            });\n        }\n        return inverseParams;\n    }\n\n    updateNodes(update) {\n        const inverseParams = {\n            id: [...update.id],\n        };\n\n        if (update.by) {\n            inverseParams.by = {};\n            Object.entries(update.by).forEach(([path, value]) => {\n                inverseParams.by[path] = -value;\n            });\n            update.id.forEach((nodeId) => {\n                this.updateNode({\n                    id: nodeId,\n                    by: update.by,\n                });\n            });\n        }\n\n        if (update.set) {\n            inverseParams.set = {};\n            update.id.forEach((nodeId) => {\n                inverseParams.set[nodeId] = {};\n                const node = this.store.nodes[nodeId];\n                Object.keys(update.set[nodeId]).forEach((path) => {\n                    inverseParams.set[nodeId][path] = propByPath(node, path);\n                });\n                this.updateNode({\n                    id: nodeId,\n                    set: update.set[nodeId],\n                });\n            });\n        }\n\n        return inverseParams;\n    }\n\n    snapNode(nodes) {\n        const inverseParams = {};\n        if (!nodes.source || !nodes.target) return false;\n        const parent = this.store.nodes[nodes.source];\n        const child = this.store.nodes[nodes.target];\n\n        // Areas can have multiple children\n        if (parent.type === NodeTypes.Area) {\n            parent.children.push(nodes.target);\n            // Remove potential duplicates\n            parent.children.filter((item, i) => parent.children.indexOf(item) === i);\n            child.parent = parent.id;\n\n            inverseParams.source = nodes.source;\n            inverseParams.target = nodes.target;\n\n            // Other nodes may only have one child.\n        } else if (parent.children.length === 0) {\n            parent.children.push(nodes.target);\n            // Remove potential duplicates\n            parent.children.filter((item, i) => parent.children.indexOf(item) === i);\n            child.parent = parent.id;\n\n            inverseParams.source = nodes.source;\n            inverseParams.target = nodes.target;\n        }\n        return inverseParams.source ? inverseParams : false;\n    }\n\n    unsnapNode(nodes) {\n        const inverseParams = {};\n        if (!nodes.source || !nodes.target) return false;\n        const parent = this.store.nodes[nodes.source];\n        const child = this.store.nodes[nodes.target];\n\n        const childIndex = parent.children.indexOf(nodes.target);\n        if (childIndex > -1) {\n            parent.children.splice(childIndex, 1);\n            child.parent = null;\n            inverseParams.source = nodes.source;\n            inverseParams.target = nodes.target;\n        }\n\n        return inverseParams.source ? inverseParams : false;\n    }\n\n    createLink(params) {\n        const source = this.store.nodes[params.source];\n        const target = this.store.nodes[params.target];\n\n        const linkId = params.id ? params.id : nanoid();\n        const link = {\n            id: linkId,\n            source: params.source,\n            target: params.target,\n        };\n        this.store.links[linkId] = link;\n\n        source.links.push(linkId);\n        source.links.filter((item, i) => source.links.indexOf(item) === i);\n        target.links.push(linkId);\n        target.links.filter((item, i) => target.links.indexOf(item) === i);\n\n        return linkId;\n    }\n\n    removeLink(linkId) {\n        const link = { ...this.store.links[linkId] };\n        const source = this.store.nodes[link.source];\n        const target = this.store.nodes[link.target];\n\n        source.links.splice(source.links.indexOf(linkId), 1);\n        target.links.splice(target.links.indexOf(linkId), 1);\n\n        delete this.store.links[linkId];\n        return link;\n    }\n\n    findLinkByNodeIds(sourceId, targetId) {\n        console.log(sourceId, targetId);\n        const finds = Object.keys(this.store.links).filter((linkId) => {\n            const link = this.store.links[linkId];\n            return link.source === sourceId && link.target === targetId;\n        });\n        return finds.length > 0 ? finds[0] : false;\n    }\n}\n","/* eslint-disable no-param-reassign */\n/* eslint-disable no-return-assign */\n\nimport { createMachine, assign } from 'xstate';\n\nconst ViewingState = {\n    initial: 'Idle',\n    states: {\n        Idle: {\n            on: {\n                'editing title': 'TitleEditing',\n                'space pressed': { target: 'Panning', actions: 'setPanning' },\n                'start dragging': { target: 'Dragging', actions: 'setDragging' },\n                'start linking': { target: 'Linking', actions: 'setLinking' },\n                'update selection': { target: 'Selecting', actions: 'setSelection' },\n                'create node': { target: '#Intrigue.Editing', actions: 'setEditing' },\n                'delete node': { target: 'Idle', actions: 'clearSelection' },\n                'dblclick node': { target: '#Intrigue.Editing', actions: 'setEditing' },\n            },\n        },\n\n        TitleEditing: {\n            on: { 'stop editing title': 'Idle' },\n        },\n\n        Panning: {\n            on: {\n                'space released': { target: 'Idle', actions: 'clearPanning' },\n            },\n        },\n\n        Selecting: {\n            on: {\n                'update selection': { target: 'Selecting', actions: 'setSelection' },\n                'done selecting': { target: 'Idle' },\n            },\n        },\n\n        Dragging: {\n            on: {\n                'drop enter': { target: 'Dropping', actions: 'setDropping' },\n                'stop dragging': { target: 'Idle', actions: ['clearDragging', 'clearDetaching'] },\n                'start detaching': { target: 'Detaching', actions: 'setDetaching' },\n            },\n        },\n\n        Dropping: {\n            on: {\n                'drop leave': { target: 'Dragging', actions: 'clearDropping' },\n                'stop dragging': { target: 'Idle', actions: ['clearDragging', 'clearDropping'] },\n            },\n        },\n\n        Detaching: {\n            on: {\n                detached: { target: 'Dragging', actions: 'clearDetaching' },\n                'stop detaching': { target: 'Idle', actions: 'clearDetaching' },\n            },\n        },\n\n        Linking: {\n            on: {\n                'update selection': { target: 'Idle', actions: ['clearLinking', 'setSelection'] },\n                'click on empty canvas': { target: 'Idle', actions: 'clearLinking' },\n                'create node': { target: '#Intrigue.Editing', actions: ['clearLinking', 'setEditing'] },\n            },\n        },\n    },\n};\n\nconst EditingState = {\n    initial: 'Editing',\n    states: {\n        Editing: {\n            on: {\n                'editor blur': {\n                    target: '#Intrigue.Viewing',\n                    actions: 'clearEditing',\n                },\n                'update selection': {\n                    target: '#Intrigue.Viewing',\n                    actions: ['clearEditing', 'setSelection'],\n                },\n            },\n        },\n    },\n};\n\nconst ArrangingState = {\n    initial: 'Selected',\n    states: {\n        Selected: {\n            on: {\n                'click on empty canvas': '#Intrigue.Viewing',\n                'drag node handle': 'Resizing',\n            },\n        },\n\n        Resizing: {\n            on: {\n                'drag end': 'Selected',\n            },\n        },\n    },\n};\n\nconst intrigueMachine = createMachine(\n    {\n        id: 'Intrigue',\n        initial: 'Viewing',\n        states: {\n            Viewing: { ...ViewingState },\n            Arranging: { ...ArrangingState },\n            Editing: { ...EditingState },\n        },\n        context: {\n            editing: null,\n            panning: false,\n            dragging: null,\n            dropping: null,\n            selection: [],\n            detaching: [],\n            linking: null,\n        },\n    },\n    {\n        actions: {\n            setEditing: assign({\n                editing: (context, event) => (context.editing = event.node),\n            }),\n\n            clearEditing: assign({\n                editing: (context) => (context.editing = null),\n            }),\n\n            setPanning: assign({\n                panning: (context) => (context.panning = true),\n            }),\n\n            clearPanning: assign({\n                panning: (context) => (context.panning = false),\n            }),\n\n            setDragging: assign({\n                dragging: (context, event) => (context.dragging = event.node),\n            }),\n\n            clearDragging: assign({\n                dragging: (context) => (context.dragging = null),\n            }),\n\n            setDropping: assign({\n                dropping: (context, event) => (context.dropping = event.node),\n            }),\n\n            clearDropping: assign({\n                dropping: (context) => (context.dropping = null),\n            }),\n\n            setDetaching: assign({\n                detaching: (context, event) => (context.detaching = event.detaching),\n            }),\n\n            clearDetaching: assign({\n                detaching: (context) => (context.detaching = []),\n            }),\n\n            setSelection: assign({\n                selection: (context, event) => (context.selection = event.selection),\n            }),\n\n            clearSelection: assign({\n                selection: (context) => (context.selection = []),\n            }),\n\n            setLinking: assign({\n                linking: (context, event) => (context.linking = event.node),\n            }),\n\n            clearLinking: assign({\n                linking: (context) => (context.linking = null),\n            }),\n        },\n    },\n);\n\nexport default intrigueMachine;\n// export const state = interpret(intrigueMachine).start();\n","const tutorialData = {\n    metadata: {\n        id: 'tutorial',\n    },\n    links: {\n        aP1EHlKvrNgjPx1kElhZ0: {\n            id: 'aP1EHlKvrNgjPx1kElhZ0',\n            source: 'AHiu8yMyfhq5ZYnjuoIn0',\n            target: '6Z-x843ah7e0b0fZMReph',\n        },\n        'WXCl7YDCOuoK-X7ZAOfEY': {\n            id: 'WXCl7YDCOuoK-X7ZAOfEY',\n            source: 'AHiu8yMyfhq5ZYnjuoIn0',\n            target: 'SALvRB6xX4hqjJVjU6Y_b',\n        },\n        F39NcKCnnIjtqGPzvoA1W: {\n            id: 'F39NcKCnnIjtqGPzvoA1W',\n            source: 'EwfSxmoKarx3n7W1mJy8s',\n            target: '8N-6eZFYDRjV2MmtRHqZD',\n        },\n        IjnvakXbzDwcf84oBqYCb: {\n            id: 'IjnvakXbzDwcf84oBqYCb',\n            source: 'SALvRB6xX4hqjJVjU6Y_b',\n            target: 'aoHmIUmem-T3Zg_VOEvRr',\n        },\n        'KGeuXb3kocr6rZTAOr-i_': {\n            id: 'KGeuXb3kocr6rZTAOr-i_',\n            source: '8N-6eZFYDRjV2MmtRHqZD',\n            target: 'wzwAxT0LV6sfNjOgv31fx',\n        },\n        'ps9k-tiBPP0cH9ymY4Myy': {\n            id: 'ps9k-tiBPP0cH9ymY4Myy',\n            source: 'JCnC9yAUfQ3IXvnj_THs8',\n            target: 'agP9N5iMMR8mJF1s5Wthr',\n        },\n        'jNo6CHcnaxjK7Bk4e-bAc': {\n            id: 'jNo6CHcnaxjK7Bk4e-bAc',\n            source: 'AHiu8yMyfhq5ZYnjuoIn0',\n            target: 'rxyYL1-vZysaZgRMzDXNU',\n        },\n        bPRss4q2Tvzn_ea1TY4Wr: {\n            id: 'bPRss4q2Tvzn_ea1TY4Wr',\n            source: 'rxyYL1-vZysaZgRMzDXNU',\n            target: 'jPkhyrgf3HOvPALhbfWYj',\n        },\n        CsKDxvFhIxKDk_m6Bj8Dh: {\n            id: 'CsKDxvFhIxKDk_m6Bj8Dh',\n            source: '3nj7Xpr-AdGt3rKLomiK5',\n            target: 'anvYLObXrGTWIk8T3R2rq',\n        },\n        DTZkgJWGKYriyalyLJfZx: {\n            id: 'DTZkgJWGKYriyalyLJfZx',\n            source: 'EIB7xARz2ceZcpBkE940d',\n            target: 'anvYLObXrGTWIk8T3R2rq',\n        },\n        NBLwCo0fXhOXI6DGjqtWU: {\n            id: 'NBLwCo0fXhOXI6DGjqtWU',\n            source: '3nj7Xpr-AdGt3rKLomiK5',\n            target: 'KsZsnbXyRuVqf3FKtK0BA',\n        },\n    },\n    nodes: {\n        AHiu8yMyfhq5ZYnjuoIn0: {\n            id: 'AHiu8yMyfhq5ZYnjuoIn0',\n            type: 'note',\n            content: '<h1>Hello! Welcome to Intrigue </h1><p></p><p>Using this app, you can quickly write down your ideas and corresponding references, and make your academic writing faster.</p>',\n            links: [\n                'aP1EHlKvrNgjPx1kElhZ0',\n                'WXCl7YDCOuoK-X7ZAOfEY',\n                'jNo6CHcnaxjK7Bk4e-bAc',\n            ],\n            parent: null,\n            children: [],\n            identifier: null,\n            literature: null,\n            x: 558,\n            y: 99,\n            w: 445.00390000000004,\n            currentX: 558,\n            currentY: 99,\n            currentWidth: 445.00390000000004,\n            currentHeight: 75,\n            h: 79,\n        },\n        SALvRB6xX4hqjJVjU6Y_b: {\n            id: 'SALvRB6xX4hqjJVjU6Y_b',\n            type: 'note',\n            content: '<h2>This is a note.</h2><p></p><p>Notes comes with <strong>WYSIWYG markdown</strong> support.</p>',\n            links: [\n                'WXCl7YDCOuoK-X7ZAOfEY',\n                'IjnvakXbzDwcf84oBqYCb',\n            ],\n            parent: null,\n            children: [\n                'rK2TqMSt-f9f784M19Vro',\n            ],\n            identifier: null,\n            literature: null,\n            x: 287,\n            y: 191,\n            w: 200,\n            currentX: 287,\n            currentY: 191,\n            currentWidth: 200,\n            currentHeight: 68,\n        },\n        'rK2TqMSt-f9f784M19Vro': {\n            id: 'rK2TqMSt-f9f784M19Vro',\n            type: 'note',\n            content: '<p>Notes can be <strong>snapped</strong> together, by dragging one onto another.</p>',\n            links: [],\n            parent: 'SALvRB6xX4hqjJVjU6Y_b',\n            children: [],\n            identifier: null,\n            literature: null,\n            x: 287,\n            y: 264,\n            w: 200,\n            currentX: 287,\n            currentY: 264,\n            currentWidth: 200,\n            currentHeight: 34,\n        },\n        '6Z-x843ah7e0b0fZMReph': {\n            id: '6Z-x843ah7e0b0fZMReph',\n            type: 'note',\n            content: '<h2>Inspiration</h2><p></p><p>Intrigue is heavily inspired by&nbsp;<strong>Victor Margolin</strong>s method of organizing research literature and writing, which makes use of note cards and literature canvases.</p>',\n            links: [\n                'aP1EHlKvrNgjPx1kElhZ0',\n            ],\n            parent: null,\n            children: [\n                '8N-6eZFYDRjV2MmtRHqZD',\n            ],\n            identifier: null,\n            literature: null,\n            x: 615,\n            y: 239,\n            w: 329.0079,\n            currentX: 615,\n            currentY: 239,\n            currentWidth: 329.0079,\n            currentHeight: 82,\n            h: 86,\n        },\n        '8N-6eZFYDRjV2MmtRHqZD': {\n            id: '8N-6eZFYDRjV2MmtRHqZD',\n            type: 'reference',\n            content: '<p><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://www.youtube.com/watch?v=Kxyy0THLfuI\">https://www.youtube.com/watch?v=Kxyy0THLfuI</a></p>',\n            links: [\n                'F39NcKCnnIjtqGPzvoA1W',\n                'KGeuXb3kocr6rZTAOr-i_',\n            ],\n            parent: '6Z-x843ah7e0b0fZMReph',\n            children: [],\n            identifier: 'https://www.youtube.com/watch?v=Kxyy0THLfuI',\n            literature: null,\n            x: 615,\n            y: 326,\n            w: 329.0079,\n            currentX: 615,\n            currentY: 326,\n            currentWidth: 329.0079,\n            currentHeight: 62,\n            referenceType: 'url',\n            title: 'The process of writing World History of Design - YouTube',\n            author: [\n                {\n                    family: 'Web link',\n                },\n            ],\n            record: {\n                title: 'The process of writing World History of Design - YouTube',\n                author: [\n                    {\n                        family: 'Web link',\n                    },\n                ],\n                identifier: 'https://www.youtube.com/watch?v=Kxyy0THLfuI',\n            },\n        },\n        EwfSxmoKarx3n7W1mJy8s: {\n            id: 'EwfSxmoKarx3n7W1mJy8s',\n            type: 'note',\n            content: '<p>This is a reference. Try double-clicking it!</p>',\n            links: [\n                'F39NcKCnnIjtqGPzvoA1W',\n            ],\n            parent: null,\n            children: [],\n            identifier: null,\n            literature: null,\n            x: 995,\n            y: 268,\n            w: 129.00889999999998,\n            currentX: 995,\n            currentY: 268,\n            currentWidth: 129.00889999999998,\n            currentHeight: 34,\n            h: 38,\n        },\n        'aoHmIUmem-T3Zg_VOEvRr': {\n            id: 'aoHmIUmem-T3Zg_VOEvRr',\n            type: 'reference',\n            content: '<p><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax\">https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax</a></p>',\n            links: [\n                'IjnvakXbzDwcf84oBqYCb',\n            ],\n            parent: null,\n            children: [],\n            identifier: 'https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax',\n            literature: null,\n            x: 113,\n            y: 362,\n            w: 200,\n            currentX: 113,\n            currentY: 362,\n            currentWidth: 200,\n            currentHeight: 117,\n            referenceType: 'url',\n            title: 'Basic writing and formatting syntax - GitHub Docs',\n            author: [\n                {\n                    family: 'Web link',\n                },\n            ],\n            record: {\n                title: 'Basic writing and formatting syntax - GitHub Docs',\n                author: [\n                    {\n                        family: 'Web link',\n                    },\n                ],\n                identifier: 'https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax',\n            },\n        },\n        wzwAxT0LV6sfNjOgv31fx: {\n            id: 'wzwAxT0LV6sfNjOgv31fx',\n            type: 'note',\n            content: '<h2>References</h2><p></p><p>Many things can be <strong>automatically</strong> turned into reference notes, just by <strong>pasting in the identifiers</strong>:</p><p></p><ul><li><p>ISBN</p></li><li><p>DOI</p></li><li><p>Web Link</p></li><li><p>Zotero item link</p></li></ul>',\n            links: [\n                'KGeuXb3kocr6rZTAOr-i_',\n            ],\n            parent: null,\n            children: [\n                'JCnC9yAUfQ3IXvnj_THs8',\n            ],\n            identifier: null,\n            literature: null,\n            x: 331,\n            y: 591,\n            w: 327.0079,\n            currentX: 331,\n            currentY: 591,\n            currentWidth: 327.0079,\n            currentHeight: 137,\n            h: 141,\n        },\n        JCnC9yAUfQ3IXvnj_THs8: {\n            id: 'JCnC9yAUfQ3IXvnj_THs8',\n            type: 'reference',\n            content: '<p>10.1561/1100000005</p>',\n            links: [\n                'ps9k-tiBPP0cH9ymY4Myy',\n            ],\n            parent: 'wzwAxT0LV6sfNjOgv31fx',\n            children: [],\n            identifier: '10.1561/1100000005',\n            literature: null,\n            x: 331,\n            y: 733,\n            w: 327.0079,\n            currentX: 331,\n            currentY: 733,\n            currentWidth: 327.0079,\n            currentHeight: 48,\n            referenceType: 'doi',\n            title: 'Human-Robot Interaction: A Survey',\n            author: [\n                {\n                    given: 'Michael A.',\n                    family: 'Goodrich',\n                    sequence: 'first',\n                    affiliation: [],\n                },\n                {\n                    given: 'Alan C.',\n                    family: 'Schultz',\n                    sequence: 'first',\n                    affiliation: [],\n                },\n            ],\n            record: {\n                indexed: {\n                    'date-parts': [\n                        [\n                            2022,\n                            8,\n                            5,\n                        ],\n                    ],\n                    'date-time': '2022-08-05T22:49:48Z',\n                    timestamp: 1659739788859,\n                },\n                'reference-count': 0,\n                publisher: 'Now Publishers',\n                issue: '3',\n                'content-domain': {\n                    domain: [],\n                    'crossmark-restriction': false,\n                },\n                'published-print': {\n                    'date-parts': [\n                        [\n                            2007,\n                        ],\n                    ],\n                },\n                DOI: '10.1561/1100000005',\n                type: 'article-journal',\n                created: {\n                    'date-parts': [\n                        [\n                            2008,\n                            2,\n                            5,\n                        ],\n                    ],\n                    'date-time': '2008-02-05T19:23:58Z',\n                    timestamp: 1202239438000,\n                },\n                page: '203-275',\n                source: 'Crossref',\n                'is-referenced-by-count': 880,\n                title: 'Human-Robot Interaction: A Survey',\n                prefix: '10.1561',\n                volume: '1',\n                author: [\n                    {\n                        given: 'Michael A.',\n                        family: 'Goodrich',\n                        sequence: 'first',\n                        affiliation: [],\n                    },\n                    {\n                        given: 'Alan C.',\n                        family: 'Schultz',\n                        sequence: 'first',\n                        affiliation: [],\n                    },\n                ],\n                member: '432',\n                'container-title': 'Foundations and Trends in Human-Computer Interaction',\n                'original-title': [],\n                language: 'en',\n                deposited: {\n                    'date-parts': [\n                        [\n                            2020,\n                            2,\n                            27,\n                        ],\n                    ],\n                    'date-time': '2020-02-27T13:58:46Z',\n                    timestamp: 1582811926000,\n                },\n                score: 1,\n                resource: {\n                    primary: {\n                        URL: 'http://www.nowpublishers.com/article/Details/HCI-005',\n                    },\n                },\n                subtitle: [],\n                'short-title': [],\n                issued: {\n                    'date-parts': [\n                        [\n                            2007,\n                        ],\n                    ],\n                },\n                'references-count': 0,\n                'journal-issue': {\n                    issue: '3',\n                    'published-online': {\n                        'date-parts': [\n                            [\n                                2007,\n                            ],\n                        ],\n                    },\n                    'published-print': {\n                        'date-parts': [\n                            [\n                                2007,\n                            ],\n                        ],\n                    },\n                },\n                URL: 'http://dx.doi.org/10.1561/1100000005',\n                relation: {},\n                ISSN: [\n                    '1551-3955',\n                    '1551-3963',\n                ],\n                subject: [\n                    'Computer Science Applications',\n                    'Human-Computer Interaction',\n                ],\n                'container-title-short': 'FNT in Human-Computer Interaction',\n                published: {\n                    'date-parts': [\n                        [\n                            2007,\n                        ],\n                    ],\n                },\n                id: 'temp_id_8637346830865666',\n            },\n        },\n        agP9N5iMMR8mJF1s5Wthr: {\n            id: 'agP9N5iMMR8mJF1s5Wthr',\n            type: 'note',\n            content: '<p>Try double-clicking me as well ;)</p>',\n            links: [\n                'ps9k-tiBPP0cH9ymY4Myy',\n            ],\n            parent: null,\n            children: [],\n            identifier: null,\n            literature: null,\n            x: 543,\n            y: 826,\n            w: 200,\n            currentX: 543,\n            currentY: 826,\n            currentWidth: 200,\n            currentHeight: 20,\n        },\n        jPkhyrgf3HOvPALhbfWYj: {\n            id: 'jPkhyrgf3HOvPALhbfWYj',\n            type: 'note',\n            content: \"<h2>Intrigue uses offline-first distributed collaborative editing.</h2><p></p><p>What does it mean? Let's break it down.</p>\",\n            links: [\n                'bPRss4q2Tvzn_ea1TY4Wr',\n            ],\n            parent: null,\n            children: [\n                'n7FUs3oUm4M1FZC-uHzsy',\n            ],\n            identifier: null,\n            literature: null,\n            x: 1158,\n            y: 222,\n            w: 366.0079,\n            currentX: 1158,\n            currentY: 222,\n            currentWidth: 366.0079,\n            currentHeight: 75,\n            h: 79,\n        },\n        'rxyYL1-vZysaZgRMzDXNU': {\n            id: 'rxyYL1-vZysaZgRMzDXNU',\n            type: 'note',\n            content: '<h2> See the button on the top-right corner?</h2><p></p><p>You can click it to get a web link, which you can share with others to collaborate.</p>',\n            links: [\n                'jNo6CHcnaxjK7Bk4e-bAc',\n                'bPRss4q2Tvzn_ea1TY4Wr',\n            ],\n            parent: null,\n            children: [],\n            identifier: null,\n            literature: null,\n            x: 1158,\n            y: 101,\n            w: 366.0079,\n            currentX: 1158,\n            currentY: 101,\n            currentWidth: 366.0079,\n            currentHeight: 68,\n            h: 72,\n        },\n        'n7FUs3oUm4M1FZC-uHzsy': {\n            id: 'n7FUs3oUm4M1FZC-uHzsy',\n            type: 'note',\n            content: '<p><strong>Collaborative editing: </strong>You can edit this document together with other people over the internet.</p>',\n            links: [],\n            parent: 'jPkhyrgf3HOvPALhbfWYj',\n            children: [\n                '3nj7Xpr-AdGt3rKLomiK5',\n            ],\n            identifier: null,\n            literature: null,\n            x: 1158,\n            y: 302,\n            w: 366.0079,\n            currentX: 1158,\n            currentY: 302,\n            currentWidth: 366.0079,\n            currentHeight: 34,\n        },\n        '3nj7Xpr-AdGt3rKLomiK5': {\n            id: '3nj7Xpr-AdGt3rKLomiK5',\n            type: 'note',\n            content: \"<p><strong>Distributed:</strong> There's no central server that stores your data. Each collaborator holds their own copy, and they directly communicate with each other to keep in sync.</p>\",\n            links: [\n                'CsKDxvFhIxKDk_m6Bj8Dh',\n                'NBLwCo0fXhOXI6DGjqtWU',\n            ],\n            parent: 'n7FUs3oUm4M1FZC-uHzsy',\n            children: [\n                'EIB7xARz2ceZcpBkE940d',\n            ],\n            identifier: null,\n            literature: null,\n            x: 1158,\n            y: 341,\n            w: 366.0079,\n            currentX: 1158,\n            currentY: 341,\n            currentWidth: 366.0079,\n            currentHeight: 48,\n        },\n        EIB7xARz2ceZcpBkE940d: {\n            id: 'EIB7xARz2ceZcpBkE940d',\n            type: 'note',\n            content: \"<p><strong>Offline-first:</strong> Because each person has their own copy, you don't need to be online to edit this file. The updates you made will be sent to your collaborators the next time you are all online.</p>\",\n            links: [\n                'DTZkgJWGKYriyalyLJfZx',\n            ],\n            parent: '3nj7Xpr-AdGt3rKLomiK5',\n            children: [],\n            identifier: null,\n            literature: null,\n            x: 1158,\n            y: 394,\n            w: 366.0079,\n            currentX: 1158,\n            currentY: 394,\n            currentWidth: 366.0079,\n            currentHeight: 48,\n        },\n        anvYLObXrGTWIk8T3R2rq: {\n            id: 'anvYLObXrGTWIk8T3R2rq',\n            type: 'note',\n            content: '<h3>Intrigue uses SyncedStore and Yjs to keep you in sync.</h3><p></p><p>Under the hood, they use algorithms called CRDTs to ensure that all edits are merged correctly, even if made offline.</p>',\n            links: [\n                'CsKDxvFhIxKDk_m6Bj8Dh',\n                'DTZkgJWGKYriyalyLJfZx',\n            ],\n            parent: null,\n            children: [\n                '8gRuWiQvD7HjW1v8PirRZ',\n            ],\n            identifier: null,\n            literature: null,\n            x: 921,\n            y: 546,\n            w: 383.00790000000006,\n            currentX: 921,\n            currentY: 546,\n            currentWidth: 383.00790000000006,\n            currentHeight: 64,\n            h: 68,\n        },\n        '8gRuWiQvD7HjW1v8PirRZ': {\n            id: '8gRuWiQvD7HjW1v8PirRZ',\n            type: 'reference',\n            content: '<p><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://yjs.dev\">https://yjs.dev</a></p>',\n            links: [],\n            parent: 'anvYLObXrGTWIk8T3R2rq',\n            children: [\n                'eGL9rPJ6hhTOecmHN1IPE',\n            ],\n            identifier: 'https://yjs.dev/',\n            literature: null,\n            x: 921,\n            y: 615,\n            w: 383.00790000000006,\n            currentX: 921,\n            currentY: 615,\n            currentWidth: 383.00790000000006,\n            currentHeight: 48,\n            referenceType: 'url',\n            title: 'Yjs Shared Editing',\n            author: [\n                {\n                    family: 'Web link',\n                },\n            ],\n            record: {\n                title: 'Yjs Shared Editing',\n                author: [\n                    {\n                        family: 'Web link',\n                    },\n                ],\n                identifier: 'https://yjs.dev/',\n            },\n        },\n        eGL9rPJ6hhTOecmHN1IPE: {\n            id: 'eGL9rPJ6hhTOecmHN1IPE',\n            type: 'reference',\n            content: '<p><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://github.com/yousefed/SyncedStore\">https://github.com/yousefed/SyncedStore</a></p>',\n            links: [],\n            parent: '8gRuWiQvD7HjW1v8PirRZ',\n            children: [\n                'cjmp78kq4aeWsiDHNm3be',\n            ],\n            identifier: 'https://github.com/yousefed/SyncedStore',\n            literature: null,\n            x: 921,\n            y: 668,\n            w: 383.00790000000006,\n            currentX: 921,\n            currentY: 668,\n            currentWidth: 383.00790000000006,\n            currentHeight: 75,\n            referenceType: 'url',\n            title: 'GitHub - YousefED/SyncedStore: SyncedStore CRDT is an easy-to-use library for building live, collaborative applications that sync automatically.',\n            author: [\n                {\n                    family: 'Web link',\n                },\n            ],\n            record: {\n                title: 'GitHub - YousefED/SyncedStore: SyncedStore CRDT is an easy-to-use library for building live, collaborative applications that sync automatically.',\n                author: [\n                    {\n                        family: 'Web link',\n                    },\n                ],\n                identifier: 'https://github.com/yousefed/SyncedStore',\n            },\n        },\n        cjmp78kq4aeWsiDHNm3be: {\n            id: 'cjmp78kq4aeWsiDHNm3be',\n            type: 'reference',\n            content: '<p><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://crdt.tech\">https://crdt.tech</a></p>',\n            links: [],\n            parent: 'eGL9rPJ6hhTOecmHN1IPE',\n            children: [\n                '0gI1kCXM_izYBG9FjX-7T',\n            ],\n            identifier: 'https://crdt.tech/',\n            literature: null,\n            x: 921,\n            y: 748,\n            w: 383.00790000000006,\n            currentX: 921,\n            currentY: 748,\n            currentWidth: 383.00790000000006,\n            currentHeight: 48,\n            referenceType: 'url',\n            title: 'About CRDTs  Conflict-free Replicated Data Types',\n            author: [\n                {\n                    family: 'Web link',\n                },\n            ],\n            record: {\n                title: 'About CRDTs  Conflict-free Replicated Data Types',\n                author: [\n                    {\n                        family: 'Web link',\n                    },\n                ],\n                identifier: 'https://crdt.tech/',\n            },\n        },\n        '0gI1kCXM_izYBG9FjX-7T': {\n            id: '0gI1kCXM_izYBG9FjX-7T',\n            type: 'reference',\n            content: '<p><a target=\"_blank\" rel=\"noopener noreferrer nofollow\" href=\"https://www.inkandswitch.com/local-first/\">https://www.inkandswitch.com/local-first/</a></p>',\n            links: [],\n            parent: 'cjmp78kq4aeWsiDHNm3be',\n            children: [],\n            identifier: 'https://www.inkandswitch.com/local-first/',\n            literature: null,\n            x: 921,\n            y: 801,\n            w: 383.00790000000006,\n            currentX: 921,\n            currentY: 801,\n            currentWidth: 383.00790000000006,\n            currentHeight: 48,\n            referenceType: 'url',\n            title: 'Local-first software: You own your data, in spite of the cloud',\n            author: [\n                {\n                    family: 'Web link',\n                },\n            ],\n            record: {\n                title: 'Local-first software: You own your data, in spite of the cloud',\n                author: [\n                    {\n                        family: 'Web link',\n                    },\n                ],\n                identifier: 'https://www.inkandswitch.com/local-first/',\n            },\n        },\n        KsZsnbXyRuVqf3FKtK0BA: {\n            id: 'KsZsnbXyRuVqf3FKtK0BA',\n            type: 'note',\n            content: '<p>This does mean that <strong>someone has to have the file open</strong> when a new person logs on, in order for the new person to get the file content.</p>',\n            links: [\n                'NBLwCo0fXhOXI6DGjqtWU',\n            ],\n            parent: null,\n            children: [],\n            identifier: null,\n            literature: null,\n            x: 794,\n            y: 419,\n            w: 208.0079,\n            currentX: 794,\n            currentY: 419,\n            currentWidth: 208.0079,\n            currentHeight: 62,\n            h: 66,\n        },\n        '7OSkqze_9QwSvHGy_F85x': {\n            id: '7OSkqze_9QwSvHGy_F85x',\n            type: 'note',\n            content: '<p>Snap me to the note above!</p>',\n            links: [],\n            parent: null,\n            children: [],\n            identifier: null,\n            literature: null,\n            x: 287,\n            y: 308,\n            w: 200,\n            currentX: 287,\n            currentY: 308,\n            currentWidth: 200,\n            currentHeight: 20,\n        },\n    },\n    fragment: '',\n};\n\nexport default tutorialData;\n","<template>\n    <div class=\"titlebar-container\">\n        <a-row v-if=\"electron\" class=\"window noselect\" justify=\"center\" align=\"center\">\n            <a-col :span=\"8\">\n                <a-button-group style=\"margin-left: 5rem;\">\n                    <a-button type=\"text\" size=\"mini\"\n                        :disabled=\"!document.canUndo()\"\n                        @click=\"document.undo()\"\n                    >\n                        <template #icon><icon-undo /></template>\n                    </a-button>\n\n                    <a-button type=\"text\" size=\"mini\"\n                        :disabled=\"!document.canRedo()\"\n                        @click=\"document.redo()\"\n                    >\n                        <template #icon><icon-redo /></template>\n                    </a-button>\n                </a-button-group>\n            </a-col>\n            <a-col :span=\"8\" align=\"center\">\n                <b>{{fileName}}</b>\n            </a-col>\n            <a-col :span=\"8\" align=\"right\" style=\"padding-right: 0.5rem\">\n                <CopyButton size=\"mini\" :text=\"shareLink\">Share</CopyButton>\n            </a-col>\n        </a-row>\n\n        <a-row v-else class=\"browser noselect\" justify=\"center\" align=\"center\">\n            <a-col :span=\"8\">\n                <a-button-group style=\"margin-left: 1rem;\">\n                    <a-button type=\"text\" size=\"small\"\n                        :disabled=\"!document.canUndo()\"\n                        @click=\"document.undo()\"\n                    >\n                        <template #icon><icon-undo /></template>\n                    </a-button>\n\n                    <a-button type=\"text\" size=\"small\"\n                        :disabled=\"!document.canRedo()\"\n                        @click=\"document.redo()\"\n                    >\n                        <template #icon><icon-redo /></template>\n                    </a-button>\n                </a-button-group>\n            </a-col>\n            <a-col :span=\"8\" align=\"center\">\n                To save this document, bookmark this page or copy the share link \n            </a-col>\n            <a-col :span=\"8\" align=\"right\" style=\"padding-right: 0.5rem\">\n                <CopyButton size=\"small\" :text=\"shareLink\">Share</CopyButton>\n            </a-col>\n        </a-row>\n    </div>\n</template>\n\n<script>\nimport isElectron from 'is-electron';\nimport CopyButton from './CopyButton.vue';\n\nexport default {\n    name: 'TitleBar',\n    inject: ['store', 'document', 'selection', 'filePath'],\n\n    components: {\n        CopyButton,\n    },\n\n    data() {\n        return {\n            electron: isElectron(),\n            newFile: false,\n        };\n    },\n\n    mounted() {\n        const queryString = window.location.search;\n        const urlParams = new URLSearchParams(queryString);\n        this.newFile = !urlParams.get('document');\n\n        this.document.on('synced', () => {\n            if (this.newFile) {\n                const url = new URL(window.location.href);\n                url.searchParams.set('document', this.store.value.metadata.id);\n                window.history.replaceState(null, null, url);\n            }\n        });\n    },\n\n    computed: {\n        fileName() {\n            // eslint-disable-next-line global-require\n            const { basename } = require('path');\n            return this.filePath.value ? basename(this.filePath.value) : 'Untitled';\n        },\n\n        shareLink() {\n            return `https://intrigue-app.github.io/?document=${this.store.value.metadata.id}`;\n        },\n    },\n};\n</script>\n\n<style scoped>\n.window {\n    position: fixed;\n    width: 100%;\n    height: 2rem;\n    -webkit-app-region: drag;\n    z-index: 10000;\n    background: linear-gradient(var(--background) 10%, transparent 100%)\n}\n\n.browser {\n    position: fixed;\n    width: 100%;\n    height: 2rem;\n    z-index: 10000;\n}\n</style>\n","<template>\n    <a-button\n        :type=\"type\"\n        :shape=\"shape\"\n        :size=\"size\"\n        :status=\"status\"\n        :disabled=\"copied\"\n        @click=\"copy\"\n    >\n        <slot v-if=\"!copied\"/>\n        <span v-else>Copied!</span>\n    </a-button>\n</template>\n\n<script>\nimport ultralightCopy from 'copy-to-clipboard-ultralight';\n\nexport default {\n    name: 'CopyButton',\n    props: {\n        size: String,\n        shape: String,\n        type: String,\n        status: String,\n        text: String,\n    },\n\n    data() {\n        return {\n            copied: false,\n            timer: null,\n        };\n    },\n\n    methods: {\n        copy() {\n            if (ultralightCopy(this.text)) {\n                this.copied = true;\n                if (this.timer) clearTimeout(this.timer);\n                this.timer = setTimeout(() => {\n                    this.copied = false;\n                }, 1000);\n            } else {\n                this.$message.error('Error copying to clipboard!');\n            }\n        },\n    },\n};\n</script>\n","import { render } from \"./CopyButton.vue?vue&type=template&id=11d5bf2b\"\nimport script from \"./CopyButton.vue?vue&type=script&lang=js\"\nexport * from \"./CopyButton.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./TitleBar.vue?vue&type=template&id=4f42f7a4&scoped=true\"\nimport script from \"./TitleBar.vue?vue&type=script&lang=js\"\nexport * from \"./TitleBar.vue?vue&type=script&lang=js\"\n\nimport \"./TitleBar.vue?vue&type=style&index=0&id=4f42f7a4&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4f42f7a4\"]])\n\nexport default __exports__","<template>\n    <div style=\"width: 100%; height: 100%;\">\n        <vue-infinite-viewer\n            class=\"canvas\"\n            ref=\"canvas\"\n            :style=\"{\n                'background-position': `${-x * zoom}px ${-y * zoom}px`,\n                'background-size': `${13 * zoom}px ${13 * zoom}px`,\n                '--resize-handle-height': `${activeNodeHeight}px`,\n            }\"\n            :maxPinchWheel=\"10\"\n            @scroll=\"panCanvas\"\n            @pinch=\"zoomCanvas\"\n            @dblclick=\"newNode\"\n        >\n            <div class=\"viewport\">\n                <IntrigueLink\n                    v-for=\"link in store.value.links\"\n                    :key=\"link.id\"\n                    :ref=\"link.id\"\n                    :source=\"link.source\"\n                    :target=\"link.target\"\n                />\n\n                <IntrigueLink\n                    v-if=\"linking.value\"\n                    :source=\"linking.value\"\n                    target=\"pointer-location\"\n                />\n\n                <IntrigueNode\n                    v-for=\"node in store.value.nodes\"\n                    :key=\"node.id\"\n                    :ref=\"node.id\"\n                    :node=\"node\"\n                    :selected=\"selection.some((t) => t.id === node.id)\"\n                    @click=\"tryLinking(node.id)\"\n                    @dblclick.stop=\"doubleClickNode(node)\"\n                    @update-dimensions=\"$refs.moveable.updateRect\"\n                />\n\n                <div v-for=\"user in document.users\" :key=\"user.id\">\n                    <Cursor\n                        v-if=\"document.localUser.id !== user.id\"\n                        :id=\"user.id\"\n                        :name=\"user.name\"\n                        :x=\"user.cursorX\"\n                        :y=\"user.cursorY\"\n                    />\n                </div>\n\n                <Moveable\n                    ref=\"moveable\"\n                    className=\"moveable\"\n                    :target=\"selection\"\n                    :draggable=\"true\"\n                    :resizable=\"shouldResize\"\n                    :renderDirections=\"['e']\"\n                    @clickGroup=\"cancelSelectionWhenClickEmpty\"\n                    @drag=\"dragNodes\"\n                    @dragGroup=\"dragNodes\"\n                    @dragEnd=\"commitNodePositions\"\n                    @dragGroupEnd=\"commitNodePositions\"\n                    @resize=\"resizeNode\"\n                    @resizeEnd=\"commitNodeSize\"\n                />\n            </div>\n        </vue-infinite-viewer>\n        <VueSelecto\n            ref=\"selecto\"\n            dragContainer=\".canvas\"\n            :selectableTargets=\"['.node.selectable']\"\n            :selectByClick=\"true\"\n            :selectFromInside=\"false\"\n            :toggleContinueSelect=\"['shift']\"\n            :keyContainer=\"window\"\n            :hitRate=\"0\"\n            :ratio=\"0\"\n            @dragStart=\"preventSelectionWhenDragging\"\n            @select=\"selectNode\"\n            @selectEnd=\"commitSelections\"\n        />\n        <svg class=\"links\" id=\"links\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n        />\n    </div>\n</template>\n\n<script>\nimport { defineComponent, computed } from 'vue';\n\nimport { VueInfiniteViewer } from 'vue3-infinite-viewer';\nimport Moveable from 'vue3-moveable';\nimport { VueSelecto } from 'vue3-selecto';\n\nimport { nanoid } from 'nanoid';\n\nimport { NodeTypes } from '@/store';\nimport Keyboard from '@/keyboard';\n\nimport IntrigueNode from '@/components/canvas/Node.vue';\nimport IntrigueLink from '@/components/canvas/Link.vue';\nimport Cursor from '@/components/canvas/Cursor.vue';\n\nexport default defineComponent({\n    name: 'IntrigueCanvas',\n    inject: ['document', 'store', 'state', 'send', 'editing', 'dragging', 'dropping', 'detaching', 'linking'],\n    components: {\n        VueInfiniteViewer,\n        Moveable,\n        VueSelecto,\n        IntrigueNode,\n        IntrigueLink,\n        Cursor,\n    },\n\n    provide() {\n        return {\n            x: computed(() => this.x),\n            y: computed(() => this.y),\n            zoom: computed(() => this.zoom),\n        };\n    },\n\n    data() {\n        return {\n            x: 0,\n            y: 0,\n            zoom: 1,\n            selection: [],\n            keyboard: new Keyboard(),\n        };\n    },\n\n    methods: {\n        // Data editing methods\n\n        newNode(event) {\n            const mapped = this.mapMousePosition(event.clientX, event.clientY);\n            const nodeId = nanoid();\n            this.document.commit('createNode', {\n                id: nodeId,\n                type: NodeTypes.Note,\n                content: '',\n                x: mapped.x - 14,\n                y: mapped.y - 10,\n                w: 200,\n                h: 15,\n            });\n            this.send({\n                type: 'create node',\n                node: nodeId,\n            });\n            // if (Object.keys(this.store.value.nodes).length === 2) {\n            //     const [source, target] = Object.keys(this.store.value.nodes);\n            //     this.document.commit('createLink', { source, target });\n            //     // arrowLine(`[id=\"${nodeIds[0]}\"]`, `[id=\"${nodeIds[1]}\"]`);\n            // }\n        },\n\n        doubleClickNode(node) {\n            this.send({\n                type: 'dblclick node',\n                node: node.id,\n            });\n            // console.log(this.state.value, this.editing.value);\n        },\n\n        deleteNodes(event) {\n            if (this.editing.value) return;\n            const selectedIds = this.selection.map((el) => el.id);\n            console.log(`[Canvas][deleteNodes] ${selectedIds}`);\n            this.selection = [];\n            this.send('delete node');\n            this.document.commit('deleteNodes', selectedIds);\n            // console.log(selectedIds);\n            event.preventDefault();\n        },\n\n        undo(event) {\n            if (this.editing.value === null) {\n                this.document.undo();\n                event.preventDefault();\n            }\n        },\n\n        redo(event) {\n            if (this.editing.value === null) {\n                this.document.redo();\n                event.preventDefault();\n            }\n        },\n\n        // Node wrangling methods (dragging, resizing, selecting, etc)\n        panCanvas(event) {\n            this.x = event.scrollLeft;\n            this.y = event.scrollTop;\n            this.document.updateAwareness('x', this.x);\n            this.document.updateAwareness('y', this.y);\n        },\n\n        zoomCanvas(event) {\n            this.zoom = event.zoom;\n            this.$refs.canvas.setZoom(event.zoom);\n        },\n\n        cancelSelectionWhenClickEmpty(e) {\n            this.$refs.selecto.clickTarget(e.inputEvent, e.inputTarget);\n        },\n\n        sendDragStartMessage(event) {\n            if (!event.events && event.target) {\n                this.send({\n                    type: 'start dragging',\n                    node: event.target.id,\n                });\n            } else if (event.targets) {\n                event.target.classList.add('clickthrough');\n                // console.log(event.target);\n                event.targets.some((target) => {\n                    const rect = target.getBoundingClientRect();\n                    if (\n                        rect.left <= event.clientX\n                        && rect.right >= event.clientX\n                        && rect.top <= event.clientY\n                        && rect.bottom >= event.clientY\n                    ) {\n                        this.send({\n                            type: 'start dragging',\n                            node: target.id,\n                        });\n                        return false;\n                    }\n                    return true;\n                });\n            }\n        },\n\n        dragNodes(event) {\n            this.sendDragStartMessage(event);\n\n            let events;\n            if (!event.events && event.target) {\n                // Dragging only one node\n                events = [event];\n            } else if (event.events) {\n                // Dragging multiple nodes\n                events = event.events;\n            }\n\n            // See if any nodes in the current selection will be detached from parent if moved.\n            const nodes = events.map((e) => this.store.value.nodes[e.target.id]);\n            const nodeIds = events.map((e) => e.target.id);\n            const toDetach = [];\n            nodes.forEach((node) => {\n                if (node.parent && !nodeIds.includes(node.parent)) {\n                    toDetach.push({\n                        source: node.parent,\n                        target: node.id,\n                    });\n                }\n            });\n            if (toDetach.length > 0) {\n                this.send({ type: 'start detaching', detaching: toDetach });\n                const distance = Math.sqrt(\n                    event.dist[0] * event.dist[0] + event.dist[1] * event.dist[1],\n                );\n                // console.log(distance);\n\n                if (distance > 30) {\n                    // Detach these nodes\n                    this.send('detached');\n                    toDetach.forEach((pair) => {\n                        this.document.commit('unsnapNode', pair);\n                    });\n                } else {\n                    return;\n                }\n            }\n\n            // We don't commit here because we don't want to\n            // leave undo history for rapid-firing events.\n            events.forEach((e) => {\n                const node = this.store.value.nodes[e.target.id];\n                if (node.parent) return;\n                this.document.updateNode({\n                    id: e.target.id,\n                    set: {\n                        currentX: e.translate[0],\n                        currentY: e.translate[1],\n                    },\n                });\n            });\n        },\n\n        commitNodePositions(event) {\n            // If dropping has value, then handle that first.\n            // Note that in this case, the action to be commited is snapNode,\n            // not updateNodes\n            if (this.dropping.value) {\n                console.log('[Canvas][commitNodePositions] Dropping', this.dragging.value, 'on', this.dropping.value);\n                this.document.commit('snapNode', {\n                    source: this.dropping.value,\n                    target: this.dragging.value,\n                });\n                this.send('stop dragging');\n            }\n\n            // If we're detaching half-way, then don't commit any position update and just return.\n            if (this.detaching.value.length > 0) {\n                console.log('[Canvas][commitNodePositions] Detaching ended halfway.');\n                this.send('stop detaching');\n                return;\n            }\n\n            // If event.lastEvent exists, then it means that the node moved a little.\n            // Basically, not a \"in-place click\".\n            if (event.lastEvent) {\n                if (event.lastEvent.target) {\n                    event.lastEvent.target.classList.remove('clickthrough');\n                }\n                // Only update the parents, and the descendants will follow.\n                const toUpdate = [];\n                this.selection.forEach((e) => {\n                    const node = this.store.value.nodes[e.id];\n                    if (!node.parent) toUpdate.push(e.id);\n                });\n                this.document.commit('updateNodes', {\n                    id: toUpdate,\n                    by: {\n                        x: event.lastEvent.dist[0],\n                        y: event.lastEvent.dist[1],\n                    },\n                });\n            }\n            this.send('stop dragging');\n        },\n\n        preventSelectionWhenDragging(e) {\n            const { target } = e.inputEvent;\n            if (\n                this.$refs.moveable.isMoveableElement(target)\n                || this.selection.some((t) => t === target || t.contains(target))\n                // || target.matches('.moveable-area')\n                // || target.matches('.moveable-control')\n            ) {\n                e.stop();\n            }\n        },\n\n        tryLinking(nodeId) {\n            if (this.linking.value) {\n                if (nodeId !== this.linking.value) {\n                    console.log(`[Canvas][selectNode] Linking ${this.linking.value} to ${nodeId}`);\n\n                    const linkId = this.document.findLinkByNodeIds(\n                        this.linking.value,\n                        nodeId,\n                    );\n                    if (linkId) {\n                        this.document.commit('removeLink', linkId);\n                    } else {\n                        this.document.commit('createLink', {\n                            source: this.linking.value,\n                            target: nodeId,\n                        });\n                    }\n                }\n            }\n        },\n\n        selectNode(e) {\n            if (this.linking.value && e.selected.length > 0) return;\n            this.send({\n                type: 'update selection',\n                selection: e.selected.map((el) => el.id),\n            });\n        },\n\n        commitSelections(e) {\n            if (e.isDragStart) {\n                e.inputEvent.preventDefault();\n                setTimeout(() => {\n                    this.$refs.moveable.dragStart(e.inputEvent);\n                });\n            }\n            this.selection = e.selected;\n            const selectedIds = e.selected.map((el) => el.id);\n            this.document.updateAwareness('selection', selectedIds);\n            this.send({\n                type: 'done selecting',\n                selection: selectedIds,\n            });\n        },\n\n        resizeNode(event) {\n            // We still need to change the width here, otherwise the resizing is very unresponsive.\n            // TODO: See if we can get around this.\n            const { target } = event;\n            target.style.width = `${event.width}px`;\n            this.document.updateNode({\n                id: event.target.id,\n                set: {\n                    currentWidth: event.width,\n                },\n            });\n        },\n\n        commitNodeSize(event) {\n            if (!event.lastEvent) return;\n            this.document.commit('updateNode', {\n                id: event.target.id,\n                set: {\n                    w: event.lastEvent.width,\n                    h: event.target.offsetHeight,\n                },\n            });\n        },\n\n        // Utility functions\n        mapMousePosition(x, y) {\n            const mappedX = x / this.zoom + this.x;\n            const mappedY = y / this.zoom + this.y;\n            return { x: mappedX, y: mappedY };\n        },\n\n        gatherDescendants(root, includeRoot) {\n            const descendants = includeRoot ? new Set([root.id]) : new Set();\n            root.children.forEach((childId) => {\n                const child = this.store.value.nodes[childId];\n                const childDescendants = this.gatherDescendants(child, true);\n                childDescendants.forEach((descendantId) => {\n                    descendants.add(descendantId);\n                });\n            });\n            return [...descendants];\n        },\n\n        // Event handlers\n        updateCursorPosition(event) {\n            const mapped = this.mapMousePosition(event.clientX, event.clientY);\n            this.document.updateAwareness('cursorX', mapped.x);\n            this.document.updateAwareness('cursorY', mapped.y);\n        },\n\n        startPanning(event) {\n            if (!this.editing) {\n                console.log('[Canvas][startPanning] Space pressed.', event);\n                this.send('space pressed');\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        },\n\n        stopPanning(event) {\n            if (!this.editing) {\n                console.log('[Canvas][startPanning] Space released.', event);\n                this.send('space released');\n                event.preventDefault();\n            }\n        },\n    },\n\n    computed: {\n        activeNodeHeight() {\n            if (this.selection.length > 0) {\n                const node = this.store.value.nodes[this.selection[0].id];\n                if (!node) return 0;\n                if (!node.currentHeight) return this.selection[0].clientHeight;\n                if (node.currentHeight <= 20) {\n                    return node.currentHeight - 8;\n                }\n                return node.currentHeight - 12;\n            }\n            return 0;\n        },\n\n        shouldResize() {\n            if (this.selection.length !== 1) return false;\n            if (!this.store.value.nodes[this.selection[0].id]) return false;\n            if (this.store.value.nodes[this.selection[0].id].parent) return false;\n            return true;\n        },\n    },\n\n    mounted() {\n        // Create handler to update cursor position to remote users.\n        // Don't forget to unregister upon leaving this page!\n        window.addEventListener('mousemove', this.updateCursorPosition);\n        // Register keyboard shortcuts. Need to unregister as well.\n        this.keyboard.on('keydown', 'Space', this.startPanning);\n        this.keyboard.on('keyup', 'Space', this.stopPanning);\n        this.keyboard.on('keydown', 'Backspace', this.deleteNodes);\n        this.keyboard.on('keydown', '$mod+Z', this.undo);\n        this.keyboard.on('keydown', '$mod+Shift+Z', this.redo);\n\n        this.document.on('synced', () => {\n            // Clear selections.\n            this.document.updateAwareness('selection', []);\n        });\n    },\n\n    beforeUnmount() {\n        window.removeEventListener('mousemove', this.updateCursorPosition);\n        this.keyboard.removeListeners();\n    },\n});\n</script>\n\n<style>\n.canvas {\n    position: fixed;\n    width: 100vw;\n    height: 100vh;\n    background: transparent;\n    background-image: radial-gradient(var(--color-neutral-3) 10%, transparent 10%);\n    /* background-size: 15px 15px; */\n    /* background-position: center; */\n}\n\nsvg.links {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    pointer-events: none;\n    /* background: red; */\n}\n</style>\n","import { createKeybindingsHandler } from 'tinykeys';\n\nexport default class Keyboard {\n    constructor() {\n        this.handlers = [];\n    }\n\n    on(event, key, handler) {\n        const options = {};\n        options[key] = handler;\n        const keyBindingHandler = createKeybindingsHandler(options);\n        window.addEventListener(event, keyBindingHandler);\n        this.handlers.push({\n            event,\n            handler: keyBindingHandler,\n        });\n    }\n\n    removeListeners() {\n        this.handlers.forEach((handler) => {\n            window.removeEventListener(handler.event, handler.handler);\n        });\n    }\n}\n","<template>\n    <div\n        class=\"node\"\n        ref=\"node\"\n        :id=\"node.id\"\n        :class=\"{\n            selected: selection.value.includes(node.id),\n            dropping: dropping.value === node.id,\n            noselect: editing.value !== node.id,\n            clickthrough: dragging.value && selection.value.includes(node.id),\n            selectable: !selectedByRemoteUsers,\n            'remote-selected': selectedByRemoteUsers,\n            'snap-top': !node.parent && node.children.length > 0,\n            'snap-middle': node.parent && node.children.length > 0,\n            'snap-bottom': node.parent && node.children.length === 0,\n            reference: isReference,\n        }\"\n        :style=\"styles\"\n        :color=\"isReference ? 'primary' : 'white'\"\n        :gradient=\"isReference\"\n        @mouseenter=\"onMouseEnter\"\n        @focusin=\"onMouseEnter\"\n        @mouseleave=\"onMouseLeave\"\n        @focusout=\"onMouseLeave\"\n    >\n        <note\n            v-if=\"isNote\"\n            :id=\"node.id\"\n            :content=\"node.content\"\n            :editing=\"editing.value === node.id\"\n            @change=\"parseNoteContent\"\n        />\n\n        <reference\n            v-if=\"isReference\"\n            :id=\"node.id\"\n            :type=\"node.referenceType\"\n            :identifier=\"node.identifier\"\n            :title=\"node.title\"\n            :author=\"node.author\"\n        />\n\n        <button class=\"link-button\" v-if=\"showLinkButton\"\n            @mousedown.stop\n            @mouseup.stop\n            @dblclick.stop\n            @click.stop=\"onLinkButtonClick\"\n        >\n            <icon-link/>\n        </button>\n    </div>\n</template>\n\n<script>\nimport { defineComponent } from 'vue';\nimport { NodeTypes } from '@/store';\n\nimport Note from '@/components/canvas/node/Note.vue';\nimport Reference from '@/components/canvas/node/Reference.vue';\nimport { extractIdentifier, fetchLiteratureInfo } from '@/literature';\n\nexport default defineComponent({\n    name: 'IntrigueNode',\n    inject: ['document', 'store', 'state', 'send', 'editing', 'dragging', 'dropping', 'selection'],\n    components: {\n        Note,\n        Reference,\n    },\n    props: {\n        node: {\n            type: Object,\n            required: true,\n        },\n        selected: {\n            type: Boolean,\n            default: false,\n        },\n    },\n\n    data() {\n        return {\n            x: this.node.x,\n            y: this.node.y,\n            w: this.node.w,\n            h: this.node.h,\n            parent: null,\n            // content: this.node.content,\n        };\n    },\n\n    methods: {\n        onMouseEnter() {\n            this.send({\n                type: 'drop enter',\n                node: this.node.id,\n            });\n        },\n\n        onMouseLeave() {\n            this.send({\n                type: 'drop leave',\n                node: this.node.id,\n            });\n        },\n\n        onLinkButtonClick() {\n            this.send('start linking', { node: this.node.id });\n        },\n\n        observeParent() {\n            this.parentWatchers = [\n                this.$watch('parent.currentX', this.updateDimensionsFromParent),\n                this.$watch('parent.currentY', this.updateDimensionsFromParent),\n                this.$watch('parent.currentWidth', this.updateDimensionsFromParent),\n                this.$watch('parent.currentHeight', this.updateDimensionsFromParent),\n            ];\n        },\n\n        updateDimensions() {\n            if (!this.$refs.node) return;\n            const height = this.$refs.node.clientHeight;\n            this.document.updateNode({\n                id: this.node.id,\n                set: {\n                    currentHeight: height,\n                },\n            });\n            this.$emit('update-dimensions');\n        },\n\n        updateDimensionsFromParent() {\n            // console.log('Updating dimensions from parent', this.node.id);\n            this.document.updateNode({\n                id: this.node.id,\n                set: {\n                    x: this.parent.currentX,\n                    y: this.parent.currentY + this.parent.currentHeight + 5,\n                    w: this.parent.currentWidth,\n                    currentX: this.parent.currentX,\n                    currentY: this.parent.currentY + this.parent.currentHeight + 5,\n                    currentWidth: this.parent.currentWidth,\n                    currentHeight: this.$refs.node.clientHeight,\n                },\n            });\n        },\n\n        parseNoteContent(content) {\n            const identifier = extractIdentifier(content);\n            if (identifier) {\n                console.log(`[Node][parseNoteContent@extractIdentifier] ${JSON.stringify(identifier)}`);\n                this.document.commit('updateNode', {\n                    id: this.node.id,\n                    set: {\n                        type: NodeTypes.Reference,\n                        identifier: identifier.identifier,\n                        referenceType: identifier.type,\n                    },\n                });\n\n                if (identifier.type === 'zotero') {\n                    this.document.commit('updateNode', {\n                        id: this.node.id,\n                        set: {\n                            title: identifier.title,\n                            author: identifier.author,\n                            identifier: identifier.identifier,\n                            record: identifier,\n                        },\n                    });\n                } else if (identifier.type === 'zotero-link') {\n                    this.document.commit('updateNode', {\n                        id: this.node.id,\n                        set: {\n                            title: undefined,\n                            author: undefined,\n                            identifier: identifier.identifier,\n                            record: identifier,\n                        },\n                    });\n                } else {\n                    fetchLiteratureInfo(identifier.type, identifier.identifier).then((info) => {\n                        console.log(`[Node][parseNoteContent@fetchLiteratureInfo] ${info}`);\n                        this.document.commit('updateNode', {\n                            id: this.node.id,\n                            set: {\n                                title: info.title,\n                                author: info.author,\n                                identifier: info.identifier\n                                    ? info.identifier : identifier.identifier,\n                                record: info,\n                            },\n                        });\n                    });\n                }\n            }\n        },\n    },\n\n    mounted() {\n        // console.log('Mounted', this.node.id);\n        this.observer = new ResizeObserver(this.updateDimensions);\n        this.observer.observe(this.$refs.node);\n\n        this.document.updateNode({\n            id: this.node.id,\n            set: {\n                currentX: this.node.x,\n                currentY: this.node.y,\n                currentHeight: this.node.h ? this.node.h : this.$refs.node.clientHeight,\n            },\n        });\n\n        if (this.node.parent) {\n            this.parent = this.store.value.nodes[this.node.parent];\n            this.observeParent();\n            this.updateDimensionsFromParent();\n        }\n    },\n\n    breforeUnmount() {\n        console.log('[Node][breforeUnmount] Unmounting', this.node.id);\n        this.observer.disconnect();\n        this.parentWatchers.forEach((removeParentWatcher) => removeParentWatcher());\n    },\n\n    deactivated() {\n        console.log('[Node][deactivated] Deactivated', this.node.id);\n        this.observer.disconnect();\n        this.parentWatchers.forEach((removeParentWatcher) => removeParentWatcher());\n    },\n\n    computed: {\n        styles() {\n            return {\n                width: `${this.w}px`,\n                transform: `translate(${this.x}px, ${this.y}px)`,\n                '--bg-color': 'rgb(250, 248, 229)',\n                '--border-color': 'rgb(233, 183, 109)',\n                'z-index': this.index,\n            };\n        },\n\n        selectedByRemoteUsers() {\n            // console.log(this.document.users);\n            let selected = false;\n            Object.entries(this.document.users).some(([userId, userData]) => {\n                if (userId === this.document.userId) return false;\n                if (userData.selection.includes(this.node.id)) {\n                    selected = true;\n                    return true;\n                }\n                return false;\n            });\n            return selected;\n        },\n\n        isNote() {\n            return this.node.type === NodeTypes.Note;\n        },\n\n        isReference() {\n            return this.node.type === NodeTypes.Reference;\n        },\n\n        index() {\n            let index = 0;\n            let current = this.node;\n            while (current.parent) {\n                index += 1;\n                current = this.store.value.nodes[current.parent];\n            }\n            if (this.selection.value.includes(this.node.id)) {\n                return index + 2;\n            }\n            return index;\n        },\n\n        showLinkButton() {\n            if (this.selection.value.length !== 1) return false;\n            if (!this.selection.value.includes(this.node.id)) return false;\n            return true;\n        },\n    },\n\n    watch: {\n        // eslint-disable-next-line func-names\n        'node.currentX': function () {\n            // console.log('node.currentX changed', this.node.id);\n            this.x = this.node.currentX;\n        },\n        // eslint-disable-next-line func-names\n        'node.currentY': function () {\n            this.y = this.node.currentY;\n        },\n        // eslint-disable-next-line func-names\n        'node.currentWidth': function () {\n            this.w = this.node.currentWidth;\n        },\n        // eslint-disable-next-line func-names\n        'node.x': function () {\n            // console.log('node.x changed', this.node.id);\n            this.document.updateNode({\n                id: this.node.id,\n                set: { currentX: this.node.x },\n            });\n        },\n        // eslint-disable-next-line func-names\n        'node.y': function () {\n            this.document.updateNode({\n                id: this.node.id,\n                set: { currentY: this.node.y },\n            });\n        },\n        // eslint-disable-next-line func-names\n        'node.w': function () {\n            this.document.updateNode({\n                id: this.node.id,\n                set: { currentWidth: this.node.w },\n            });\n        },\n        // eslint-disable-next-line func-names\n        'node.parent': function () {\n            if (this.node.parent) {\n                this.parent = this.store.value.nodes[this.node.parent];\n                this.observeParent();\n                this.updateDimensionsFromParent();\n            } else {\n                this.parent = null;\n                this.parentWatchers.forEach((removeParentWatcher) => removeParentWatcher());\n                this.parentWatchers = [];\n            }\n        },\n    },\n});\n</script>\n\n<style>\n.node {\n    --node-corner: 0.7rem;\n    position: absolute;\n    top: 0;\n    left: 0;\n\n    font-size: 12px;\n\n    border-radius: var(--node-corner);\n    padding: 0.2rem 0.5rem;\n    margin: -1px;\n    background: rgb(250, 248, 229);\n    border: 1px solid rgb(233, 183, 109);\n\n    word-wrap: break-word;\n    /* background: var(--bg-color); */\n    cursor: text;\n    z-index: 1;\n}\n\n.link-button {\n    position: absolute;\n    /* top: calc(50% - 0.5rem); */\n    top: -0.9rem;\n    left: calc(100% - 0.1rem);\n    padding: 0.1rem;\n    padding-left: 0.2rem;\n    padding-right: 0.2rem;\n    border-radius: var(--node-corner);\n    border: 0px transparent;\n    background: rgb(255, 112, 143);\n    color: white;\n    cursor: pointer;\n    z-index: 100 !important;\n}\n\n.link-button:hover {\n    background: rgb(255, 137, 163);\n}\n\n.link-button:active {\n    background: rgb(255, 112, 143);\n}\n\n.reference {\n    background: rgb(203, 227, 250);\n    border: 1px solid rgb(91, 169, 247);\n}\n\n.selected {\n    margin: -2px;\n    border: 2px solid;\n    border-color: rgb(255, 112, 143) !important;\n}\n\n.snap-top {\n    border-radius: var(--node-corner) var(--node-corner) 0 0;\n}\n\n.snap-middle {\n    border-radius: 0;\n}\n\n.snap-bottom {\n    border-radius: 0 0 var(--node-corner) var(--node-corner);\n}\n\n.noselect {\n    -webkit-touch-callout: none; /* iOS Safari */\n    -webkit-user-select: none; /* Safari */\n    -khtml-user-select: none; /* Konqueror HTML */\n    -moz-user-select: none; /* Old versions of Firefox */\n    -ms-user-select: none; /* Internet Explorer/Edge */\n    user-select: none; /* Non-prefixed version, currently\n                                  supported by Chrome, Edge, Opera and Firefox */\n}\n\n.node.noselect {\n    cursor: pointer;\n}\n\n.content {\n    padding: 0.4rem;\n    padding-right: 1rem;\n}\n\n.dropping {\n    margin: -2px;\n    border-width: 2px;\n    z-index: 0;\n}\n\n.remote-selected {\n    margin: -2px;\n    border: 2px solid;\n    border-color: gray !important;\n    pointer-events: none;\n}\n\n.moveable-line {\n    background: transparent !important;\n}\n\n.moveable-control.moveable-origin {\n    border-color: transparent !important;\n    background: transparent !important;\n}\n\n.moveable-control {\n    width: 3.5px !important;\n    height: var(--resize-handle-height) !important;\n    background: transparent !important;\n    margin-top: calc(var(--resize-handle-height) / -2) !important;\n    margin-left: -9px !important;\n    border-radius: 0px !important;\n    border-left: 1px solid rgba(0, 0, 0, 0.15) !important;\n    border-right: 1px solid rgba(0, 0, 0, 0.15) !important;\n    border-top: 0px solid transparent !important;\n    border-bottom: 0px solid transparent !important;\n}\n\n.clickthrough {\n    pointer-events: none;\n}\n</style>\n","<template>\n    <div class=\"note\" ref=\"note\">\n        <editor-content :editor=\"editor\" />\n    </div>\n</template>\n\n<script>\nimport { defineComponent } from 'vue';\nimport { Editor, EditorContent } from '@tiptap/vue-3';\nimport StarterKit from '@tiptap/starter-kit';\nimport Highlight from '@tiptap/extension-highlight';\nimport Link from '@tiptap/extension-link';\n\nexport default defineComponent({\n    name: 'IntrigueNote',\n    inject: ['document', 'store', 'state', 'send'],\n    components: {\n        EditorContent,\n    },\n    props: {\n        id: String,\n        content: String,\n        editing: Boolean,\n    },\n\n    data() {\n        return {\n            editor: null,\n        };\n    },\n\n    mounted() {\n        this.editor = new Editor({\n            content: this.content,\n            extensions: [\n                StarterKit,\n                Highlight,\n                Link.configure({\n                    protocols: ['zotero'],\n                }),\n            ],\n            autofocus: this.editing,\n            editable: this.editing,\n        });\n\n        this.editor.on('blur', this.onEditorBlur);\n    },\n\n    beforeUnmount() {\n        this.editor.destroy();\n    },\n\n    methods: {\n        onEditorBlur() {\n            this.send('editor blur');\n            if (this.editor.getHTML() === '<p></p>') {\n                this.document.deleteNode(this.id);\n            } else {\n                this.document.commit('updateNode', {\n                    id: this.id,\n                    set: {\n                        content: this.editor.getHTML(),\n                    },\n                });\n                this.$emit('change', this.editor.getText());\n            }\n        },\n    },\n\n    watch: {\n        content() {\n            this.editor.commands.setContent(this.content);\n        },\n\n        editing() {\n            this.editor.setEditable(this.editing);\n            if (this.editing) {\n                console.log(`[Note][watch@editing] Editing: ${this.editing}, ${this.id}`);\n                this.editor.commands.focus('end');\n            } else {\n                this.editor.commands.blur();\n            }\n        },\n    },\n});\n</script>\n\n<style>\n.ProseMirror {\n    outline: none;\n    outline-style: none;\n    box-shadow: none;\n    border-color: transparent;\n}\n\n.ProseMirror * {\n    margin-block-start: 0.2rem;\n    margin-block-end: 0.2rem;\n    margin: 0px;\n}\n\n.ProseMirror h1,\nh2,\nh3 {\n    margin-block-start: 0.5rem;\n    margin: 0px;\n}\n\n.ProseMirror ul {\n    padding-inline-start: 1.2rem;\n}\n\n.ProseMirror p.is-editor-empty:first-child::before {\n    content: attr(data-placeholder);\n    float: left;\n    /* color: #adb5bd; */\n    color: var(--va-gray);\n    pointer-events: none;\n    height: 0;\n}\n</style>\n","import { render } from \"./Note.vue?vue&type=template&id=59589eac\"\nimport script from \"./Note.vue?vue&type=script&lang=js\"\nexport * from \"./Note.vue?vue&type=script&lang=js\"\n\nimport \"./Note.vue?vue&type=style&index=0&id=59589eac&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div class=\"reference-content\" ref=\"reference\" @dblclick.stop.prevent=\"showFullText\">\n        <span class=\"title\"> {{ title ? title : 'Fetching title...' }} </span> <br />\n        <span class=\"authors\">\n            {{ author ? formatAuthors(author) : 'Fetching authors...' }}\n        </span>  <br />\n        <span class=\"identifier\"> {{ identifier ? identifier : '' }} </span>\n    </div>\n</template>\n\n<script>\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n    name: 'IntrigueReference',\n    inject: ['document', 'store', 'state', 'send'],\n    components: {},\n    props: {\n        id: String,\n        type: String,\n        title: String,\n        author: String,\n        identifier: String,\n    },\n\n    methods: {\n        formatAuthors(authors) {\n            let authorsString = '';\n            authors.forEach((author, i) => {\n                authorsString += author.family;\n                if (i === authors.length - 2) {\n                    authorsString += authors.length === 2 ? ' and ' : ', and ';\n                } else if (i < authors.length - 2) {\n                    authorsString += ', ';\n                }\n            });\n            return authorsString;\n        },\n\n        showFullText() {\n            if (this.type === 'zotero' || this.type === 'zotero-link') {\n                window.open(this.identifier);\n            } else if (this.type === 'doi') {\n                window.open(`https://sci-hub.se/${this.data.identifier}`);\n            } else if (this.type === 'isbn') {\n                window.open(`http://libgen.rs/search.php?req=${this.data.identifier}`);\n            } else if (this.type === 'url') {\n                window.open(this.identifier);\n            }\n        },\n    },\n});\n</script>\n\n<style scoped>\n.title {\n    font-weight: bold;\n}\n\n.authors {\n    font-weight: normal;\n}\n\n.identifier {\n    font-weight: normal;\n    font-style: italic;\n}\n</style>\n","import { render } from \"./Reference.vue?vue&type=template&id=8d4a73d4&scoped=true\"\nimport script from \"./Reference.vue?vue&type=script&lang=js\"\nexport * from \"./Reference.vue?vue&type=script&lang=js\"\n\nimport \"./Reference.vue?vue&type=style&index=0&id=8d4a73d4&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8d4a73d4\"]])\n\nexport default __exports__","import * as linkify from 'linkifyjs';\n\nimport doi from 'identifiers-doi';\nimport Cite from 'citation-js';\nimport axios from 'axios';\n\nexport function extractIsbn(subject) {\n    // Checks for ISBN-10 or ISBN-13 format\n    // eslint-disable-next-line operator-linebreak\n    const regex =\n        /^(?:ISBN(?:-1[03])?:? )?(?=[0-9X]{10}$|(?=(?:[0-9]+[- ]){3})[- 0-9X]{13}$|97[89][0-9]{10}$|(?=(?:[0-9]+[- ]){4})[- 0-9]{17}$)(?:97[89][- ]?)?[0-9]{1,5}[- ]?[0-9]+[- ]?[0-9]+[- ]?[0-9X]$/;\n\n    if (regex.test(subject)) {\n        // Remove non ISBN digits, then split into an array\n        const chars = subject.replace(/[- ]|^ISBN(?:-1[03])?:?/g, '').split('');\n        // Remove the final ISBN digit from `chars`, and assign it to `last`\n        const last = chars.pop();\n        let sum = 0;\n        let check;\n        let i;\n\n        if (chars.length === 9) {\n            // Compute the ISBN-10 check digit\n            chars.reverse();\n            for (i = 0; i < chars.length; i += 1) {\n                sum += (i + 2) * parseInt(chars[i], 10);\n            }\n            check = 11 - (sum % 11);\n            if (check === 10) {\n                check = 'X';\n            } else if (check === 11) {\n                check = '0';\n            }\n        } else {\n            // Compute the ISBN-13 check digit\n            for (i = 0; i < chars.length; i += 1) {\n                sum += ((i % 2) * 2 + 1) * parseInt(chars[i], 10);\n            }\n            check = 10 - (sum % 10);\n            if (check === 10) {\n                check = '0';\n            }\n        }\n\n        if (check === last) {\n            const final = subject.match(regex)[0];\n            return final;\n        }\n    }\n    return false;\n}\n\nexport function extractIdentifier(content) {\n    // Check ISBN\n    const isbnString = extractIsbn(content);\n    if (isbnString && isbnString === content.trim()) {\n        return {\n            type: 'isbn',\n            identifier: isbnString,\n        };\n    }\n    // Check DOI\n    const doiStrings = doi.extract(content);\n    if (doiStrings.length > 0 && doiStrings[0] === content.trim()) {\n        return {\n            type: 'doi',\n            identifier: doiStrings[0],\n        };\n    }\n\n    // Check Zotero Paste\n    try {\n        const data = JSON.parse(content);\n        if (data.source === 'zotero') {\n            return {\n                type: 'zotero',\n                identifier: data.url,\n                ...data,\n            };\n        }\n    } catch (e) {\n        // Do nothing here.\n    }\n\n    // Check Zotero URL\n    const zotero = linkify.find(content, 'url').filter(\n        (item) => item.value.startsWith('zotero://'),\n    );\n    if (zotero.length === 1 && zotero[0].value === content.trim()) {\n        return {\n            type: 'zotero-link',\n            identifier: zotero[0].href,\n        };\n    }\n\n    // Check URL\n    const urls = linkify.find(content, 'url');\n    if (urls.length === 1 && urls[0].value === content.trim()) {\n        return {\n            type: 'url',\n            identifier: urls[0].href,\n        };\n    }\n    return false;\n}\n\nexport function fetchLiteratureInfo(type, identifier) {\n    console.log(`[Literature][fetchLiteratureInfo] type: ${type}, identifier: ${identifier}`);\n    return new Promise((resolve, reject) => {\n        if (type === 'url') {\n            axios.get(identifier).then((data) => {\n                // console.log(data.request);\n                const matches = data.data.match(/<title>(.*?)<\\/title>/);\n                resolve({\n                    title: matches[1],\n                    author: [{ family: 'Web link' }],\n                    identifier: data.request.responseURL,\n                });\n            }).catch((err) => {\n                reject(err);\n            });\n        } else {\n            // Handles both BibTex and DOIs.\n            // eslint-disable-next-line no-new, new-cap\n            new Cite.async(identifier, (data) => {\n                const info = data.data[0];\n                // eslint-disable-next-line no-underscore-dangle\n                delete info._graph;\n                resolve(\n                    JSON.parse(JSON.stringify(info)),\n                );\n            });\n        }\n    });\n}\n","import { render } from \"./Node.vue?vue&type=template&id=1a5a19c9\"\nimport script from \"./Node.vue?vue&type=script&lang=js\"\nexport * from \"./Node.vue?vue&type=script&lang=js\"\n\nimport \"./Node.vue?vue&type=style&index=0&id=1a5a19c9&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <teleport to=\"#links\">\n        <g ref=\"arrow\" style=\"pointer-events: auto\">\n            <path\n                style=\"cursor: pointer\"\n                :d=\"`M ${sx} ${sy} C ${c1x} ${c1y}, ${c2x} ${c2y}, ${ex} ${ey}`\"\n                :stroke=\"color\"\n                :stroke-width=\"arrowHeadSize / 3 * zoom.value\"\n                fill=\"none\"\n            />\n            <polygon\n                :points=\"`0,${-arrowHeadSize * zoom.value} ${arrowHeadSize *\n                2 * zoom.value},0, 0,${arrowHeadSize * zoom.value}`\"\n                :transform=\"`translate(${ex}, ${ey}) rotate(${ae})`\"\n                :fill=\"color\"\n            />\n        </g>\n    </teleport>\n</template>\n\n<script>\n// import { nextTick } from 'vue';\nimport { getBoxToBoxArrow } from 'curved-arrows';\n\nexport default {\n    name: 'IntrigueLink',\n    inject: ['store', 'x', 'y', 'zoom'],\n\n    props: {\n        source: {\n            type: String,\n            required: true,\n        },\n        target: {\n            type: String,\n            required: true,\n        },\n        text: {\n            type: String,\n            default: '',\n        },\n        color: {\n            type: String,\n            default: '#9A9A9B',\n        },\n        arrowHeadSize: {\n            type: Number,\n            default: 4,\n        },\n    },\n\n    data() {\n        const sourceNode = this.store.value.nodes[this.source];\n        const targetNode = this.store.value.nodes[this.target];\n        if (!targetNode) {\n            window.addEventListener('mousemove', this.updateLine);\n        }\n\n        return {\n            sourceNode,\n            targetNode,\n            sx: 0,\n            sy: 0,\n            c1x: 0,\n            c1y: 0,\n            c2x: 0,\n            c2y: 0,\n            ex: 0,\n            ey: 0,\n            ae: 0,\n            as: 0,\n        };\n    },\n\n    mounted() {\n        this.$refs.arrow.addEventListener('click', this.onClick);\n        this.updateLine();\n    },\n\n    beforeUnmount() {\n        window.removeEventListener('mousemove', this.updateLine);\n    },\n\n    methods: {\n        onClick() {\n            console.log('click');\n        },\n\n        updateLine() {\n            const sourceElement = document.querySelector(`[id=\"${this.source}\"]`);\n            const targetElement = document.querySelector(`[id=\"${this.target}\"]`);\n            const sourceBox = this.getBoundingBox(sourceElement, this.sourceNode);\n            const targetBox = this.getBoundingBox(targetElement, this.targetNode);\n\n            const [sx, sy, c1x, c1y, c2x, c2y, ex, ey, ae] = getBoxToBoxArrow(\n                sourceBox.x,\n                sourceBox.y,\n                sourceBox.w,\n                sourceBox.h,\n                targetBox.x,\n                targetBox.y,\n                targetBox.w,\n                targetBox.h,\n                { padEnd: this.arrowHeadSize },\n            );\n\n            this.sx = this.mapX(sx);\n            this.sy = this.mapY(sy);\n            this.c1x = this.mapX(c1x);\n            this.c1y = this.mapY(c1y);\n            this.c2x = this.mapX(c2x);\n            this.c2y = this.mapY(c2y);\n            this.ex = this.mapX(ex);\n            this.ey = this.mapY(ey);\n            this.ae = ae;\n        },\n\n        mapX(value) {\n            return (value - this.x.value) * this.zoom.value;\n        },\n\n        mapY(value) {\n            return (value - this.y.value) * this.zoom.value;\n        },\n\n        getBoundingBox(element, data) {\n            const rect = element.getBoundingClientRect();\n            const cs = getComputedStyle(element);\n            const paddingX = parseFloat(cs.paddingLeft) + parseFloat(cs.paddingRight);\n            // const paddingY = parseFloat(cs.paddingTop) + parseFloat(cs.paddingBottom);\n\n            // const borderX = parseFloat(cs.borderLeftWidth) + parseFloat(cs.borderRightWidth);\n            // const borderY = parseFloat(cs.borderTopWidth) + parseFloat(cs.borderBottomWidth);\n\n            // const elementWidth = element.offsetWidth - paddingX - borderX;\n            // const elementHeight = element.offsetHeight - paddingY - borderY;\n\n            // const centerX = element.offsetLeft + element.offsetWidth / 2;\n            // const centerY = element.offsetTop + element.offsetHeight / 2;\n\n            return {\n                x: data ? data.currentX : rect.x / this.zoom.value + this.x.value,\n                y: data ? data.currentY : rect.y / this.zoom.value + this.y.value,\n                w: data ? data.currentWidth + paddingX : rect.width / this.zoom.value,\n                h: element.offsetHeight - 2,\n            };\n        },\n    },\n\n    watch: {\n        sourceNode: {\n            deep: true,\n            handler() {\n                this.updateLine();\n            },\n        },\n\n        targetNode: {\n            deep: true,\n            handler() {\n                this.updateLine();\n            },\n        },\n\n        x: {\n            deep: true,\n            handler() {\n                this.updateLine();\n            },\n        },\n\n        y: {\n            deep: true,\n            handler() {\n                this.updateLine();\n            },\n        },\n\n        zoom: {\n            deep: true,\n            handler() {\n                this.updateLine(true);\n            },\n        },\n    },\n};\n</script>\n","import { render } from \"./Link.vue?vue&type=template&id=018bda29\"\nimport script from \"./Link.vue?vue&type=script&lang=js\"\nexport * from \"./Link.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div\n        class=\"cursor\"\n        :style=\"{\n            transform: `translate(${x}px, ${y}px)`,\n        }\"\n    >\n        <div class=\"arrow\"></div>\n        <Avatar class=\"avatar\" variant=\"beam\" :name=\"name\" :size=\"20\" />\n    </div>\n</template>\n\n<script>\nimport { defineComponent } from 'vue';\nimport Avatar from 'vue-boring-avatars';\n\nexport default defineComponent({\n    name: 'IntrigueCursor',\n    components: { Avatar },\n    props: {\n        id: String,\n        name: String,\n        x: Number,\n        y: Number,\n    },\n});\n</script>\n\n<style scoped>\n.cursor {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 20px;\n    height: 20px;\n    transition: transform 0.1s linear;\n}\n\n.arrow {\n    width: 20px;\n    height: 24px;\n    background-image: url('~@/assets/cursor.svg');\n    transform: translate(-6px, -2px) rotate(-30deg);\n}\n\n.avatar {\n    transform: translate(4px, -10px);\n    border: 2px solid white;\n    border-radius: 100%;\n    box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.3);\n}\n</style>\n","import { render } from \"./Cursor.vue?vue&type=template&id=de937d60&scoped=true\"\nimport script from \"./Cursor.vue?vue&type=script&lang=js\"\nexport * from \"./Cursor.vue?vue&type=script&lang=js\"\n\nimport \"./Cursor.vue?vue&type=style&index=0&id=de937d60&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-de937d60\"]])\n\nexport default __exports__","import { render } from \"./Canvas.vue?vue&type=template&id=12db3c8e\"\nimport script from \"./Canvas.vue?vue&type=script&lang=js\"\nexport * from \"./Canvas.vue?vue&type=script&lang=js\"\n\nimport \"./Canvas.vue?vue&type=style&index=0&id=12db3c8e&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div id=\"pointer-location\" :style=\"{left: `${x}px`, top: `${y}px`}\"/>\n</template>\n\n<script>\nexport default {\n    name: 'PointerTracker',\n\n    data() {\n        return {\n            x: 0,\n            y: 0,\n        };\n    },\n\n    mounted() {\n        window.addEventListener('mousemove', (event) => {\n            this.x = event.clientX + 2;\n            this.y = event.clientY + 2;\n        });\n    },\n};\n</script>\n\n<style scoped>\n#pointer-location {\n    position: fixed;\n    width: 2px;\n    height: 2px;\n    /* background-color: red; */\n    pointer-events: none;\n}\n</style>\n","import { render } from \"./PointerTracker.vue?vue&type=template&id=0fb01106&scoped=true\"\nimport script from \"./PointerTracker.vue?vue&type=script&lang=js\"\nexport * from \"./PointerTracker.vue?vue&type=script&lang=js\"\n\nimport \"./PointerTracker.vue?vue&type=style&index=0&id=0fb01106&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0fb01106\"]])\n\nexport default __exports__","<template>\n    <a-card class=\"debug-view\">\n        <div>{{currentState}}</div>\n\n        <pre>{{currentContext}}</pre>\n\n        <a-space>\n            <a-button @click=\"showImportModal = true\">Import Data</a-button>\n            <a-button @click=\"exportJSON\">Export Data</a-button>\n        </a-space>\n\n        <a-modal v-model:visible=\"showImportModal\"\n            @ok=\"importJSON\" @cancel=\"jsonData = ''\"\n        >\n            <template #title>\n                Import JSON data\n            </template>\n            <div>\n                <a-textarea v-model=\"jsonData\" placeholder=\"Paste JSON data here\" allow-clear/>\n            </div>\n    </a-modal>\n    </a-card>\n</template>\n\n<script>\nimport { stringify } from 'yaml';\n\nexport default {\n    name: 'IntrigueDebug',\n    inject: ['document', 'state', 'store'],\n\n    data() {\n        return {\n            showImportModal: false,\n            jsonData: '',\n        };\n    },\n\n    methods: {\n        exportJSON() {\n            console.log(JSON.stringify(this.store.value));\n        },\n\n        importJSON() {\n            console.log(this.jsonData);\n            console.log(JSON.parse(this.jsonData));\n            this.document.store = JSON.parse(this.jsonData);\n            this.document.unbindSyncHandler();\n            this.document.updateSyncedData();\n            this.document.unbindCommitHandler = this.document.on('commit', this.document.updateSyncedData.bind(this.document));\n            this.showImportModal = false;\n        },\n    },\n\n    computed: {\n        currentState() {\n            return stringify(this.state.value.value);\n        },\n\n        currentContext() {\n            return stringify(this.state.value.context);\n        },\n    },\n};\n</script>\n\n<style scoped>\n.debug-view{\n    position: fixed;\n    top: 2rem;\n    left: 2rem;\n    max-width: 20rem;\n}\n</style>\n","import { render } from \"./Debug.vue?vue&type=template&id=8a0f0e00&scoped=true\"\nimport script from \"./Debug.vue?vue&type=script&lang=js\"\nexport * from \"./Debug.vue?vue&type=script&lang=js\"\n\nimport \"./Debug.vue?vue&type=style&index=0&id=8a0f0e00&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8a0f0e00\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=fee74c3a\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=fee74c3a&lang=scss\"\n\nimport exportComponent from \"/Users/shauna/Development/intrigue-dev/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue';\nimport ArcoVue from '@arco-design/web-vue';\nimport ArcoVueIcon from '@arco-design/web-vue/es/icon';\nimport '@arco-design/web-vue/dist/arco.css';\n\nimport App from './App.vue';\n\nconst app = createApp(App);\napp.use(ArcoVue);\napp.use(ArcoVueIcon);\napp.mount('#app');\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// expose the module cache\n__webpack_require__.c = __webpack_module_cache__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"js/\" + chunkId + \".\" + {\"798\":\"7430cfdf\",\"916\":\"fe57ca0f\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var inProgress = {};\nvar dataWebpackPrefix = \"intrigue:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkintrigue\"] = self[\"webpackChunkintrigue\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// module cache are used so entry inlining is disabled\n// startup\n// Load entry module and return exports\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(__webpack_require__.s = 6311); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_createVNode","_component_TitleBar","_component_DocumentCanvas","_component_PointerTracker","$data","_createBlock","_component_Debug","key","propByPath","object","path","value","parts","split","limit","length","i","undefined","EventEmitter","constructor","this","events","on","event","callback","push","filter","emit","args","callbacks","forEach","LocalFilePersistence","filePath","doc","fs","debounce","super","timeout","isElectron","readFile","writeFile","access","require","Error","then","data","applyUpdate","Uint8Array","from","catch","storeUpdate","bind","clearTimeout","setTimeout","console","log","encodeStateAsUpdate","enableVueBindings","Vue","SyncedDocument","storeStructure","syncInitialized","store","syncedData","syncedStore","warn","initSync","documentId","users","reactive","metadata","id","nanoid","updateSyncedData","getYjsValue","syncProvider","WebrtcProvider","awareness","handleChanges","userId","setLocalStateField","localUser","initPersistence","saveProvider","IndexeddbPersistence","JSON","parse","stringify","changes","jiff","diff","change","patchInPlace","updateStoreData","close","destroy","updateAwareness","registerAwarenessCallback","awarenessInfo","getStates","values","onlineUsers","Set","offlineUsers","Object","keys","user","add","delete","entries","ReversibleDocument","inverses","undoStack","redoStack","previousTime","captureTimeout","registerInverses","actionA","actionB","commit","action","params","inverseParams","actionFunction","error","currentTime","Date","now","Math","abs","Array","isArray","popStackItem","fromStack","toStack","lastRecord","pop","toStackRecord","reverse","item","inverseAction","undo","redo","canUndo","canRedo","NodeTypes","IntrigueDocument","nodes","links","fragment","remoteSelection","unbindSyncHandler","unbindCommitHandler","createNode","nodeItem","nodeId","node","type","content","parent","children","identifier","literature","x","y","w","currentX","currentY","currentWidth","link","createLink","child","snapNode","createNodes","nodeItems","nodeIds","newLinks","newChildren","pairInfo","deleteNode","removedLinks","unsnappedChildren","linkId","removeLink","childId","unsnapNode","source","target","deleteNodes","updateNode","update","by","originalValue","set","updateNodes","Area","indexOf","childIndex","splice","findLinkByNodeIds","sourceId","targetId","finds","ViewingState","initial","states","Idle","actions","TitleEditing","Panning","Selecting","Dragging","Dropping","Detaching","detached","Linking","EditingState","Editing","ArrangingState","Selected","Resizing","intrigueMachine","createMachine","Viewing","Arranging","context","editing","panning","dragging","dropping","selection","detaching","linking","setEditing","assign","clearEditing","setPanning","clearPanning","setDragging","clearDragging","setDropping","clearDropping","setDetaching","clearDetaching","setSelection","clearSelection","setLinking","clearLinking","tutorialData","aP1EHlKvrNgjPx1kElhZ0","F39NcKCnnIjtqGPzvoA1W","IjnvakXbzDwcf84oBqYCb","bPRss4q2Tvzn_ea1TY4Wr","CsKDxvFhIxKDk_m6Bj8Dh","DTZkgJWGKYriyalyLJfZx","NBLwCo0fXhOXI6DGjqtWU","AHiu8yMyfhq5ZYnjuoIn0","currentHeight","h","SALvRB6xX4hqjJVjU6Y_b","referenceType","title","author","family","record","EwfSxmoKarx3n7W1mJy8s","wzwAxT0LV6sfNjOgv31fx","JCnC9yAUfQ3IXvnj_THs8","given","sequence","affiliation","indexed","timestamp","publisher","issue","domain","DOI","created","page","prefix","volume","member","language","deposited","score","resource","primary","URL","subtitle","issued","relation","ISSN","subject","published","agP9N5iMMR8mJF1s5Wthr","jPkhyrgf3HOvPALhbfWYj","EIB7xARz2ceZcpBkE940d","anvYLObXrGTWIk8T3R2rq","eGL9rPJ6hhTOecmHN1IPE","cjmp78kq4aeWsiDHNm3be","KsZsnbXyRuVqf3FKtK0BA","class","_createElementBlock","_component_a_row","justify","align","_component_a_col","span","_component_a_button_group","style","_component_a_button","size","disabled","$options","onClick","icon","_component_icon_undo","_component_icon_redo","_createElementVNode","_toDisplayString","_component_CopyButton","text","$props","shape","status","_hoisted_1","_renderSlot","_ctx","name","props","String","copied","timer","methods","copy","ultralightCopy","$message","__exports__","inject","components","CopyButton","electron","newFile","mounted","queryString","window","location","search","urlParams","URLSearchParams","get","document","url","href","searchParams","history","replaceState","computed","fileName","basename","shareLink","xmlns","_component_vue_infinite_viewer","ref","maxPinchWheel","onScroll","onPinch","onDblclick","_Fragment","_renderList","_component_IntrigueLink","_component_IntrigueNode","selected","some","t","onUpdateDimensions","moveable","updateRect","_component_Cursor","cursorX","cursorY","_component_Moveable","className","draggable","resizable","renderDirections","onClickGroup","onDrag","onDragGroup","onDragEnd","onDragGroupEnd","onResize","onResizeEnd","_component_VueSelecto","dragContainer","selectableTargets","selectByClick","selectFromInside","toggleContinueSelect","keyContainer","hitRate","ratio","onDragStart","onSelect","onSelectEnd","_hoisted_3","Keyboard","handlers","handler","options","keyBindingHandler","createKeybindingsHandler","addEventListener","removeListeners","removeEventListener","includes","color","gradient","onMouseenter","onFocusin","onMouseleave","onFocusout","_component_note","onChange","_component_reference","onMousedown","onMouseup","_component_icon_link","_component_editor_content","editor","defineComponent","EditorContent","Boolean","Editor","extensions","StarterKit","Highlight","Link","protocols","autofocus","editable","onEditorBlur","beforeUnmount","send","getHTML","$emit","getText","watch","commands","setContent","setEditable","focus","blur","_hoisted_6","formatAuthors","authors","authorsString","showFullText","open","extractIsbn","regex","test","chars","replace","last","check","sum","parseInt","final","match","extractIdentifier","isbnString","trim","doiStrings","doi","extract","e","zotero","linkify","startsWith","urls","fetchLiteratureInfo","Promise","resolve","reject","axios","matches","request","responseURL","err","Cite","info","_graph","Note","Reference","required","default","onMouseEnter","onMouseLeave","onLinkButtonClick","observeParent","parentWatchers","$watch","updateDimensionsFromParent","updateDimensions","$refs","height","clientHeight","parseNoteContent","observer","ResizeObserver","observe","breforeUnmount","disconnect","removeParentWatcher","deactivated","styles","width","transform","index","selectedByRemoteUsers","userData","isNote","isReference","current","showLinkButton","_Teleport","to","d","stroke","fill","points","arrowHeadSize","Number","sourceNode","targetNode","updateLine","sx","sy","c1x","c1y","c2x","c2y","ex","ey","ae","as","arrow","sourceElement","querySelector","targetElement","sourceBox","getBoundingBox","targetBox","getBoxToBoxArrow","padEnd","mapX","mapY","zoom","element","rect","getBoundingClientRect","cs","getComputedStyle","paddingX","parseFloat","paddingLeft","paddingRight","offsetHeight","deep","_component_Avatar","variant","Avatar","VueInfiniteViewer","Moveable","VueSelecto","IntrigueNode","IntrigueLink","Cursor","provide","keyboard","newNode","mapped","mapMousePosition","clientX","clientY","doubleClickNode","selectedIds","map","el","preventDefault","panCanvas","scrollLeft","scrollTop","zoomCanvas","canvas","setZoom","cancelSelectionWhenClickEmpty","selecto","clickTarget","inputEvent","inputTarget","sendDragStartMessage","targets","classList","left","right","top","bottom","dragNodes","toDetach","distance","sqrt","dist","pair","translate","commitNodePositions","lastEvent","remove","toUpdate","preventSelectionWhenDragging","isMoveableElement","contains","stop","tryLinking","selectNode","commitSelections","isDragStart","dragStart","resizeNode","commitNodeSize","mappedX","mappedY","gatherDescendants","root","includeRoot","descendants","childDescendants","descendantId","updateCursorPosition","startPanning","stopPropagation","stopPanning","activeNodeHeight","shouldResize","_component_a_card","_component_a_space","_component_a_modal","visible","$event","onOk","onCancel","_component_a_textarea","placeholder","showImportModal","jsonData","exportJSON","importJSON","currentState","state","currentContext","TitleBar","DocumentCanvas","PointerTracker","Debug","loading","debug","docId","injections","setup","functions","catchErrors","useMachine","broadcastUsername","fruit","getRandomFruitsName","maxWords","ipcRenderer","code","body","_","render","app","createApp","App","use","ArcoVue","ArcoVueIcon","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","loaded","__webpack_modules__","call","m","c","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","r","n","getter","__esModule","a","leafPrototypes","getProto","getPrototypeOf","obj","__proto__","mode","ns","create","def","getOwnPropertyNames","definition","o","defineProperty","enumerable","f","chunkId","all","reduce","promises","u","miniCssF","g","globalThis","Function","prop","prototype","hasOwnProperty","inProgress","dataWebpackPrefix","l","done","script","needAttach","scripts","getElementsByTagName","s","getAttribute","createElement","charset","nc","setAttribute","src","onScriptComplete","prev","onerror","onload","doneFns","parentNode","removeChild","head","appendChild","Symbol","toStringTag","nmd","paths","p","installedChunks","installedChunkData","promise","loadingEnded","errorType","realSrc","message","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}